////////////////////////////////////////
//////////////SPLPROT.2DA///////////////
////////////////////////////////////////

/*
		INTELLIGENCE						WISDOM										CHARISMA
		1-2:	-5 casting speed penalty	1: -50% spell duration, 50% spell failure	1-2: -5 penalty to all Saving Throws
		3-4:	-4 casting speed penalty	2: -45% spell duration, 45% spell failure	3-4: -4 penalty to all Saving Throws
		5-6:	-3 casting speed penalty	3: -40% spell duration, 40% spell failure	5-6: -3 penalty to all Saving Throws
		7-8:	-2 casting speed penalty	4: -35% spell duration, 35% spell failure	7-8: -2 penalty to all Saving Throws
		9-10:	-1 casting speed penalty	5: -30% spell duration, 30% spell failure	9-10: -1 penalty to all Saving Throws
		11-15:	Nothing						6: -25% spell duration, 25% spell failure	11-15: Nothing
		16:		+1 caster level bonus		7: -20% spell duration, 20% spell failure	16: +1 to all Saving Throws
		17:		+1 casting speed bonus		8: -15% spell duration, 15% spell failure	17: +5% Non-Physical Damage
		18:		+1 caster level bonus		9: -10% spell duration, 10% spell failure	18: +1 to all Saving Throws
		19:		+1 casting speed bonus		10: -5% spell duration, 5% spell failure	19: +10% Non-Physical Damage
		20:		+1 caster level bonus		11-15: Nothing								20: +1 to all Saving Throws
		21:		+1 casting speed bonus		16: +5% spell duration						21: +15% Non-Physical Damage
		22:		+1 caster level bonus		17: +10% spell duration						22: +1 to all Saving Throws
		23:		+1 casting speed bonus		18: +15% spell duration						23: +20% Non-Physical Damage
		24:									19: +20% spell duration						24: +1 to all Saving Throws
											20: +25% spell duration						25: +25% Non-Physical Damage
											21: +30% spell duration
											22: +35% spell duration
											23: +40% spell duration
											24: +45% spell duration
											25: +50% spell duration		
*/
// INTELLIGENCE
APPEND ~splprot.2da~ ~C0SAINT%TAB%38%TAB%-1%TAB%1~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SAINT~ BEGIN
	    SET C0SAINT = %row%
	  END
	END

// WISDOM
APPEND ~splprot.2da~ ~C0SAWIS%TAB%39%TAB%-1%TAB%1~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SAWIS~ BEGIN
	    SET C0SAWIS = %row%
	  END
	END
	
// CHARISMA
APPEND ~splprot.2da~ ~C0SACHA%TAB%42%TAB%-1%TAB%1~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SACHA~ BEGIN
	    SET C0SACHA = %row%
	  END
	END
	
// STONESKINS
APPEND ~splprot.2da~ ~C0SASTONE%TAB%88%TAB%-1%TAB%1~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SASTONE~ BEGIN
	    SET C0SASTONE = %row%
	  END
	END

APPEND ~splprot.2da~ ~C0SA611%TAB%0x111%TAB%0x00000001%TAB%8~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SA611~ BEGIN
	    SET C0SA611 = %row%
	  END
	END
	
APPEND ~splprot.2da~ ~C0SADAY%TAB%0x106%TAB%1%TAB%9~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SADAY~ BEGIN
	    SET C0SADAY = %row%
	  END
	END

// Resistances
DEFINE_ACTION_FUNCTION	ADD_SPLPROT	INT_VAR	stat = 0	value = 0	relation = 0	RET	new_row		BEGIN
	ACTION_IF	(stat > 278)	BEGIN	WARN	~SPLPROT.2DA - Stat out of Bounds.~	END
	ACTION_IF	((stat != 259) AND (stat != 260) AND (relation > 11))	BEGIN	WARN	~SPLPROT.2DA - Relation out of Bounds.~	END
	COPY_EXISTING ~SPLPROT.2DA~	~override~
		COUNT_2DA_COLS	cols
		COUNT_2DA_ROWS cols rows
		TEXT_SPRINT check_row ~~
		TEXT_SPRINT check_stat ~~
		SET new_row = 0
		FOR(current_row = 0; current_row < rows; ++current_row)	BEGIN	READ_2DA_ENTRY current_row 1 cols check_stat
			PATCH_IF (~%check_stat%~ STRING_EQUAL ~%stat%~)	BEGIN	READ_2DA_ENTRY current_row 2 cols check_value
				PATCH_IF (~%check_value%~ STRING_EQUAL ~%value%~)	BEGIN	READ_2DA_ENTRY current_row 3 cols check_relation
					PATCH_IF (~%check_relation%~ STRING_EQUAL ~%relation%~)	BEGIN	new_row = current_row	current_row = rows	END
				END
			END
		END
		PATCH_IF (new_row = 0)	BEGIN
			FOR(current_row = 0; current_row < rows; ++current_row)	BEGIN	READ_2DA_ENTRY current_row 1 cols check_stat
				PATCH_IF (~%check_stat%~ STRING_EQUAL ~*~)	BEGIN	new_row = current_row	current_row = rows	END
			END
			PATCH_IF (new_row = 0)	BEGIN	new_row = rows	INSERT_2DA_ROW rows cols ~%new_row%		   %stat%		   %value%		   %relation%~
			END	ELSE	BEGIN	SET_2DA_ENTRY new_row 1 cols ~%stat%~	SET_2DA_ENTRY new_row 2 cols ~%value%~	SET_2DA_ENTRY new_row 3 cols ~%relation%~	END
		END
	BUT_ONLY
END
//	Array of Restistance / Stat#
ACTION_DEFINE_ASSOCIATIVE_ARRAY	DMG_ARRAY	BEGIN
	~CRUSH~		=>	22
	~ACID~		=>	17
	~COLD~		=>	15
	~ELEC~		=>	16
	~FIRE~		=>	14
	~PIERC~		=>	23
	~POISN~		=>	74
	~MAGIC~		=>	73
	~MSSL~		=>	24
	~SLASH~		=>	21
	~MFIRE~		=>	19
	~MCOLD~		=>	20
END
ACTION_PHP_EACH	DMG_ARRAY AS one => two	BEGIN
	LAF	ADD_SPLPROT	INT_VAR	stat = two	value = 100	relation = 	2	RET	min = new_row	END
	LAF	ADD_SPLPROT	INT_VAR	stat = two	value = 128	relation = 	4	RET	max = new_row	END
	LAF	ADD_SPLPROT	INT_VAR	stat = 260	value = min	relation = 	max	RET	EVAL ~%one%~ = new_row	END
END
	
// ICONS

DEFINE_ACTION_FUNCTION cd_new_portrait_icon
  INT_VAR string = 0
  STR_VAR bam_file = "****"
  RET     icon
  BEGIN

  COPY_EXISTING ~statdesc.2da~ ~override~
    COUNT_2DA_ROWS 3 count
    READ_2DA_ENTRY (count - 1) 0 3 icon
    SET icon += 1

  APPEND ~statdesc.2da~ ~%icon% %string% %bam_file%~ UNLESS ~%bam_file%~

END

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Weakened~) STR_VAR bam_file = c0saic01 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Constitution Lowered~) STR_VAR bam_file = c0saic02 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Void Edge~) STR_VAR bam_file = c0saic03 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Fire Shield (Shadow)~) STR_VAR bam_file = c0saic04 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Shadeskin~) STR_VAR bam_file = c0saic05 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Shar's Blessing~) STR_VAR bam_file = c0saic06 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Negative Immunity~) STR_VAR bam_file = c0saic07 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Pain Mirror~) STR_VAR bam_file = c0saic08 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Shar's Shield~) STR_VAR bam_file = c0saic09 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Umbral Blades~) STR_VAR bam_file = c0saic10 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Vengeful Shade~) STR_VAR bam_file = c0saic11 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Possession~) STR_VAR bam_file = c0saic12 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Annulment~) STR_VAR bam_file = c0saic13 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Shadow Shield~) STR_VAR bam_file = c0saic14 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Shar's Mantle~) STR_VAR bam_file = c0saic15 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Shadow's Refuge~) STR_VAR bam_file = c0saic16 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Dark Premonition~) STR_VAR bam_file = c0saic17 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Dark Passage~) STR_VAR bam_file = c0saic18 RET icon END
LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(~Sacred Shadow~) STR_VAR bam_file = c0saic19 RET icon END

COPY_EXISTING ~C0SADAY.SPL~ ~OVERRIDE~
LPF ALTER_EFFECT
	INT_VAR
		match_opcode = 324
		match_parameter2 = 0
		parameter2 = EVAL ~C0SADAY~
END

COPY_EXISTING ~C0SADAY2.SPL~ ~OVERRIDE~
      LPF ADD_SPELL_EFFECT
      INT_VAR
	    opcode = 142
	    target = 2
		timing = 0
		duration = 1
        parameter2 = (icon - 18)
      END

STRING_SET ~INTELLIGENCE: Intelligence measures a character's memory, reasoning, and learning ability. It is the prime requisite of the Mage.

Note: A character with an Intelligence score of 8 or less is illiterate and cannot use scrolls or most wands regardless of <PRO_HISHER> class.

Minimum: <MINIMUM>
Maximum: <MAXIMUM>~ ~INTELLIGENCE: Intelligence measures a character's memory, reasoning, and learning ability. It is the prime requisite of the Mage.

Note: A character with an Intelligence score of 8 or less is illiterate and cannot use scrolls or most wands regardless of <PRO_HISHER> class.

Minimum: <MINIMUM>
Maximum: <MAXIMUM>

For Shadow Adepts, Shadow Disciples and Nightsingers:
  1-2 INT: -5 penalty to Casting Speed
  3-4 INT: -4 penalty to Casting Speed
  5-6 INT: -3 penalty to Casting Speed
  7-8 INT: -2 penalty to Casting Speed
  9-10 INT: -1 penalty to Casting Speed
  11-15 INT: Nothing
  16 INT: +1 Casting Level
  17 INT: +1 Casting Level, +1 Casting Speed
  18 INT: +2 Casting Level, +1 Casting Speed
  19 INT: +2 Casting Level, +2 Casting Speed
  20 INT: +3 Casting Level, +2 Casting Speed
  21 INT: +3 Casting Level, +3 Casting Speed
  22 INT: +4 Casting Level, +3 Casting Speed
  23 INT: +4 Casting Level, +4 Casting Speed
  24 INT: +5 Casting Level, +4 Casting Speed
  25 INT: +5 Casting Level, +5 Casting Speed~
STRING_SET ~WISDOM: Wisdom measures a character's enlightenment, judgment, and common sense. It is the prime requisite of priests.

Minimum: <MINIMUM>
Maximum: <MAXIMUM>~ ~WISDOM: Wisdom measures a character's enlightenment, judgment, and common sense. It is the prime requisite of priests.

Minimum: <MINIMUM>
Maximum: <MAXIMUM>

For Shadow Adepts, Shadow Disciples and Nightsingers:
  1 WIS: -50% Spell Duration, 50% Spell Failure
  2 WIS: -45% Spell Duration, 45% Spell Failure
  3 WIS: -40% Spell Duration, 40% Spell Failure
  4 WIS: -35% Spell Duration, 35% Spell Failure
  5 WIS: -30% Spell Duration, 30% Spell Failure
  6 WIS: -25% Spell Duration, 25% Spell Failure
  7 WIS: -20% Spell Duration, 20% Spell Failure
  8 WIS: -15% Spell Duration, 15% Spell Failure
  9 WIS: -10% Spell Duration, 10% Spell Failure
  10 WIS: -5% Spell Duration, 5% Spell Failure
  11-15 WIS: Nothing
  16 WIS: +5% Spell Duration
  17 WIS: +10% Spell Duration
  18 WIS: +15% Spell Duration
  19 WIS: +20% Spell Duration
  20 WIS: +25% Spell Duration
  21 WIS: +30% Spell Duration
  22 WIS: +35% Spell Duration
  23 WIS: +40% Spell Duration
  24 WIS: +45% Spell Duration
  25 WIS: +50% Spell Duration~
STRING_SET ~CHARISMA: Charisma measures a character's persuasiveness, personal magnetism, and ability to lead. This ability is important to the Druid, Bard, and Paladin.

Minimum: <MINIMUM>
Maximum: <MAXIMUM>~ ~CHARISMA: Charisma measures a character's persuasiveness, personal magnetism, and ability to lead. This ability is important to the Druid, Bard, and Paladin.

Minimum: <MINIMUM>
Maximum: <MAXIMUM>

For Shadow Adepts, Shadow Disciples and Nightsingers:
  1-2 CHA: -5 penalty to Saving Throws
  3-4 CHA: -4 penalty to Saving Throws
  5-6 CHA: -3 penalty to Saving Throws
  7-8 CHA: -2 penalty to Saving Throws
  9-10 CHA: -1 penalty to Saving Throws
  11-15 CHA: Nothing
  16 CHA: +1 Saving Throws
  17 CHA: +1 Saving Throws, +5% Elemental Resistance
  18 CHA: +2 Saving Throws, +5% Elemental Resistance
  19 CHA: +2 Saving Throws, +10% Elemental Resistance
  20 CHA: +3 Saving Throws, +10% Elemental Resistance
  21 CHA: +3 Saving Throws, +15% Elemental Resistance
  22 CHA: +4 Saving Throws, +15% Elemental Resistance
  23 CHA: +4 Saving Throws, +20% Elemental Resistance
  24 CHA: +5 Saving Throws, +20% Elemental Resistance
  25 CHA: +5 Saving Throws, +25% Elemental Resistance~

////////////////////////////////////////
/////////////////SPELLS/////////////////
////////////////////////////////////////

PRINT ~Please choose one of the following:
[1] Constitution drain on cast
[2] Drain Current Hit Points on cast
[3] Drain Maximum Hit Points on cast
[4] No Cost~

OUTER_SPRINT ~hpcost~ ~placeholder_value~
OUTER_WHILE (!(IS_AN_INT ~hpcost~) OR (~hpcost~ > 0x5) OR (~hpcost~ < 0x1)) BEGIN
  PRINT ~Please select 1, 2, 3 or 4 and press Enter.~
  ACTION_READLN ~hpcost~
END
      ACTION_IF ("hpcost" = 1) THEN BEGIN
LOAD_TRA ~%MOD_FOLDER%/languages/english/setup.tra~
COPY_EXISTING ~c0sacon1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-1 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon2.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-2 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon3.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-3 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon4.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-4 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon5.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-5 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon6.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-6 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon7.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-7 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon8.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-8 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon9.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-9 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~c0sacon0.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-10 penalty to Constitution^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END
COMPILE ~%MOD_FOLDER%/scripts/c0sacon.baf~

COPY_EXISTING ~C0SA207.spl~ ~override~
SAY NAME1 ~Lesser Drain Vitality~
SAY NAME2 ~Lesser Drain Vitality~
SAY UNIDENTIFIED_DESC ~Lesser Drain Vitality
(Necromancy – Shadow Weave)

Level: 2
Range: Touch
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain two points of Constitution from a single target, increasing the caster's own for 1 turn. Drain Vitality (and its variants) does not cost Constitution as other spells of the Shadow Weave and may not affect the same target more than once per turn.~
COPY_EXISTING ~C0SA207a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 2
	  timing = 4
	  duration = 60
	  parameter1 = RESOLVE_STR_REF (~Constitution Restored~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 2
	  timing = 1
	  duration = 0
	  parameter1 = RESOLVE_STR_REF (~Constitution Drained~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA207
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA407
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA706
  END

COPY_EXISTING ~C0SA407.spl~ ~override~
SAY NAME1 ~Drain Vitality~
SAY NAME2 ~Drain Vitality~
SAY UNIDENTIFIED_DESC ~Drain Vitality
(Necromancy – Shadow Weave)

Level: 4
Range: Touch
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain four points of Constitution from a single target, increasing the caster's own for 1 turn. Drain Vitality (and its variants) does not cost Constitution as other spells of the Shadow Weave and may not affect the same target more than once per turn.~
COPY_EXISTING ~C0SA407a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 2
	  timing = 4
	  duration = 60
	  parameter1 = RESOLVE_STR_REF (~Constitution Restored~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 2
	  timing = 1
	  duration = 0
	  parameter1 = RESOLVE_STR_REF (~Constitution Drained~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA207
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA407
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA706
  END

COPY_EXISTING ~C0SA706.spl~ ~override~
SAY NAME1 ~Greater Drain Vitality~
SAY NAME2 ~Greater Drain Vitality~
SAY UNIDENTIFIED_DESC ~Greater Drain Vitality
(Necromancy – Shadow Weave)

Level: 7
Range: Touch
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain eight points of Constitution from a single target, increasing the caster's own for 1 turn. Drain Vitality (and its variants) does not cost Constitution as other spells of the Shadow Weave and may not affect the same target more than once per turn.~
COPY_EXISTING ~C0SA706a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 2
	  timing = 4
	  duration = 60
	  parameter1 = RESOLVE_STR_REF (~Constitution Restored~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 2
	  timing = 1
	  duration = 0
	  parameter1 = RESOLVE_STR_REF (~Constitution Drained~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA207
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA407
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 206 // display string
	  target = 2
	  timing = 0
	  duration = 60
	  resist_dispel = 2
	  parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
	STR_VAR
	  resource = C0SA706
  END

      PRINT ~Resource: Constitution drain on cast~
      END
      ACTION_IF ("hpcost" = 2) THEN BEGIN
LOAD_TRA ~%MOD_FOLDER%/languages/english/setup-2.tra~
COPY ~%MOD_FOLDER%/alt-spell/c0sacon1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-2 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon2.spl~ ~override/c0sacon2.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-4 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon3.spl~ ~override/c0sacon3.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-6 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon4.spl~ ~override/c0sacon4.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-8 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon5.spl~ ~override/c0sacon5.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-10 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon6.spl~ ~override/c0sacon6.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-12 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon7.spl~ ~override/c0sacon7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-14 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon8.spl~ ~override/c0sacon8.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-16 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon9.spl~ ~override/c0sacon9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-18 Current Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon0.spl~ ~override/c0sacon0.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-20 Current Hit Points^-~)
END

COMPILE ~%MOD_FOLDER%/alt-spell/c0sacon.baf~
COPY ~%MOD_FOLDER%/alt-spell/C0SA207.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 12 // display string
	  duration = 0
END
SAY NAME1 ~Lesser Drain Vitality~
SAY NAME2 ~Lesser Drain Vitality~
SAY UNIDENTIFIED_DESC ~Lesser Drain Vitality
(Necromancy – Shadow Weave)

Level: 2
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain two hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA407.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 12 // display string
	  duration = 0
END
SAY NAME1 ~Drain Vitality~
SAY NAME2 ~Drain Vitality~
SAY UNIDENTIFIED_DESC ~Drain Vitality
(Necromancy – Shadow Weave)

Level: 4
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain four hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA706.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 12 // display string
	  duration = 0
END
SAY NAME1 ~Greater Drain Vitality~
SAY NAME2 ~Greater Drain Vitality~
SAY UNIDENTIFIED_DESC ~Greater Drain Vitality
(Necromancy – Shadow Weave)

Level: 7
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain six hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
      PRINT ~Resource: Drain Current Hit Points on cast~
      END
      ACTION_IF ("hpcost" = 3) THEN BEGIN
LOAD_TRA ~%MOD_FOLDER%/languages/english/setup-3.tra~
COPY ~%MOD_FOLDER%/alt-spell/c0sacon1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-2 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon2.spl~ ~override/c0sacon2.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-4 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon3.spl~ ~override/c0sacon3.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-6 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon4.spl~ ~override/c0sacon4.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-8 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon5.spl~ ~override/c0sacon5.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-10 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon6.spl~ ~override/c0sacon6.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-12 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon7.spl~ ~override/c0sacon7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-14 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon8.spl~ ~override/c0sacon8.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-16 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon9.spl~ ~override/c0sacon9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-18 Maximum Hit Points^-~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon0.spl~ ~override/c0sacon0.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 17 // display string
	  opcode = 18
      timing = 0
	  duration = 36
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777-20 Maximum Hit Points^-~)
END

COMPILE ~%MOD_FOLDER%/alt-spell/c0sacon.baf~
COPY ~%MOD_FOLDER%/alt-spell/C0SA207.spl~ ~override~
SAY NAME1 ~Lesser Drain Vitality~
SAY NAME2 ~Lesser Drain Vitality~
SAY UNIDENTIFIED_DESC ~Lesser Drain Vitality
(Necromancy – Shadow Weave)

Level: 2
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain two hit points per level from the target as magic damage (Save vs. Death at -2 for half) and increase <PRO_HISHER> maximum hit points by the amount drained. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA407.spl~ ~override~
SAY NAME1 ~Drain Vitality~
SAY NAME2 ~Drain Vitality~
SAY UNIDENTIFIED_DESC ~Drain Vitality
(Necromancy – Shadow Weave)

Level: 4
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain four hit points per level from the target as magic damage (Save vs. Death at -2 for half) and increase <PRO_HISHER> maximum hit points by the amount drained. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA706.spl~ ~override~
SAY NAME1 ~Greater Drain Vitality~
SAY NAME2 ~Greater Drain Vitality~
SAY UNIDENTIFIED_DESC ~Greater Drain Vitality
(Necromancy – Shadow Weave)

Level: 7
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain six hit points per level from the target as magic damage (Save vs. Death at -2 for half) and increase <PRO_HISHER> maximum hit points by the amount drained. Drain Vitality (and its variants) does not cost hit points as other spells.~
      PRINT ~Resource: Drain Maximum Hit Points on cast~
      END
      ACTION_IF ("hpcost" = 4) THEN BEGIN
LOAD_TRA ~%MOD_FOLDER%/languages/english/setup-4.tra~
COPY ~%MOD_FOLDER%/alt-spell/c0sacon1.spl~ ~override~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon2.spl~ ~override/c0sacon2.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon3.spl~ ~override/c0sacon3.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon4.spl~ ~override/c0sacon4.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon5.spl~ ~override/c0sacon5.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon6.spl~ ~override/c0sacon6.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon7.spl~ ~override/c0sacon7.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon8.spl~ ~override/c0sacon8.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon9.spl~ ~override/c0sacon9.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon0.spl~ ~override/c0sacon0.spl~
  LPF DELETE_SPELL_EFFECT
      INT_VAR
	  opcode_to_delete = %-1%
END

COPY ~%MOD_FOLDER%/alt-spell/C0SA207.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 12 // display string
	  duration = 0
END
SAY NAME1 ~Lesser Drain Vitality~
SAY NAME2 ~Lesser Drain Vitality~
SAY UNIDENTIFIED_DESC ~Lesser Drain Vitality
(Necromancy – Shadow Weave)

Level: 2
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain two hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA407.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 12 // display string
	  duration = 0
END
SAY NAME1 ~Drain Vitality~
SAY NAME2 ~Drain Vitality~
SAY UNIDENTIFIED_DESC ~Drain Vitality
(Necromancy – Shadow Weave)

Level: 4
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain four hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA706.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 12 // display string
	  duration = 0
END
SAY NAME1 ~Greater Drain Vitality~
SAY NAME2 ~Greater Drain Vitality~
SAY UNIDENTIFIED_DESC ~Greater Drain Vitality
(Necromancy – Shadow Weave)

Level: 7
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain six hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
      PRINT ~Resource: No Cost~
      END
	  
COPY_EXISTING ~C0SACON1.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON1~
	END	  
COPY_EXISTING ~C0SACON2.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON2~
	END	  
COPY_EXISTING ~C0SACON3.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON3~
	END	  
COPY_EXISTING ~C0SACON4.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON4~
	END	  
COPY_EXISTING ~C0SACON5.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON5~
	END	  
COPY_EXISTING ~C0SACON6.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON6~
	END	  
COPY_EXISTING ~C0SACON7.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON7~
	END	  
COPY_EXISTING ~C0SACON8.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON8~
	END	  
COPY_EXISTING ~C0SACON9.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON9~
	END	  
COPY_EXISTING ~C0SACON0.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 1
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = EVAL ~C0SACON0~
	END

COPY_EXISTING ~C0SA207.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 2
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = C0SA207
	END
	
COPY_EXISTING ~C0SA407.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 2
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = C0SA407
	END
	
COPY_EXISTING ~C0SA706.SPL~ ~OVERRIDE~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 2
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = C0SA706
	END
	
// PROJECTILES

ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj01.PRO~ ~SM Flying Skull~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj2d.PRO~ ~SM Magic Missile 1~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj2c.PRO~ ~SM Magic Missile 2~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj2b.PRO~ ~SM Magic Missile 3~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj2a.PRO~ ~SM Magic Missile 4~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj02.PRO~ ~SM Magic Missile 5~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj03.PRO~ ~SM Sparkle~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj04.PRO~ ~SM Flame Arrow~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj05.PRO~ ~SM Purple Fireball~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj06.PRO~ ~SM Red Ray~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj07.PRO~ ~SM Cone of Cold~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj08.PRO~ ~SM Chain Lightning 1~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0pro08a.PRO~ ~SM Chain Lightning 2~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj09.PRO~ ~SM Purple Fire Cone~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj10.PRO~ ~SM Insects 1~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0pro10a.PRO~ ~SM Insects 2~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj11.PRO~ ~SM Negastorm~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj12.PRO~ ~SM Dark Bolt~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj13.PRO~ ~SM Phantasm~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj14.PRO~ ~SM Small Area~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj15.PRO~ ~SM Purple Ray~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj16.PRO~ ~SM Black Mist~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj17.PRO~ ~SM Black Missile~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj18.PRO~ ~SM Small Area Enemies Only~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj19.PRO~ ~SM Purple Orb~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj20.PRO~ ~SM Green Fireball~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj21.PRO~ ~SM Purple Ray 2~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj22.PRO~ ~SM Nightshade~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj23.PRO~ ~SM Night Knives 3~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj24.PRO~ ~SM Void Blast~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj25.PRO~ ~SM Blackfire Ruin~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0proj26.PRO~ ~SM Shadow Glyph~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0negeb.PRO~ ~SM Negative Burst~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0weird.PRO~ ~SM Weird~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0night2.PRO~ ~SM Night Knives 2~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0nightk.PRO~ ~SM Night Knives~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0sasper.PRO~ ~SM Shadow Spear~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0sarain.PRO~ ~SM Black Rain~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0sawall.PRO~ ~SM Wall of Fire~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0cflame.PRO~ ~SM Cursed Flames~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0blizza.PRO~ ~SM Blizzard~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0oblivi.PRO~ ~SM Oblivion Pull~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0pandem.PRO~ ~SM Pandemonium~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/projectiles/c0scomet.PRO~ ~SM Shadow Comet~

COPY_EXISTING ~c0proj08.pro~ ~override~
WRITE_SHORT 0x21A (IDS_OF_SYMBOL (~projectl~ ~c0pro08a~)) + 1

COPY_EXISTING ~c0proj10.pro~ ~override~
WRITE_SHORT 0x21A (IDS_OF_SYMBOL (~projectl~ ~c0pro10a~)) + 1

////////////////////////////////////////
//////////SPELLS////////////////////////
////////////////////////////////////////

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal11.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal1a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal12.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal1b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal13.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal1c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal14.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal1d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal15.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal1e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal16.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal1f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal21.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal2a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal22.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal2b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal23.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal2c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal24.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal2d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal25.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal2e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal26.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal2f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal31.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal3a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal32.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal3b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal33.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal3c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal34.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal3d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal35.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal3e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal36.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal3f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal41.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal4a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal42.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal4b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal43.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal4c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal44.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal4d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal45.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal4e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal46.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal4f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal51.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal5a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal52.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal5b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal53.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal5c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal54.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal5d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal55.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal5e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal56.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal5f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal61.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal6a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal62.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal6b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal63.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal6c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal64.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal6d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal65.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal6e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal66.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal6f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal71.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal7a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal72.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal7b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal73.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal7c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal74.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal7d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal75.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal7e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal76.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal7f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal81.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal8a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal82.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal8b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal83.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal8c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal84.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal8d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal85.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal8e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal86.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal8f%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal91.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal9a%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal92.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal9b%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal93.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal9c%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal94.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal9d%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal95.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal9e%
END

COPY_EXISTING ~c0sal11.spl~ ~override/c0sal96.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0sal9f%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal1a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal11%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal1b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal12%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal1c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal13%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal1d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal14%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal1e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal15%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal1f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal16%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal2a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal21%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal2b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal22%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal2c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal23%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal2d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal24%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal2e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal25%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal2f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal26%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal3a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal31%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal3b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal32%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal3c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal33%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal3d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal34%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal3e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal35%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal3f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal36%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal4a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal41%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal4b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal42%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal4c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal43%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal4d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal44%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal4e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal45%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal4f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal46%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal5a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal51%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal5b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal52%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal5c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal53%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal5d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal54%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal5e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal55%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal5f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal56%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal6a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal61%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal6b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal62%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal6c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal63%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal6d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal64%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal6e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal65%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal6f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal66%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal7a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal71%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal7b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal72%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal7c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal73%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal7d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal74%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal7e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal75%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal7f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal76%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal8a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal81%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal8b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal82%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal8c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal83%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal8d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal84%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal8e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal85%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal8f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal86%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal9a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal91%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal9b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal92%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal9c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal93%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal9d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal94%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal9e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal95%
END

COPY_EXISTING ~c0sal1.spl~ ~override/c0sal9f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %c0salv9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %c0sal96%
END

COPY_EXISTING ~c0saint1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter2 = 131
	  parameter2 = %C0SAINT%
END

COPY_EXISTING ~c0sainta.spl~ ~override/c0saint7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 1
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0saint8.spl~

COPY_EXISTING ~c0saintb.spl~ ~override/c0saint9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 2
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 1
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0saint0.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 2
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 2
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0sainta.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 3
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 2
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0saintb.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 3
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 3
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0saintc.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 4
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 3
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0saintd.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 4
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 4
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0sainte.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 5
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 4
END

COPY_EXISTING ~c0saintb.spl~ ~override/c0saintf.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 5
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 5
END

COPY_EXISTING ~c0sawis1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter2 = 131
	  parameter2 = %C0SAWIS%
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis3.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 55
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 60
	  parameter1 = 45
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis4.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 60
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 60
	  parameter1 = 40
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis5.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 65
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 60
	  parameter1 = 35
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis6.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 70
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 60
	  parameter1 = 30
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis7.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 75
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 60
	  parameter1 = 25
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis8.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 80
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 60
	  parameter1 = 20
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis9.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 85
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 60
	  parameter1 = 15
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawis0.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 90
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 60
	  parameter1 = 10
END

COPY_EXISTING ~c0sawis2.spl~ ~override/c0sawisa.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 99
	  parameter1 = 95
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 60
	  parameter1 = 5
END

COPY_EXISTING ~c0sawisb.spl~ ~override~
COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisc.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 110
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisd.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 115
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawise.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 120
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisf.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 125
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisg.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 130
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawish.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 135
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisi.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 140
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisj.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 145
END

COPY_EXISTING ~c0sawisb.spl~ ~override/c0sawisk.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 150
END

COPY_EXISTING ~c0sacha1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter2 = 131
	  parameter2 = %C0SACHA%
END
COPY_EXISTING ~c0sacha2.spl~ ~override/c0sacha2.spl~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 325
	  target = 2
	  timing = 9
	  parameter1 = 0 - 5
END
COPY_EXISTING ~c0sacha2.spl~ ~override/c0sacha3.spl~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 325
	  target = 2
	  timing = 9
	  parameter1 = 0 - 4
END
COPY_EXISTING ~c0sacha2.spl~ ~override/c0sacha4.spl~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 325
	  target = 2
	  timing = 9
	  parameter1 = 0 - 3
END
COPY_EXISTING ~c0sacha2.spl~ ~override/c0sacha5.spl~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 325
	  target = 2
	  timing = 9
	  parameter1 = 0 - 2
END
COPY_EXISTING ~c0sacha2.spl~ ~override/c0sacha6.spl~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 325
	  target = 2
	  timing = 9
	  parameter1 = 0 - 1
END
COPY_EXISTING ~c0sacha2.spl~ ~override/c0sacha7.spl~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 325
	  target = 2
	  timing = 9
	  parameter1 = 1
END
COPY_EXISTING ~c0sacha7.spl~ ~override/c0sacha8.spl~
	LPF ADD_SPELL_EFFECT
		INT_VAR
			opcode = 27
			target = 2
			timing = 9
			parameter1 = 5
	END
	LPF ADD_SPELL_EFFECT
		INT_VAR
			opcode = 28
			target = 2
			timing = 9
			parameter1 = 5
	END
	LPF ADD_SPELL_EFFECT
		INT_VAR
			opcode = 29
			target = 2
			timing = 9
			parameter1 = 5
	END
	LPF ADD_SPELL_EFFECT
		INT_VAR
			opcode = 30
			target = 2
			timing = 9
			parameter1 = 5
	END
	LPF ADD_SPELL_EFFECT
		INT_VAR
			opcode = 31
			target = 2
			timing = 9
			parameter1 = 5
	END
COPY_EXISTING ~c0sacha8.spl~ ~override/c0sacha9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 325
	  parameter1 = 2
END
COPY_EXISTING ~c0sacha9.spl~ ~override/c0sacha0.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 27
	  parameter1 = 10
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 28
	  parameter1 = 10
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 29
	  parameter1 = 10
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 30
	  parameter1 = 10
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 31
	  parameter1 = 10
END
COPY_EXISTING ~c0sacha0.spl~ ~override/c0sachaa.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 325
	  parameter1 = 3
END
COPY_EXISTING ~c0sachaa.spl~ ~override/c0sachab.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 27
	  parameter1 = 15
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 28
	  parameter1 = 15
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 29
	  parameter1 = 15
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 30
	  parameter1 = 15
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 31
	  parameter1 = 15
END
COPY_EXISTING ~c0sachab.spl~ ~override/c0sachac.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 325
	  parameter1 = 4
END
COPY_EXISTING ~c0sachac.spl~ ~override/c0sachad.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 27
	  parameter1 = 20
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 28
	  parameter1 = 20
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 29
	  parameter1 = 20
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 30
	  parameter1 = 20
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 31
	  parameter1 = 20
END
COPY_EXISTING ~c0sachad.spl~ ~override/c0sachae.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 325
	  parameter1 = 5
END
COPY_EXISTING ~c0sachae.spl~ ~override/c0sachaf.spl~
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 27
	  parameter1 = 25
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 28
	  parameter1 = 25
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 29
	  parameter1 = 25
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 30
	  parameter1 = 25
END
  LPF ALTER_EFFECT
    INT_VAR
	  match_opcode = 31
	  parameter1 = 25
END

COPY_EXISTING ~c0sacon.cre~ ~override~
  WRITE_ASCII 0x248 ~c0sacon~ #8
  WRITE_ASCII 0x280 ~c0sacon~  #32

COPY_EXISTING ~C0SA1.spl~ ~override~
SAY NAME1 ~Shield of Shadows~
SAY NAME2 ~Shield of Shadows~
SAY UNIDENTIFIED_DESC ~Shield of Shadows
The shadow adept surrounds <HIMHER>self with a barrier of purpleblack force. This shield of shadows functions like a shield spell, setting <HISHER> armor class to 4 (2 against ranged weapons) and absorbing magic missiles cast at him for 1 hour per 2 levels to a maximum of 9 hours.~

COPY_EXISTING ~C0SA2.spl~ ~override~
SAY NAME1 ~Shadow Double~
SAY NAME2 ~Shadow Double~
SAY UNIDENTIFIED_DESC ~Shadow Double
The shadow adept creates a copy of himself out of shadowstuff. The copy is at 60% of the caster's level and has all the spells and abilities that the caster would have at that level.~

COPY_EXISTING ~C0SA101.spl~ ~override~
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 1
		projectile = c0proj2d
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 2
		projectile = c0proj2c
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 3
		projectile = c0proj2b
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 4
		projectile = c0proj2a
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 5
		projectile = c0proj02
END
SAY NAME1 ~Shadow Missile~
SAY NAME2 ~Shadow Missile~
SAY UNIDENTIFIED_DESC ~Shadow Missile
(Invocation/Evocation – Shadow Weave)

Level: 1
Range: Visual range of the caster
Duration: Instant
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None 

The shadow adept launches a missile of energy that unerringly strikes the target for 1d4 magic damage (+1 cold) and reduces the target's THAC0 by 1 for 3 rounds. An additional missile is launched for every 2 levels of the caster to a maximum of five missiles (5d4+5 damage and -5 THAC0) at level 9.~

COPY_EXISTING ~C0SA102.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Doomed~)
END
SAY NAME1 ~Sigil of Despair~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj01%~
END
SAY NAME2 ~Sigil of Despair~
SAY UNIDENTIFIED_DESC ~Sigil of Despair
(Alteration – Shadow Weave)

Level: 1
Range: 25 ft.
Duration: 1 turn
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: None

This spell causes a feeling of doom to overwhelm the target. For the duration of the spell, the target receives a -2 penalty to all <PRO_HISHER> rolls, including THAC0 and Saving Throws. Additionally, the target suffers a -1 penalty to all statistics. There is no Saving Throw for this spell, and it is not affected by Magic Resistance.~

COPY_EXISTING ~C0SA103.spl~ ~override~
SAY NAME1 ~Blinding Darkness~
SAY NAME2 ~Blinding Darkness~
SAY UNIDENTIFIED_DESC ~Blinding Darkness
(Illusion/Phantasm – Shadow Weave)

Level: 1
Range: 40 ft.
Duration: 2 hours
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: Neg.

This 1st-level spell temporarily blinds its target. A Saving Throw at -2 penalty is allowed and, if successful, there are no harmful effects. If a victim is blinded, <PRO_HESHE> receives a -4 penalty to <PRO_HISHER> attack rolls and Armor Class.~

COPY_EXISTING ~C0SA104.spl~ ~override~
SAY NAME1 ~Deep Slumber~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj03%~
END
SAY NAME2 ~Deep Slumber~
SAY UNIDENTIFIED_DESC ~Deep Slumber
(Enchantment/Charm – Shadow Weave)

Level: 1
Range: Visual range of the caster
Duration: 5 rounds/level 
Casting Time: 1 
Area of Effect: 30-ft. radius
Saving Throw: Neg.

When a shadow adept casts Deep Slumber, <PRO_HESHE> causes a comatose slumber to come upon one or more enemies (other than undead and certain other creatures specifically excluded from the spell's effects). All creatures to be affected by Deep Slumber must be within a 30-ft. radius. Creatures in the area of effect must make a Saving Throw vs. Death with a -3 penalty or fall asleep. Monsters with 5 Hit Dice or more are unaffected. Attacks against sleeping opponents never miss.

At 9th level, targets above 4 Hit Dice may be affected though with no saving throw penalty.~

COPY_EXISTING ~C0SA105.spl~ ~override~
SAY NAME1 ~Bittercold Touch~
SAY NAME2 ~Bittercold Touch~
SAY UNIDENTIFIED_DESC ~Bittercold Touch
(Necromancy – Shadow Weave)

Level: 1
Range: 0
Duration: 1 turn
Casting Time: 1
Area of Effect: The creature
Saving Throw: Neg.

When the caster completes this spell, <PRO_HISHER> hand sucks in all light. This energy attacks the life force of any living creature upon which the shadow adept makes a successful melee attack (+4 bonus to hit). (Nonliving creatures such as golems and undead are unaffected by this spell.) The creature is punched for 1d2 fist damage (Strength bonuses apply) and must make a Saving Throw vs. Spell or suffer 1d8 points of cold damage and become Chilled for 3 rounds. Chilled creatures suffer a -2 penalty to Armor Class and THAC0 and move at half of their normal rate. Non-living creatures, such as undead or constructs, must instead make a Saving Throw vs. Spell at -2 or suffer 1d10 magic damage and do not become Chilled.~

COPY_EXISTING ~C0SA105a.spl~ ~override~
LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Chilled~)
  END

COPY_EXISTING ~C0SA106.spl~ ~override~
SAY NAME1 ~Essence Drain~
SAY NAME2 ~Essence Drain~
SAY UNIDENTIFIED_DESC ~Essence Drain
(Necromancy – Shadow Weave)

Level: 1
Range: 30 ft.
Duration: Special
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

With this spell, the shadow adept drains the life force from a target and adds it to <PRO_HISHER> own. The target creature suffers 2 points of magical damage + 2 points per 2 levels of the caster to a maximum of 10 total at 9th level while the shadow adept gains an equal amount of Hit Points. If the shadow adept goes over <PRO_HISHER> maximum Hit Point total with this spell, <PRO_HESHE> loses any extra Hit Points after 1 turn.

If the target is slain, the amount of health gained by the caster is doubled.~

COPY_EXISTING ~C0SA106b.spl~ ~override~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      opcode = 139 // display string
	  target = 1
	  timing = 1
	  parameter1 = RESOLVE_STR_REF (~Essence Drain Bonus Doubled~)
  END

COPY_EXISTING ~C0SA107.spl~ ~override~
SAY NAME1 ~Shadow Veil~
SAY NAME2 ~Shadow Veil~
SAY UNIDENTIFIED_DESC ~Shadow Veil
(Conjuration/Summoning – Shadow Weave)

Level: 1
Range: 0
Duration: 9 hours
Casting Time: 9
Area of Effect: The caster
Saving Throw: None

By means of this spell, the shadow adept creates a magical field of force that serves as armor, increasing the caster's armor class by 1 point per 3 levels of the caster up to a maximum of +4 at level 13. It is cumulative with Dexterity bonuses to Armor Class. The veil is invisible, does not hinder movement, adds no weight or encumbrance, and doesn't prevent spellcasting. It lasts until successfully dispelled or until its duration expires.

Additionally, whenever the caster suffers damage while the shadow veil is active, <PRO_HESHE> has a 5% (+5% per ten caster levels) chance to turn invisible for 2 rounds.~

COPY_EXISTING ~C0SA108.spl~ ~override~
SAY NAME1 ~Curse~
SAY NAME2 ~Curse~
SAY UNIDENTIFIED_DESC ~Curse
(Conjuration/Summoning – Shadow Weave)

Level: 1
Range: Sight
Duration: 1 turn
Casting Time: 1 round
Area of Effect: 30 ft. radius
Saving Throw: None

When the Curse spell is uttered, the caster lowers the morale of enemy creatures and penalizes their saving throws and attack rolls by -1. At the instant the spell is completed, it affects all creatures in a 30 ft. radius centered on the point selected by the caster (thus, affected creatures leaving the area are still subject to the spell's effects; those entering the area after the casting is completed are not. This spell is not affected by Magic Resistance.~

COPY_EXISTING ~C0SA109.spl~ ~override~
SAY NAME1 ~Shadow Rope~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj15%~
END
SAY NAME2 ~Shadow Rope~
SAY UNIDENTIFIED_DESC ~Shadow Rope
(Conjuration/Summoning – Shadow Weave)

Level: 1
Range: Visual range of the caster
Duration: Special
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell creates a shadowy thread which wraps itself around the caster's target and pulls them towards the caster. It deals no damage, but the target is immobilized for the duration and is unable to attack or use spells for one round.~

COPY_EXISTING ~C0SA110.spl~ ~override~
SAY NAME1 ~Decoy~
SAY NAME2 ~Decoy~
SAY UNIDENTIFIED_DESC ~Decoy
(Illusion/Phantasm – Shadow Weave)

Level: 1
Range: Visual range of caster
Duration: 1 round
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell briefly conjures a projection of the caster next to <PRO_HIMHER> while turning <PRO_HIMHER> invisible for 1 round.~

COPY_EXISTING ~C0SA111.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Mesmerized~)
  END
SAY NAME1 ~Mesmerize~
SAY NAME2 ~Mesmerize~
SAY UNIDENTIFIED_DESC ~Mesmerize
(Enchantment/Charm – Shadow Weave)

Level: 1
Range: Visual range of caster
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell inflicts an enchantment upon a target creature of the shadow adept's choice. If the target fails a Save vs. Spells at -4, they are pacified for one turn, ceasing all action and remaining still for the duration. The target also suffers a -6 penalty to Armor Class due to being too mentally unfocused to actively dodge attacks. However, the target will break free of its enchantment prematurely if they are attacked.~

COPY_EXISTING ~C0SA112.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = FIRE
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			parameter1 = RESOLVE_STR_REF (~Cursed~)
			savingthrow = 1
	END
	LPF ADD_SPELL_EFFECT
		INT_VAR
			insert_point = 2
			opcode = 139
			target = 2
			timing = 1
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 10% of maximum hit points in shadow damage^-~)
			power = 1
			savingthrow = 1
			resist_dispel = 1
	END
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0cflame%~
END
SAY NAME1 ~Cursed Flames~
SAY NAME2 ~Cursed Flames~
SAY UNIDENTIFIED_DESC ~Cursed Flames
(Alteration – Shadow Weave)

Level: 1
Range: 5 ft.
Duration: Special
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: 1/2

When the shadow adept casts this spell, a jet of searing flame shoots from <PRO_HISHER> fingertips. The shadow adept's hands must be held so as to send forth a fanlike sheet of flames: <PRO_HISHER> thumbs must touch each other and the fingers must be spread. The burning hands send out flame jets of 5 ft. length in a horizontal arc of about 120 degrees in front of the shadow adept. All targets within range take 1d4+10% of their maximum hit points in fire damage and have their Luck reduced by two points for 2 rounds + 1 round per level to a maximum of 10 rounds at 9th level, additionally, they take 2 points of fire damage per round for the duration. A successful Saving Throw vs. Spells negates the maximum hit points damage and the secondary effects.~

COPY_EXISTING ~C0SA201.spl~ ~override~
SAY NAME1 ~Dark Mirage~
SAY NAME2 ~Dark Mirage~
SAY UNIDENTIFIED_DESC ~Dark Mirage
(Illusion/Phantasm – Shadow Weave)

Level: 2
Range: 0
Duration: 1 hour
Casting Time: 2
Area of Effect: The caster
Saving Throw: None

When Dark Mirage is cast, the shadow adept causes the outline of <PRO_HISHER> form to become blurred, shifting and wavering. This distortion causes all missile and melee attacks against the caster to be made with a -3 penalty. The shadow adept also gains a +1 bonus to all of <PRO_HISHER> Saving Throws. Additionally, the caster causes from 2 to 8 exact duplicates of <PRO_HIMHER>self to come into being around <PRO_HIMHER>. These images do exactly what the shadow adept does. Since the spell causes a blurring and slight distortion when cast, it is impossible for opponents to be certain which are the illusions and which is the actual shadow adept. When an image is struck by a melee or missile attack—magical or otherwise—it disappears, but any other existing images remain intact until they are struck. However, it is important to note that this will not protect the caster against every attack, as it is possible for an enemy to choose the real caster amongst all the images.~

COPY_EXISTING ~C0SA202.spl~ ~override~
SAY NAME1 ~Night Terrors~
SAY NAME2 ~Night Terrors~
SAY UNIDENTIFIED_DESC ~Night Terrors
(Necromancy – Shadow Weave)

Level: 2
Range: 40 ft.
Duration: 1 turn
Casting Time: 2
Area of Effect: 30-ft. radius
Saving Throw: Neg.

All enemies within the area of effect when this spell is cast must Save vs. Spell at -2 or flee in terror. Certain creatures are immune to the effects of fear, including all undead.

From 14th level onwards, this spell gains the effects of the 6th level wizard spell Death Spell: creatures below 8 Hit Dice and all summoned creatures will die instantly from overwhelming fear. (no saving throw)~

COPY_EXISTING ~C0SA203.spl~ ~override~
SAY NAME1 ~Dark Fortune~
SAY NAME2 ~Dark Fortune~
SAY UNIDENTIFIED_DESC ~Dark Fortune
(Enchantment/Charm – Shadow Weave)

Level: 2
Range: 15 ft.
Duration: 1 hour
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

The recipient of this spell gains extraordinary luck for the next hour, receiving a +1 bonus to <PRO_HISHER> Saving Throws, attack rolls, and minimum damage/healing rolls as well as +5% to all thieving skills. Furthermore, damage dice for all effects outside a weapon's base damage dealt towards the target is reduced by 1, while the target's damage dice are increased by 1. For example, a 6d6 fireball will do 6d5 damage, and a flaming long sword that deals 1d8+2 slashing plus 1d3 fire damage will deal 1d8+2 slashing plus 1d2 fire damage instead. Bonuses increase by the original amount for every five caster levels after 3rd level up to 23rd level. This spell also makes the target immune to effects that reduce luck, such as Doom or Greater Malison.~

COPY_EXISTING ~C0SA204.spl~ ~override~
SAY NAME1 ~Power Word: Sleep~
SAY NAME2 ~Power Word: Sleep~
SAY UNIDENTIFIED_DESC ~Power Word, Sleep
(Conjuration/Summoning – Shadow Weave)

Level: 2
Range: 90 ft.
Duration: 5 rounds
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

When a shadow adept calls upon a Power Word, Sleep spell, <PRO_HESHE> causes a comatose slumber to come upon 1 creature (other than undead and certain other creatures specifically excluded from the spell's effects). The creature targeted must have less than 20 Hit Points and gets no Saving Throw. Magically sleeping opponents can be attacked with substantial bonuses. The Sleep effect will last for 5 rounds. This spell has no effect on creatures with more than 20 Hit Points.

At 10th level, creatures above 20 Hit Points are put to sleep for 2 rounds. This spell is not affected by Magic Resistance.~

COPY_EXISTING ~C0SA205.spl~ ~override~
SAY NAME1 ~Dread Silence~
SAY NAME2 ~Dread Silence~
SAY UNIDENTIFIED_DESC ~Dread Silence
(Alteration – Shadow Weave)

Level: 2
Range: Visual range of the caster
Duration: 2 rounds/level
Casting Time: 5
Area of Effect: 15-ft. radius sphere
Saving Throw: Neg. 

Upon casting this spell, complete silence prevails in the affected area. All sound is stopped: Conversation is impossible and spells cannot be cast. Each creature in the area must make a Saving Throw vs. Spell with a -5 penalty; if the save is failed then they are silenced for the duration of the spell. Note that this spell does not continue to affect the area after being cast; only those in the area at the time of the casting are affected by the silence. Only the caster is immune to the spell's effects - both allies and enemies can be affected.~

COPY_EXISTING ~C0SA206.spl~ ~override~
SAY NAME1 ~Ghostly Visage~
SAY NAME2 ~Ghostly Visage~
SAY UNIDENTIFIED_DESC ~Ghostly Visage
(Illusion/Phantasm – Shadow Weave)

Level: 2
Range: Self
Duration: 1 turn/level
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

The caster is surrounded by a ghostly nimbus of light that grants 10% resistance to physical damage and prevents all level 1 spells from affecting <PRO_HIMHER>.~

COPY_EXISTING ~C0SA208.spl~ ~override~
SAY NAME1 ~Black Mist~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj16%~
END
SAY NAME2 ~Black Mist~
SAY UNIDENTIFIED_DESC ~Black Mist
(Illusion/Phantasm – Shadow Weave)

Level: 2
Range: 90 ft.
Duration: 1 turn
Casting Time: 2
Area of Effect: 50' radius
Saving Throw: Neg.

When this spell is cast, a thick shadowy mist spreads across the area selected by the caster. Any creatures caught within the mist must make a Save vs. Spells at -2 at the beginning of each round or become blinded for that round, receiving a -4 penalty to their Armor Class and attack rolls and greatly reducing their vision range. Those who make successful Saving Throws can leave the mist without suffering any ill effects, although those remaining in the mist must continue to save each round. A Dispel Magic will remove the blindness on a particular character, but if they remain in the mist, then they are still subject to its effects.~

COPY_EXISTING ~C0SA209.spl~ ~override~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 2
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = C0SA209
	END
SAY NAME1 ~Negative Energy Ray~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj06%~
END
SAY NAME2 ~Negative Energy Ray~
SAY UNIDENTIFIED_DESC ~Negative Energy Ray
(Necromancy – Shadow Weave)

Level: 2
Range: 15 ft.
Duration: 1 turn
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: None

Upon casting this spell, a black ray appears at the caster's fingertips and bursts out towards one target of the caster's choice. That target will be hit by the ray for 3d6 points of magical damage and suffers a -1 penalty to Armor Class, THAC0 and damage for 1 turn. The ray strikes a second time halfway through its duration, dealing the same amount of damage and applying a second instance of penalties. The caster may move while the spell is in effect. There is no saving throw against this spell's effects.~

COPY_EXISTING ~C0SA210.spl~ ~override~
SAY NAME1 ~Sigil of Vulnerability~
SAY NAME2 ~Sigil of Vulnerability~
SAY UNIDENTIFIED_DESC ~Sigil of Vulnerability
(Enchantment/Charm – Shadow Weave)

Level: 2
Range: 30 ft.
Duration: 1 round/level
Casting Time: 1 round
Area of Effect: 1 creature
Saving Throw: Neg.

This spell curses the target creature with mortality. For as long as the curse is in effect, the target loses 1% resistance to physical damage per level of the caster and is unable to be healed by any magical means. A Saving Throw vs. Spells negates the effect.~

ACTION_IF GAME_IS ~bgee~
THEN BEGIN
COPY ~%MOD_FOLDER%/eff/ohbcwou1.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou2.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou3.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou4.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou5.eff~ ~override~
END

COPY_EXISTING ~C0SA211.spl~ ~override~
SAY NAME1 ~Shadow Walk~
SAY NAME2 ~Shadow Walk~
SAY UNIDENTIFIED_DESC ~Shadow Walk
(Alteration – Shadow Weave)

Level: 2
Range: 0
Duration: Instant
Casting Time: 1
Area of Effect: The caster
Saving Throw: None

This spell transports the caster to any place within the visual range of the caster. When the spell is cast, the shadow adept makes a brief planar jaunt into the Plane of Shadow and exits at a different location, making it seem as though <PRO_HESHE> has teleported. The caster is also briefly invisible for the travel duration, cancelling spells targeted at <PRO_HIMHER> unless the spellcaster can see through invisibility.~

COPY_EXISTING ~C0SA212.spl~ ~override~
SAY NAME1 ~Hallucinate~
SAY NAME2 ~Hallucinate~
SAY UNIDENTIFIED_DESC ~Hallucinate
(Illusion/Phantasm – Shadow Weave)

Level: 2
Range: Visual range of the caster
Duration: 1 round/level
Casting Time: 5 
Area of Effect: 1 person or mammal 
Saving Throw: Neg.

The target of this spell must make a Saving Throw vs. Spell or come under its effects. When under the effects of the Hallucinate spell, the victim experiences a disruption of their senses causing them to perceive something that is not actually there, causing them to randomly wander, attack the nearest person, or stand confused.~

COPY_EXISTING ~C0SA213.spl~ ~override~
LPF ALTER_EFFECT
	INT_VAR
		match_opcode = 177
		parameter1 = IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Invisible~)
END
SAY NAME1 ~Shadowfade~
SAY NAME2 ~Shadowfade~
SAY UNIDENTIFIED_DESC ~Shadowfade
(Illusion/Phantasm – Shadow Weave)

Level: 2
Range: Touch 
Duration: Special 
Casting Time: 2 
Area of Effect: 1 creature 
Saving Throw: None 

This spell causes the creature touched to vanish from sight and be undetectable by normal vision or even infravision. Of course, the invisible creature is not magically silenced, and certain other conditions can render the creature detectable. Even allies cannot see the invisible creature or its gear, unless these allies can normally see invisible things or employ magic to do so. Items dropped or put down by the invisible creature become visible; items picked up disappear if tucked into the clothing or pouches worn by the creature. The spell remains in effect until it is magically broken or dispelled, until the recipient attacks any creature, or until 24 hours have passed. The caster cannot perform any actions that manipulate the environment around <PRO_HIMHER>, such as opening doors, disarming a trap, or opening a chest. The caster can, however, cast defensive spells on <PRO_HIMHER>self and fellow party members. And if <PRO_HESHE> attacks, <PRO_HESHE> immediately becomes visible, although the invisibility enables <PRO_HIMHER> to attack first.

Additionally, if the target is either a shadow adept or a native of the Shadow Plane, they are healed for 1d6 hit points (+1d6 per five caster levels).~

COPY_EXISTING ~C0SA213a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Healed~)
END
 
COPY_EXISTING ~C0SA301.spl~ ~override~
SAY NAME1 ~Blackfire Arrow~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj04%~
END
SAY NAME2 ~Blackfire Arrow~
SAY UNIDENTIFIED_DESC ~Blackfire Arrow
(Conjuration/Summoning – Shadow Weave)

Level: 3
Range: 60 ft.
Duration: Instant
Casting Time: 3
Area of Effect: Special
Saving Throw: 1/2

This spell enables the caster to hurl coldfire bolts at multiple opponents within range. Each bolt inflicts 1d6 points of cold damage plus 4d6 points of fire damage. Only half of the fire damage is inflicted if the creature struck saves vs. Spell. The caster receives one bolt every 5 levels beyond the 5th (2 bolts at 10th level, 3 at 15th level, etc.). Each arrow may be targeted individually towards any chosen target.~

COPY_EXISTING ~C0SA302.spl~ ~override~
SAY NAME1 ~Shadowblast~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj05%~
END
SAY NAME2 ~Shadowblast~
SAY UNIDENTIFIED_DESC ~Shadowblast
(Invocation/Evocation – Shadow Weave)

Level: 3
Range: 40 ft.
Duration: Instant
Casting Time: 3
Area of Effect: 30-ft. radius
Saving Throw: 1/2 

The shadow adept launches an unstable mass of shadowstuff which explodes, dealing 1d3 points of cold damage and 1d3 points of magic damage for every level of the caster (to a maximum of 10d6) and penalizes their saving throws and attack rolls by -1 per 10 levels of the caster (-2 at 10th level, -3 at 20th level, etc.) for 1 turn. Creatures who pass their saving throw (-1 penalty per 5 levels) avoid the direct blast taking no magic damage or stat loss.

From 10th level onwards, targets damaged by Shadowblast lose 20% resistance to cold and magic damage for 1 turn.~

COPY_EXISTING ~C0SA303.spl~ ~override~
SAY NAME1 ~Inertia~
SAY NAME2 ~Inertia~
SAY UNIDENTIFIED_DESC ~Inertia
(Alteration – Shadow Weave)

Level: 3
Range: 25 ft.
Duration: 1 turn
Casting Time: 3
Area of Effect: 30-ft. radius
Saving Throw: Neg.

This spell causes creatures to move and attack at half of their normal rates. It negates Haste, but does not otherwise affect magically hasted or slowed creatures. Slowed creatures have an Armor Class and attack penalty of -4. Creatures save at -4 vs. Spell. Targets must also make an initial Save vs. Spells or be slowed to a halt, becoming held for 1 round.~

COPY_EXISTING ~C0SA304.spl~ ~override~
SAY NAME1 ~Lifedrinker Touch~
SAY NAME2 ~Lifedrinker Touch~
SAY UNIDENTIFIED_DESC ~Lifedrinker Touch
(Necromancy – Shadow Weave)

Level: 3
Range: Touch
Duration: Instant 
Casting Time: 3 
Area of Effect: 1 creature
Saving Throw: None 

When this spell is cast, the target loses 1d6 Hit Points for every 2 caster levels, to a maximum drain of 6d6 for a 12th-level caster. In addition, the target transfers 3 points of either Strength, Dexterity or Constitution to the caster. The Hit Points are added to the caster's current Hit Points, with any Hit Points over the caster's normal maximum treated as temporary additional Hit Points. The temporary Hit Points and statistics last for 1 hour.

Note: This spell may not be cast multiple times to radically increase the caster's Hit Points. The caster must wait for the first Lifedrinker Touch spell to run its course before casting another.~
COPY_EXISTING ~C0SA304a.spl~ ~override~

COPY_EXISTING ~C0SA305.spl~ ~override~
SAY NAME1 ~Beguile~
SAY NAME2 ~Beguile~
SAY UNIDENTIFIED_DESC ~Beguile
(Enchantment/Charm – Shadow Weave)

Level: 3
Range: 60 ft.
Duration: 5 rounds
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: Neg. 

This spell works in the exact same manner as Charm Person, with one difference: There is no Saving Throw bonus. Beguile affects any single person it is cast upon. The term person includes any bipedal human, demihuman, or humanoid of man-size or smaller, such as brownies, dryads, dwarves, elves, gnolls, gnomes, goblins, half-elves, halflings, half-orcs, hobgoblins, humans, kobolds, lizard men, nixies, orcs, pixies, sprites, troglodytes, and others. Thus, a 10th-level fighter could be charmed, but an ogre could not. The person is allowed a Saving Throw vs. Spell to negate the effect.

If the spell's recipient fails <PRO_HISHER> Saving Throw, <PRO_HESHE> regards the caster as a trusted friend and ally to be heeded and protected. The caster may give <PRO_HIMHER> orders, and the charmed individual will carry them out as quickly as possible.

If the caster harms - or attempts to harm - the charmed person by some overt action, or if a Dispel Magic spell is cast upon the charmed person, the Beguile spell is broken. If two or more Charms simultaneously affect a creature, the most recent Charm takes precedence. Note that the subject has full memory of the events that took place while <PRO_HESHE> was charmed. Also note that you cannot have a charmed creature leave the area where <PRO_HESHE> is charmed.

The saving throw penalty increases by -1 for every 5 caster levels.~

COPY_EXISTING ~C0SA306.spl~ ~override~
SAY NAME1 ~Shadow Comets~
SAY NAME2 ~Shadow Comets~
SAY UNIDENTIFIED_DESC ~Shadow Comets
(Invocation/Evocation – Shadow Weave)

Level: 3
Range: 0
Duration: Special
Casting Time: 3
Area of Effect: The caster
Saving Throw: None

This spell creates several small globes of shadowy matter, two for each experience level of the shadow adept, which are held in <PRO_HISHER> hands in place of <PRO_HISHER> usual weapons. The meteors can be hurled at targets up to 270 feet away and are treated as missiles with a +5 bonus to the attack rolls. Each meteor bursts into a 1-ft. diameter sphere upon impact, inflicting 1d4+3 points of damage plus an additional 3 points of cold damage to any creature struck. The shadow adept may hurl up to five missiles per round.~

COPY_EXISTING ~c0meteor.itm~ ~override~
SAY NAME1 ~Shadow Comets~
SAY NAME2 ~Shadow Comets~
WRITE_SHORT 0x9C ~%c0scomet%~

COPY_EXISTING ~C0SA307.spl~ ~override~
SAY NAME2 ~Shadow Binding~
SAY UNIDENTIFIED_DESC ~Shadow Binding
(Enchantment/Charm – Shadow Weave)

Level: 3
Range: 35 ft.
Duration: 1 turn
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: Neg. 

This spell holds one creature of any type rigidly immobile and in place for one turn, unless a Saving Throw vs. Spell is made with a -4 penalty. Those who succeed on their Saving Throws are totally unaffected by the spell.

Held creatures cannot move or speak, but they remain aware of events around them and can use abilities not requiring motion or speech. Being held does not prevent the worsening of the subject's condition due to wounds, diseases, or poison.~

COPY_EXISTING ~C0SA308.spl~ ~override~
SAY NAME1 ~Impose~
SAY NAME2 ~Impose~
SAY UNIDENTIFIED_DESC ~Impose
(Invocation/Evocation – Shadow Weave)

Level: 3
Range: 30 ft.
Duration: 1 round
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell launches a blast of invisible force towards a target, dealing 3d6 crushing damage and knocking them away from the caster as well as stunning them for 1 round. There is no saving throw.~

COPY_EXISTING ~C0SA309.spl~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
SAY UNIDENTIFIED_DESC ~Shadow Spear
(Invocation/Evocation – Shadow Weave)

Level: 3
Range: 70 ft.
Duration: Special
Casting Time: 5
Area of Effect: Path of spear
Saving Throw: Neg.

Upon casting this spell, a spear made of shadowstuff forms in the caster's hands, which can be thrown once towards a target of the caster's choosing. The spear may be launched by any target the caster is able to attack, dispelling all of the spell protections of 5th level and lower affecting it. This includes the following spells: Minor Spell Deflection, Minor Globe of Invulnerability, Spell Immunity, and Minor Spell Turning. If no such spells protect the targets, the spear instead deals 5d6 magic damage and inflicts an additional effect dependent on the caster's level.

5th level and below: Reduces targets' Armor Class by two points for five rounds
8th-10th level: Reduces targets' saving throws and THAC0 by 1 point for five rounds
11th-13th level: Halves targets' Dexterity for one turn
14th-16th level: Drains two levels from targets for one turn
17th level and above: Instantly kills targets

The spear is not affected by Magic Resistance. Targets may make a Saving Throw vs. Death (-1 per spear upgrade) to avoid all secondary effects.~

COPY_EXISTING ~c0sa309a.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string\
 parameter1 = RESOLVE_STR_REF (~Spell Protections Removed~)
 END
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY_EXISTING ~c0sa309b.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string\
 parameter1 = RESOLVE_STR_REF (~Spell Protections Removed~)
 END
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY_EXISTING ~c0sa309c.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string\
 parameter1 = RESOLVE_STR_REF (~Spell Protections Removed~)
 END
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY_EXISTING ~c0sa309d.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string\
 parameter1 = RESOLVE_STR_REF (~Spell Protections Removed~)
 END
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY_EXISTING ~c0sa309e.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string\
 parameter1 = RESOLVE_STR_REF (~Spell Protections Removed~)
 END
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY_EXISTING ~C0SA310.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = POISN
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
SAY NAME1 ~Cursed Earth~
SAY NAME2 ~Cursed Earth~
SAY UNIDENTIFIED_DESC ~Cursed Earth
(Conjuration – Shadow Weave)

Level: 3
Range: 90 ft.
Duration: 1 turn
Casting Time: 4
Area of Effect: 30' radius
Saving Throw: Neg.

This spell creates a zone of blackened, poisonous earth within a 30' radius. All creatures standing within the area must make a Saving Throw vs. Death at -4 each round or suffer 2d4 poison damage and have their movement rate halved.~

COPY_EXISTING ~c0sa311.spl~ ~override~
SAY NAME1 ~Expunge Magic~
SAY NAME2 ~Expunge Magic~
SAY UNIDENTIFIED_DESC ~Expunge Magic
(Abjuration – Shadow Weave)

Level: 3
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: 30-ft. radius
Saving Throw: None

A Expunge Magic spell removes magical effects upon anyone within the area. This includes effects given from spells, potions and certain magical items such as wands. It does not, however, affect enchanted magical items or spell protections such as Spell Turning and Spell Deflection. The chance of the dispel succeeding is determined by the effective level of the caster and the level of the magic being dispelled (Expunge Magic is cast as though at 1.5x the caster's actual level). The base chance of successfully dispelling is 50%. For every level that the caster of the Expunge Magic is above the original caster, <PRO_HISHER> chance of success increases by 5%. For every level that the caster of Expunge Magic is below the original caster, <PRO_HISHER> chance of success decreases by 10%. However, despite the difference in levels, there is always at least a 5% chance of success or failure. Thus, if a caster is 10 levels higher than the magic <PRO_HESHE> is trying to dispel, there is only a 5% chance of failure. Similarly if the caster is 4 levels lower than the magic <PRO_HESHE> is trying to dispel, there is only a 10% chance of success. Intuitively, this spell is almost useless if the target is 5 or more levels higher than the caster.

Note: While this spell dispels the individual effects of Grease, Web, Stinking Cloud, and other such spells, it does not dispel the area of effect.~

COPY_EXISTING ~C0SA312.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 16)
END
SAY NAME1 ~Void Edge~
SAY NAME2 ~Void Edge~
SAY UNIDENTIFIED_DESC ~Void Edge
(Invocation/Evocation – Shadow Weave)

Level: 3
Range: Self
Duration: 1 turn
Casting Time: 2
Area of Effect: Self
Saving Throw: None

Upon casting this spell, the shadow adept imbues <PRO_HISHER> next melee attack with shadow magic, providing it with a +5 enchantment bonus and the ability to drain 2 hit points per level as magic damage.~

COPY_EXISTING ~C0SA401.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 15)
END
SAY NAME1 ~Fire Shield (Shadow)~
SAY NAME2 ~Fire Shield (Shadow)~
SAY UNIDENTIFIED_DESC ~Fireshield (Shadow) 
(Invocation/Evocation, Alteration – Shadow Weave)

Level: 4
Range: 0
Duration: 3 rounds + 1 round/level
Casting Time: 4 
Area of Effect: The caster 
Saving Throw: None 

The shadow fireshield protects the user from cold damage by surrounding the caster with a shield of black flame. This shield not only grants the user 50% resistance to cold, but also protects the caster from attacks made within a 5-ft. radius around the caster. An opponent that hits the caster with any weapons or spells within this radius suffers 1d8+2 damage (half cold, half magic) and reduces the attacker's THAC0 by one point for 6 rounds (cumulative).~

COPY_EXISTING ~C0SA402.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 14)
END
SAY NAME1 ~Shadeskin~
SAY NAME2 ~Shadeskin~
SAY UNIDENTIFIED_DESC ~Shadeskin
(Alteration – Shadow Weave)

Level: 4
Range: 0
Duration: 12 hours
Casting Time: 1
Area of Effect: The caster
Saving Throw: None 

When a shadow adept casts this powerful spell upon <PRO_HIMHER>self, an outer skin of shadowstuff will move up from the ground, completely covering <PRO_HIMHER>. This skin is of course magical and will hinder the shadow adept in no way. The effect of this is to protect the shadow adept from physical attacks such as melee weapons and projectiles. For every 2 levels of the caster, an additional skin is gained upon casting. For example, a 10th-level shadow adept would receive 5 skins while a 20th-level shadow adept would receive 10. For each skin the shadow adept possesses, the spell will stop one attack, so a 10th-level shadow adept would be protected from the first 5 attacks made against <PRO_HIMHER>, but the 6th would affect <PRO_HIMHER> normally. The skins will remain on the shadow adept until <PRO_HESHE> is affected by a Dispel Magic, all of the skins are removed due to physical attacks, or the spell duration expires. It is important to note that this will not protect the shadow adept from any magical attacks, such as Fireball.

Additionally, so long as at least one layer of Shadeskin is active, the shadow adept gains 25% resistance to acid, cold, fire, electrical and magic damage.~

COPY_EXISTING ~C0SA402.eff~ ~override~
  WRITE_SHORT 0x20 ~C0SASTONE~
  
COPY_EXISTING ~C0SA402b.spl~ ~override~

COPY_EXISTING ~C0SA403.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 44916
 parameter1 = RESOLVE_STR_REF (~Saving Throws Lowered~)
 END
SAY NAME1 ~Sigil of Misfortune~
SAY NAME2 ~Sigil of Misfortune~
SAY UNIDENTIFIED_DESC ~Sigil of Misfortune
(Enchantment/Charm – Shadow Weave)

Level: 4
Range: 50 ft.
Duration: 2 rounds/level
Casting Time: 4
Area of Effect: 30-ft. radius
Saving Throw: None

The spell allows the caster to adversely affect all the Saving Throws of <PRO_HISHER> enemies. The effect is applied to all hostile creatures within the area of effect. Opponents under the influence of this spell make all Saving Throws and attack rolls at a penalty of -4.

This spell is not affected by Magic Resistance.~

COPY_EXISTING ~C0SA404.spl~ ~override~
SAY NAME1 ~Summon Shadow~
SAY NAME2 ~Summon Shadow~
SAY UNIDENTIFIED_DESC ~Summon Shadow
(Necromancy – Shadow Weave)
Level: 4
Range: Long
Duration: 2 hours
Casting Time: 1 round
Area of Effect: Special
Saving Throw: None

By means of this spell, the caster summons a number of shadows, undead monsters which serve the mage under any conditions. The type and number of creatures that appear depend upon the level of the shadow adept casting the spell.

7th: 3 shadows
9th: 3 shadow fiends
12th+ : 3 wraiths
16th+ : 2 wraiths, 1 devil shade

The undead creatures will remain under the shadow adept's control until they are slain or the spell duration expires.

NOTE: Due to being creatures of the Plane of Shadow, shadows are weakened in natural daylight.~

COPY_EXISTING ~c0devsha.cre~ ~override~
SAY NAME1 ~Devil Shade~
SAY NAME2 ~Devil Shade~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~c0devsha~ #8
  WRITE_ASCII 0x280 ~c0devsha~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0shadsu.cre~ ~override~
SAY NAME1 ~Shadow~
SAY NAME2 ~Shadow~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~~ #8
  WRITE_ASCII 0x280 ~c0shadow~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0shadfi.cre~ ~override~
SAY NAME1 ~Shadow Fiend~
SAY NAME2 ~Shadow Fiend~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~~ #8
  WRITE_ASCII 0x280 ~c0shadfi~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0wraith.cre~ ~override~
SAY NAME1 ~Wraith~
SAY NAME2 ~Wraith~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~~ #8
  WRITE_ASCII 0x280 ~c0wraith~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~C0SA405.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 13)
END
SAY NAME1 ~Shar's Blessing~
SAY NAME2 ~Shar's Blessing~
SAY UNIDENTIFIED_DESC ~Shar's Blessing
(Invocation/Evocation – Shadow Weave)

Level: 4
Range: 0
Duration: 1 round/level
Casting Time: 6
Area of Effect: The caster
Saving Throw: None

Through this spell, the caster draws upon energy from the Plane of Shadow to imbue <PRO_HIMHER>self with the strength and skill of a Fighter of the same level. The shadow adept's Strength score is increased by four points, <PRO_HISHER> THAC0 becomes that of a Fighter of the same level, <PRO_HESHE> gains one extra attack per round and <PRO_HESHE> gains 1 temporary Hit Point per level. This will last for the duration of the spell or until dispelled.

From 14th level onwards, the caster's attacks per round are doubled instead.~

COPY_EXISTING ~C0SA406.spl~ ~override~
SAY NAME1 ~Phantasmal Killer~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj13%~
END
SAY NAME2 ~Phantasmal Killer~
SAY UNIDENTIFIED_DESC ~Phantasmal Killer
(Illusion/Phantasm – Shadow Weave)

Level: 4
Range: Visual range of the caster
Duration: Permanent
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: Special

The caster creates a phantasmal image of the most fearsome creature imaginable to the subject simply by forming the fears of the subject’s subconscious mind into something that its conscious mind can visualize: this most horrible beast. Only the spell’s subject can see the phantasmal killer. The target first gets a Save vs. Spells to recognize the image as unreal. If that save fails, the phantasm touches the subject, and the subject must succeed on a Save vs. Death at +2 or die from fear. Even if the second save is successful, the subject takes 3d6 points of damage.~

COPY_EXISTING ~C0SA408.spl~ ~override~
SAY NAME1 ~Dread Whispers~
SAY NAME2 ~Dread Whispers~
SAY UNIDENTIFIED_DESC ~Dread Whispers
(Illusion/Phantasm – Shadow Weave)

Level: 4
Range: 30 ft.
Duration: 5 rounds
Casting Time: 9
Area of Effect: 30 ft. radius
Saving Throw: None

Dread Whispers causes all enemies within range to become afflicted by an ominous chorus of voices infesting their mind. The voices are distracting, causing 50% spell failure on targets. In addition, at the beginning of every round after the first, the target must make a Save vs. Spell at -6 or lose morale, running in panic for 1 round.~

COPY_EXISTING ~C0SA409.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 12)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  parameter1 = RESOLVE_STR_REF (~One Level Drained~)
    STR_VAR
	  match_resource = 1
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  parameter1 = RESOLVE_STR_REF (~Two Levels Drained~)
    STR_VAR
	  match_resource = 2
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  parameter1 = RESOLVE_STR_REF (~Three Levels Drained~)
    STR_VAR
	  match_resource = 3
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  parameter1 = RESOLVE_STR_REF (~Four Levels Drained~)
    STR_VAR
	  match_resource = 4
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  parameter1 = RESOLVE_STR_REF (~Five Levels Drained~)
    STR_VAR
	  match_resource = 5
  END
SAY NAME1 ~Negative Immunity~
SAY NAME2 ~Negative Immunity~
SAY UNIDENTIFIED_DESC ~Negative Immunity
(Abjuration – Shadow Weave)

Level: 4
Range: Touch
Duration: 1 turn/level
Casting Time: 5
Area of Effect: 1 creature
Saving Throws: None

This spell grants the target immunity to blindness, fear, sleep, confusion and level drain for 1 turn per level of the caster.~

COPY_EXISTING ~C0SA410.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = ACID
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
SAY NAME1 ~Black Ooze~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj14%~
END
SAY NAME2 ~Black Ooze~
SAY UNIDENTIFIED_DESC ~Black Ooze
(Conjuration – Shadow Weave)

Level; 4
Range: Visual range of the caster
Duration: 1 turn
Casting Time: 3
Area of Effect: 1 creature and any enemy within 7.5 ft.
Saving Throw: 1/2

With this spell, the shadow adept conjures a glob of shadowy, vaporous ooze from the Plane of Shadow and drops it on the target, dealing 6d6 acid damage to them and any nearby targets, holding them for 1 round (no save) then slowing them and reducing their magic resistance by 20% for 1 turn. Targets who make a Saving Throw vs. Death at -2 take half damage and avoid the secondary effects.

This spell is unaffected by Magic Resistance, but creatures that are immune to acid are unaffected.~

COPY_EXISTING ~C0SA411.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = FIRE
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
SAY NAME1 ~Wall of Black Flame~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0sawall%~
END
SAY NAME2 ~Wall of Black Flame~
SAY UNIDENTIFIED_DESC ~Wall of Black Flame
(Invocation/Evocation – Shadow Weave)

Level: 4
School: Evocation
Range: Long
Duration: 1 turn
Casting Time: 3
Area of Effect: 10'
Saving Throw: 1/2

With this spell, the shadow adept creates a wall of black fire, dealing 4d6 damage (half fire, half magic) to all creatures who pass through it (Save vs. Spells at -4 for half) and reduces their Armor Class by -4 for one round. Creatures cannot take damage more than once per round.~

COPY_EXISTING ~C0SA412.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 11)
END
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 138
		  insert_point = 1
		  target = 1
		  parameter2 = 10
	END
SAY NAME1 ~Pain Mirror~
SAY NAME2 ~Pain Mirror~
SAY UNIDENTIFIED_DESC ~Pain Mirror
(Necromancy – Shadow Weave)

Level; 4
Range: Visual range of the caster
Duration: 1 turn
Casting Time: 7
Area of Effect: 1 creature
Saving Throw: None

When the caster is struck with an attack, <PRO_HESHE> takes no damage and drains 1d4 hit points per level from the attacker instead. It only works for one attack, and the effects are not cumulative (you cannot have more than one mirror erected). If the spell is not triggered, it lasts for 1 turn.~
COPY_EXISTING ~C0SA412a.spl~ ~override~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 138
		  insert_point = 1
		  target = 1
		  parameter2 = 10
	END
	
COPY_EXISTING ~C0SA413.spl~ ~override~
	LPF ALTER_EFFECT
		INT_VAR
		  match_opcode = 139
		  match_parameter1 = 14773
		  parameter1 = RESOLVE_STR_REF (~Invisible~)
	END
	LPF ALTER_EFFECT
		INT_VAR
		  match_opcode = 139
		  match_parameter1 = 14777
		  parameter1 = RESOLVE_STR_REF (~Non-detected~)
	END
SAY NAME1 ~Greater Shadowfade~
SAY NAME2 ~Greater Shadowfade~
SAY UNIDENTIFIED_DESC ~Greater Shadowfade
(Illusion/Phantasm – Shadow Weave)

Level: 4
Range: Touch
Duration: 3 rounds + 1 round/level
Casting Time: 4
Area of Effect: 1 creature
Saving Throw: None

This spell is similar to Invisibility, but the recipient is able to attack by missile discharge, melee combat, or spellcasting while remaining unseen. However, telltale traces – a shimmering – allow an observant opponent to attack the invisible spell recipient. These traces are only noticeable when specifically looked for (after the invisible character has made <PRO_HISHER> presence known). Attacks against the invisible character suffer a -4 penalty to attack rolls, and the invisible character's Saving Throws are made with a +4 bonus. Additionally, for as long as the caster is at least partially invisible, <PRO_HESHE> is healed for 2d6 hit points per round for the duration.

Note: After making an attack, the caster is no longer completely invisible. Opponents can target the caster. The caster is treated as Non-Detected for the duration.~
	
COPY_EXISTING ~C0SA501.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = COLD
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 0
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 9% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 1
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 10% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 2
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 11% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 3
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 12% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 4
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 13% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 5
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 14% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 6
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 15% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 7
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 16% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 8
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 17% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 9
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 18% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 10
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 19% of maximum hit points in shadow damage^-~)
	END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			header = 11
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 20% of maximum hit points in shadow damage^-~)
	END
SAY NAME1 ~Cone of Bitter Cold~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj07%~
END
SAY NAME2 ~Cone of Bitter Cold~
SAY UNIDENTIFIED_DESC ~Cone of Bitter Cold
(Invocation/Evocation – Shadow Weave)

Level: 5
Range: 0
Duration: Instant
Casting Time: 5
Area of Effect: Special
Saving Throw: 1/2

When this spell is cast, it generates a cone-shaped area of freezing ice originating at the shadow adept's hand and extending outwards of 30 ft. in a 90' cone in front of the caster. It drains heat and causes 1d4 cold damage plus 1% of all targets' maximum hit points in damage per level of the caster. For example, a 10th-level shadow adept would deal 10d4 (Save vs. Spell at -2 for half) plus 10% maximum hit points in cold damage. Targets who fail their saving throw are also slowed and take 1d6 extra cold damage per round for 2 rounds + 1 round per 4 caster levels.~
COPY_EXISTING ~C0SA501a.spl~ ~override~
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			parameter1 = RESOLVE_STR_REF (~Slowed~)
	END

COPY_EXISTING ~C0SA502.spl~ ~override~
SAY NAME1 ~Shadow Assault~
SAY NAME2 ~Shadow Assault~
SAY UNIDENTIFIED_DESC ~Shadow Assault
(Illusion/Phantasm – Shadow Weave)

Level: 5
Range: 0
Duration: 9 rounds + 1 round/level after 9th
Casting Time: 2
Area of Effect: The caster
Saving Throw: None

This spell is similar to Invisibility, but the recipient is able to attack by missile discharge, melee combat, or spellcasting while remaining unseen. However, telltale traces - a shimmering - allow an observant opponent to attack the invisible spell recipient. These traces are only noticeable when specifically looked for (after the invisible character has made <PRO_HISHER> presence known). Attacks against the invisible character suffer a -4 penalty to attack rolls, and the invisible character's Saving Throws are made with a +4 bonus. For the duration of the spell, the shadow adept is also able to backstab with a x2 multiplier, increased to x3 at level 14 and x4 at level 21.

Additionally, the caster's movement rate is doubled, allowing for a quick retreat from battle if necessary.

Note: After making an attack, the shadow adept is no longer completely invisible. Opponents can target the shadow adept.~

COPY_EXISTING ~C0SA503.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 0
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 19%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 1
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 20%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 2
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 21%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 3
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 22%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 4
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 23%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 5
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 24%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 6
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 25%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 7
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 26%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 8
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 27%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 9
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 28%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 10
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 29%~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
      header = 11
 parameter1 = RESOLVE_STR_REF (~Magic Resistance Lowered by 30%~)
  END
SAY NAME1 ~Breaching Dark~
SAY NAME2 ~Breaching Dark~
SAY UNIDENTIFIED_DESC ~Breaching Dark
(Abjuration – Shadow Weave)

Level: 5
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: None

When this spell is cast at a creature, it breaches and dispels all of the specific and combat protections on the target creature. Here is a complete list of all the specific protection spells that are dispelled by Breach: Shield, Protection Circle, Resist Fear, Protection From Fire/Cold, Fireshield, Protection From Acid, Protection From Electricity, Protection From Magic Energy, Protection From The Elements, and Protection From Energy. The combat protection spells dispelled by Breach are Protection From Normal Missiles, Protection From Normal Weapons, Protection From Magical Weapons, Stoneskin, Iron Skins, Armor, Ghost Armor, Spirit Armor, Absolute Immunity, Mantle, and Improved Mantle. The target's Magic Resistance, if any, does not affect this spell. Additionally, this spell also lower's the opponent's magic resistance by 10% + 1% per level of the caster.~

COPY_EXISTING ~C0SA504.spl~ ~override~
SAY NAME1 ~Shadow Blade~
SAY NAME2 ~Shadow Blade~
SAY UNIDENTIFIED_DESC ~Shadow Blade
(Invocation/Evocation – Shadow Weave)

Level: 5
Range: 0
Duration: 2 turns
Casting Time: 5
Area of Effect: Special
Saving Throw: None

This spell creates a translucent, shadow-like, weightless area of shadowstuff extending from the fingers of one of the caster's hands. The silent, blade-shaped construct's cutting edges inflict damage just as those of a real sword do. The Shadow Sword's power increases with the caster's level, upgrading once every 7 caster levels.

Shadow Sword +3:
 - 5% chance to cast Essence Drain on hit
 - 2% chance to cast Shadow Binding on hit
 - Cold Resistance: +50%
 - Wielded as though Specialized in long swords

THAC0: +3
Damage: 1d8+3, 3 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Shadow Sword +4:
 - 5% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 2% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +50%
 - Wielded as though Mastery with long swords

THAC0: +4
Damage: 1d8+4, 4 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Shadow Sword +5:
 - 10% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 5% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +75%
 - Wielded as though High Mastery with long swords

THAC0: +5
Damage: 1d8+5, 5 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Shadow Sword +6:
 - 20% chance to cast Essence Drain on hit
 - 10% chance to cast Shadow Binding on hit
 - 10% chance to cast Nightshade on hit
 - 2% chance to cast Death Mark on hit
 - 1 extra attack per round
 - Cold Resistance: +100%
 - Wielded as though Grand Mastery with long swords

THAC0: +6
Damage: 1d8+6, 6 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed~

COPY ~%MOD_FOLDER%/items/c0sablad.bam~ ~override~
COPY ~%MOD_FOLDER%/Items/C0SASWD1.itm~ ~override/C0SASWD1.itm~
SAY NAME1 ~Shadow Sword +1~
SAY NAME2 ~Shadow Sword +1~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - Cold Resistance: +25%
 - Wielded as though proficient in long swords

THAC0: +1
Damage: 1d8+1, 1 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD2.itm~ ~override/C0SASWD2.itm~
SAY NAME1 ~Shadow Sword +2~
SAY NAME2 ~Shadow Sword +2~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 2% chance to cast Essence Drain on hit
 - Cold Resistance: +25%
 - Wielded as though Proficient in long swords

THAC0: +2
Damage: 1d8+2, 2 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD3.itm~ ~override/C0SASWD3.itm~
SAY NAME1 ~Shadow Sword +3~
SAY NAME2 ~Shadow Sword +3~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 5% chance to cast Essence Drain on hit
 - 2% chance to cast Shadow Binding on hit
 - Cold Resistance: +50%
 - Wielded as though Specialized in long swords

THAC0: +3
Damage: 1d8+3, 3 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD4.itm~ ~override/C0SASWD4.itm~
SAY NAME1 ~Shadow Sword +4~
SAY NAME2 ~Shadow Sword +4~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 5% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 2% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +50%
 - Wielded as though Mastery with long swords

THAC0: +4
Damage: 1d8+4, 4 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD5.itm~ ~override/C0SASWD5.itm~
SAY NAME1 ~Shadow Sword +5~
SAY NAME2 ~Shadow Sword +5~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 10% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 5% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +75%
 - Wielded as though High Mastery with long swords

THAC0: +5
Damage: 1d8+5, 5 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD6.itm~ ~override/C0SASWD6.itm~
SAY NAME1 ~Shadow Sword +6~
SAY NAME2 ~Shadow Sword +6~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 20% chance to cast Essence Drain on hit
 - 10% chance to cast Shadow Binding on hit
 - 10% chance to cast Nightshade on hit
 - 2% chance to cast Death Mark on hit
 - 1 extra attack per round
 - Cold Resistance: +100%
 - Wielded as though Grand Mastery with long swords

THAC0: +6
Damage: 1d8+6, 6 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY_EXISTING ~C0SA505.spl~ ~override~
SAY NAME1 ~Sigil of Madness~
SAY NAME2 ~Sigil of Madness~
SAY UNIDENTIFIED_DESC ~Sigil of Madness
(Enchantment/Charm – Shadow Weave)

Level: 5
Range: 35 ft.
Duration: 5 rounds + 1 round/6 levels
Casting Time: 4
Area of Effect: 30-ft. radius
Saving Throw: Special

The effects of this spell are identical to the 5th-level spell Chaos in all respects, except this spell ignores magic resistance. The victims wander around as if in a daze, sometimes wandering away, sometimes attacking either friend or foe. If the victim is 4th level or lower, <PRO_HESHE> does not receive a Saving Throw vs. the effects. However, if the victim is 5th level or higher, <PRO_HESHE> receives a Save vs. Spell with a -4 penalty. The spell lasts for the duration or until a successful Dispel Magic is cast.~

COPY_EXISTING ~C0SA506.spl~ ~override~
SAY NAME1 ~Shar's Memory Drain~
SAY NAME2 ~Shar's Memory Drain~
SAY UNIDENTIFIED_DESC ~Shar's Memory Drain
(Enchantment – Shadow Weave)

Level: 5
Range: 40 ft.
Duration: 5 rounds
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: None

This powerful spell erases a portion of the target's memory, weakening them. All saving throws are reduced by 2 and arcane casters lose two memorized spells and have their casting time increased by 2. After 5 rounds, the target must make a Save vs. Spells at -4 or suffer the same effects a second time.~

COPY_EXISTING ~C0SA507.spl~ ~override~
SAY NAME1 ~Unmask~
SAY NAME2 ~Unmask~
SAY UNIDENTIFIED_DESC ~Unmask
(Divination – Shadow Weave)

Level: 5
Range: 0
Duration: Instant
Casting Time: 5
Area of Effect: 235-ft. radius
Saving Throw: None

When this spell is cast, an area roughly 30 feet in radius around the caster will be affected. All hostile illusion/phantasm spells in this area will be dispelled and all traps are revealed. This spell only affects one's enemies.

The spells that are affected by this are: Reflected Image, Invisibility, Blur, Mirror Image, Ghost Armor, Invisibility Sphere, Improved Invisibility, Shadow Door, Pixie Dust, Mislead, Project Image, and Mass Invisibility.~

COPY_EXISTING ~C0SA508.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 0
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 9% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 1
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 10% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 2
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 11% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 3
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 12% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 4
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 13% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 5
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 14% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 6
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 15% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 7
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 16% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 8
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 17% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 9
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 18% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 10
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 19% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      header = 11
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 20% of maximum hit points in shadow damage^-~)
  END
SAY NAME1 ~Nightshade~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj22%~
END
SAY NAME2 ~Nightshade~
SAY UNIDENTIFIED_DESC ~Nightshade
(Necromancy – Shadow Weave)

Level: 5
Range: 90 ft.
Duration: Permanent
Casting Time: 4
Area of Effect: 1 creature
Saving Throw: 1/2

When this spell is cast, the target suffers damage equal to 2% of their maximum hit points per level of the caster up to a maximum of 40%. The target may make a Saving Throw vs. Death at -2 to take half damage.~

COPY_EXISTING ~C0SA509.spl~ ~override~
SAY NAME1 ~Shadow Will~
SAY NAME2 ~Shadow Will~
SAY UNIDENTIFIED_DESC ~Shadow Will
(Enchantment/Charm – Shadow Weave)

Level: 5
Range: 40 ft.
Duration: Permanent
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: Neg.

Shadow Will causes the subject's intellect to degenerate into that of a simple beast of burden unless a Saving Throw vs. Spell is made with a -4 penalty. Upon a failed Saving Throw, the subject remains in this state until a successful Dispel Magic is cast upon <PRO_HIMHER>. Additionally, if the spell succeeds, the caster receives a portion of the target's mental capacity, gaining a non-cumulative +2 bonus to Intelligence and Wisdom for two turns.~

COPY_EXISTING ~C0SA509A.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Temporary Intelligence and Wisdom Bonus~)
  END

COPY_EXISTING ~C0SA510.spl~ ~override~
SAY NAME1 ~Void Blast~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj24%~
END
SAY NAME2 ~Void Blast~
SAY UNIDENTIFIED_DESC ~Void Blast
(Invocation/Evocation – Shadow Weave)

Level: 5
Range: 90 ft.
Duration: 1d4 rounds
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: Neg.

With this spell, the shadow adept launches a bolt of energy at a targeted creature. The target takes 2d6 magical damage, and if it fails a Save vs. Spells at -2, is banished to a pocket realm for 1d4 rounds and upon returning takes another 2d6 magical damage and is stunned for 2 rounds. Summoned creatures struck by the blast are permanently banished with no saving throw.~

COPY_EXISTING ~C0SA510A.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END

COPY_EXISTING ~C0SA510B.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END

COPY_EXISTING ~C0SA510C.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END

COPY_EXISTING ~C0SA510D.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END
  
COPY_EXISTING ~C0SA511.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Protected by Shadow Screen~)
  END
SAY NAME1 ~Shadow Screen~
SAY NAME2 ~Shadow Screen~
SAY UNIDENTIFIED_DESC ~Shadow Screen
(Abjuration – Shadow Weave)

Level: 5
Range: 0
Duration: 2 hours
Casting Time: 8
Area of Effect: The caster
Saving Throw: None

When this spell is cast, the shadow adept is protected from the next magical attack against <PRO_HIMHER>. The spells from which the shadow adept is protected are Dispel/Remove Magic, Spell Thrust, Secret Word, Breach, Lower Resistance, Pierce Magic, Ruby Ray, Khelben's Warding Whip, Pierce Shield, and Spellstrike. If one of these spells is cast at the shadow adept, this spell activates and absorbs the attack. However, this only works once and this spell is consumed in the process. Otherwise, it will last for its duration.~

COPY_EXISTING ~C0SA512.spl~ ~override~
SAY NAME1 ~Summon Nighthaunt~
SAY NAME2 ~Summon Nighthaunt~
SAY UNIDENTIFIED_DESC ~Summon Nighthaunt
(Conjuration/Summoning)

Level: 5
Range: 45 ft.
Duration: 1 turn + 1 round/level
Casting Time: 8
Area of Effect: Special
Saving Throw: None

This spell conjures forth a nighthaunt, an undead monster from the Shadow Plane. Nighthaunts are deadly creatures that emit an aura of desecration, reducing the THAC0 and damage of all nearby living creatures by two points while increasing THAC0 and damage of all undead creatures by two points. Its natural weapon is capable of draining two levels on hit and strikes as a +4 weapon. However, nighthaunts are greatly weakened in natural daylight. From 14th level onwards, two nighthaunts are summoned instead.

The nighthaunt is fully under the control of the caster for the duration of the spell and will follow all of <PRO_HISHER> orders until the duration has expired.~

COPY_EXISTING ~c0nighth.cre~ ~override~
SAY NAME1 ~Nighthaunt~
SAY NAME2 ~Nighthaunt~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~c0nighth~ #8
  WRITE_ASCII 0x280 ~c0nighth~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))
  
COPY_EXISTING ~c0nvamp1.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string\
 parameter1 = RESOLVE_STR_REF (~Two Levels Drained~)
 END

COPY_EXISTING ~C0SA601.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 10)
END
SAY NAME1 ~Shar's Shield~
SAY NAME2 ~Shar's Shield~
SAY UNIDENTIFIED_DESC ~Shar's Shield
(Abjuration – Shadow Weave)

Level: 6
Range: 0
Duration: 1 round/level
Casting Time: 6
Area of Effect: 5-ft. radius sphere
Saving Throw: None

This spell creates an immobile, faintly shimmering magical sphere around the caster that prevents any 1st-, 2nd-, 3rd-, or 4th-level spell effects from penetrating (i.e., the area of effect of any such spells does not include the area of the Globe of Invulnerability). This includes innate abilities and effects from devices. However, any type of spell can be cast out of the magical sphere, and these pass from the caster of the globe to their subject without affecting the globe. 5th- and higher level spells are not affected by the globe, and magical attacks of 5th-level or higher, such as Spellstrike and Pierce Magic, can bring it down.

Additionally, the shadow adept gains 20% magic resistance as long as the globe is up.~

COPY_EXISTING ~C0SA602.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 60481
 parameter1 = RESOLVE_STR_REF (~Misled~)
 END
SAY NAME1 ~Twin Mislead~
SAY NAME2 ~Twin Mislead~
SAY UNIDENTIFIED_DESC ~Twin Mislead
(Illusion/Phantasm – Shadow Weave)

Level: 6
Range: 0
Duration: 1 round/level
Casting Time: 1
Area of Effect: Special
Saving Throw: None

When this spell is cast, the shadow adept is affected by an Improved Invisibility spell and is teleported a few feet away from <PRO_HISHER> original position. Meanwhile, an exact image of the caster is created where <PRO_HESHE> used to be, with exactly the same Hit Points as the caster. The image cannot perform any actions at all, such as attacking or casting spells. It can, however, move around and act as a decoy for the invisible shadow adept. The image will remain under control of the caster until reduced to 0 Hit Points, or until affected by a Dispel Magic or a spell that reveals illusions, such as True Sight.

After 3 rounds have passed, a second decoy is spontaneously created, regardless of whether or not the first has been destroyed.~

COPY_EXISTING ~C0SA602a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 60481
 parameter1 = RESOLVE_STR_REF (~Misled~)
 END

COPY_EXISTING ~C0SA603.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 7609
 parameter1 = RESOLVE_STR_REF (~Protected from Magical Weapons~)
 END
SAY NAME1 ~Protection from Weave-forged Weapons~
SAY NAME2 ~Protection from Weave-forged Weapons~
SAY UNIDENTIFIED_DESC ~Protection From Weave-forged Weapons
(Abjuration – Shadow Weave)

Level: 6
Range: 0
Duration: 4 rounds
Casting Time: 1
Area of Effect: The caster
Saving Throw: None 

When the spell is cast, it confers complete invulnerability to all magical weapons created using Weave magic. This includes weapons that are blessed or enchanted. The attacks of powerful monsters are also considered magical weapons. This spell cannot be cast on anyone who is protected from normal weapons as well as anyone protected by Mantle, Improved Mantle, or Absolute Immunity. Due to the nature of this spell, with the short casting time and duration, it is mainly used to buy the shadow adept a few rounds in the thick of combat. This effect lasts for the duration of the spell or until dispelled.~

COPY_EXISTING ~C0SA604.spl~ ~override~
SAY NAME1 ~Power Word: Silence~
SAY NAME2 ~Power Word: Silence~
SAY UNIDENTIFIED_DESC ~Power Word, Silence
(Conjuration/Summoning – Shadow Weave)

Level: 6
Range: 90 ft.
Duration: 7 rounds
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

In using this spell, the shadow adept points at an individual and utters the Power Word. For the next 7 rounds, that creature cannot make any sound. This silence completely foils any spells that require verbal components. The only ways to counter this spell are either a Dispel Magic or a Vocalize spell. There is no Saving Throw and the spell ignores magic resistance.~

COPY_EXISTING ~C0SA605.spl~ ~override~
SAY NAME1 ~Black Lightning~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj08%~
END
SAY NAME2 ~Black Lightning~
SAY UNIDENTIFIED_DESC ~Black Lightning 
(Invocation/Evocation – Shadow Weave)

Level: 6
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: Special 
Saving Throw: 1/2 

When the shadow adept casts Black Lightning, arcs of electrical energy burst from <PRO_HISHER> fingertips. These brilliant arcs of lightning leap at all enemies near the caster, burning them with electrical and fire damage. The lightning causes 1d6 points of damage for every 2 levels of the caster and causes targets to go berserk for 3 rounds. If the target of the lightning saves vs. Spell, they avoid berserking and only half damage is inflicted. Thus, a 12th-level shadow adept will cause 6d6 (half electrical, half fire) damage to a victim (3d6 electrical if the victim makes <PRO_HISHER> Saving Throw vs. Spell).~

COPY_EXISTING ~C0SA606.spl~ ~override~
SAY NAME1 ~Shatter Weave~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj17%~
END
SAY NAME2 ~Shatter Weave~
SAY UNIDENTIFIED_DESC ~Shatter Weave
(Invocation/Evocation – Shadow Weave)

Level: 6
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: 1/2 

When this spell is cast upon a target creature there will be two major effects. The first is that it will dispel one spell protection of 8th level or lower from the creature. This will always dispel the highest level of spell protection on the target first. If the target has two or more protections tied for the highest level, the choice will be random. The second effect of the spell is that the creature's magic resistance is temporary nullified. The resistance remains lowered for 2 rounds, and this effect cannot be negated in any way. Additionally, mages will take 10d4 magic damage and suffer from a 50% chance of spell failure for 2 rounds. Spells affected by Pierce Magic are Minor Spell Deflection, Minor Spell Turning, Spell Deflection, Spell Turning, Minor Globe of Invulnerability, Spell Immunity, and Globe of Invulnerability. The target's magic resistance, if any, does not affect this spell.~

COPY_EXISTING ~C0SA607.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 9)
END
SAY NAME1 ~Umbral Blades~
SAY NAME2 ~Umbral Blades~
SAY UNIDENTIFIED_DESC ~Umbral Blades
(Invocation/Evocation – Shadow Weave)

Level: 6 
Range: Self
Duration: 1 turn
Casting Time: 9
Area of Effect: Special
Saving Throw: Special

The shadow adept employs this spell to set up a ring of circling, razor sharp blades. These whirl and flash around the caster, providing a bonus of 4 Armor Class against melee weapons and dealing damage to enemies in range every round. Any creature attempting to pass through the blades will suffer 6d8 points of damage and lose 1 point of Strength for 1 turn. Creatures within the area of the barrier when it is invoked are entitled to a Saving Throw vs. Spell to negate the damage. The barrier remains for 1 turn.~

COPY_EXISTING ~C0SA608.spl~ ~override~
SAY NAME1 ~Disintegrate~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj19%~
END
SAY NAME2 ~Disintegrate~
SAY UNIDENTIFIED_DESC ~Disintegrate
(Alteration – Shadow Weave)

Level: 6
Range: Visual range of the caster
Duration: Instant
Casting Time: 6
Area of Effect: 1 creature
Saving Throw: Neg.

When this spell is cast at another creature, a thin purple ray is shot out. Upon contact with the ray, the creature must make a Saving Throw vs. Spell at -2 or be transformed into dust. This transformation is instantaneous and irreversible. There is also a good chance that this will destroy some if not all of the items that the creature is carrying. If the target survives the process, they still take 6d6 magic damage.

Targets slain by this spell will be raised as a wraith under the caster's allegiance for 5 turns.~

COPY_EXISTING ~C0SA609.spl~ ~override~
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 20% of maximum hit points in shadow damage^-~)
	END
SAY NAME1 ~Black Rose~
SAY NAME2 ~Black Rose~
SAY UNIDENTIFIED_DESC ~Black Rose
(Conjuration/Summoning – Shadow Weave)

Level: 6
Range: Visual range of the caster
Duration: 1 turn
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: 1/2

This spell conjures a thorned, magical rose that wraps itself around the caster's chosen target, dealing 6d6 piercing damage. If the target fails a Saving Throw vs. Spells at -6, they lose an additional 20% of their maximum hit points and become entangled for 1 turn, receiving a -2 penalty to Armor Class, THAC0 and casting time. Additionally, the target must make another Save vs. Spells every round or suffer an additional 2d6 piercing damage until the rose vanishes.~

COPY_EXISTING ~C0SA610.spl~ ~override~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 2
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = C0SA610
	END
SAY NAME1 ~Disintegrate~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0negeb%~
END
SAY NAME1 ~Negative Energy Burst~
SAY NAME2 ~Negative Energy Burst~
SAY UNIDENTIFIED_DESC ~Negative Energy Burst
(Necromancy – Shadow Weave)

Level: 6
Range: 30 ft.
Duration: 1 turn
Casting Time: 6
Area of Effect: 20 ft. radius
Saving Throw: None

Upon casting this spell, a burst of negative energy engulfs the area targeted by the caster. All enemies within the radius take 6d6 magical damage and suffer a -3 penalty to Armor Class, THAC0 and damage for 1 turn. There is no saving throw against this spell's effects.~

COPY_EXISTING ~C0SA611.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 326
	  parameter2 = %C0SA611%
END
SAY NAME1 ~Devour Dream~
SAY NAME2 ~Devour Dream~
SAY UNIDENTIFIED_DESC ~Devour Dream
(Enchantment/Charm – Shadow Weave)

Level: 6
Range: Touch
Duration: Instant
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

This spell may only affect sleeping targets. Upon casting the spell, the shadow adept consumes the target's thoughts, dealing 10d8 magical damage and restoring up to five of the caster's previously cast spells. The target is always woken up after the effects of this spell.

Devour Dream cannot recall 6th-level or greater spells.~

COPY_EXISTING ~C0SA701.spl~ ~override~
SAY NAME1 ~Black Ray of Destruction~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj17%~
END
SAY NAME2 ~Black Ray of Destruction~
SAY UNIDENTIFIED_DESC ~Black Ray of Destruction
(Alteration – Shadow Weave)

Level: 7
Range: 40 ft.
Duration: Instant
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

When this spell is cast, it dispels one spell protection of any level affecting the target creature. The spells affected by the Black Ray of Destruction are Minor Spell Turning, Minor Globe of Invulnerability, Spell Immunity, Globe Of Invulnerability, Minor Spell Deflection, Spell Turning, Spell Shield, Spell Deflection, and Spell Trap. This will always remove the highest-level spell protection affecting the target; if more than one same-level protection is active on the target simultaneously, one of them will be randomly chosen and dispelled. Additionally, this spell creates a small dead magic zone around the target, preventing the target from casting spells for 2 rounds. The target's Magic Resistance, if any, does not affect this spell.~

COPY_EXISTING ~C0SA702.spl~ ~override~
SAY NAME1 ~Shadowspray~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj09%~
END
SAY NAME2 ~Shadowspray~
SAY UNIDENTIFIED_DESC ~Shadowspray
(Conjuration/Summoning – Shadow Weave)

Level: 7
Range: 60 ft.
Duration: Instant
Casting Time: 4
Area of Effect: 70-ft.-long cone 
Saving Throw: Special

When casting this spell, the shadow adept unleashes a wave of shadow fire from <PRO_HISHER> hand. Any creature with fewer than 8 Hit Dice struck by a wave is blinded for 5 rounds, regardless of any other effect. Additionally, the fire is chaotic in nature, and may cause random effects as per the Prismatic Spray spell:

  - Inflicts 20 points of damage; Save vs. Spell for half.
  - Inflicts 40 points of damage; Save vs. Spell for half.
  - Inflicts 80 points of damage; Save vs. Spell for half.
  - Save vs. Poison or die; survivors take 20 points of poison damage.
  - Save vs. Petrification or be turned to stone.
  - Save vs. Wand or be feebleminded.
  - Save vs. Spell or be disintegrated.~
  
COPY_EXISTING ~C0SA703.spl~ ~override~
SAY NAME1 ~Power Word: Stun~
SAY NAME2 ~Power Word: Stun~
SAY UNIDENTIFIED_DESC ~Power Word, Stun
(Conjuration/Summoning – Shadow Weave)

Level: 7
Range: Visual range of the caster 
Duration: Special
Casting Time: 1 
Area of Effect: 1 creature 
Saving Throw: None

When a Power Word, Stun spell is uttered, any creature of the Mage's choice within visual range is stunned for the duration depending on its current Hit Points: 
 1 to 29 Hit Points: Stunned for 4d4 rounds; 
 30 to 59 Hit Points: Stunned for 2d4 rounds; 
 60 to 89 Hit Points: Stunned for 1d4 rounds; 
 90 or more Hit Points: unaffected.
Note that if a creature is weakened so that its Hit Points are below its usual maximum, the current number of Hit Points is used to determine this spell's effects. This spell ignores magic resistance.~

COPY_EXISTING ~c0morsw.cre~ ~override~
SAY NAME1 ~Magical Sword~
SAY NAME2 ~Magical Sword~
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~C0SA704.spl~ ~override~
SAY NAME1 ~Sword of the Night~
SAY NAME2 ~Sword of the Night~
SAY UNIDENTIFIED_DESC ~Sword of the Night
(Invocation/Evocation – Shadow Weave)

Level: 7
Range: 0
Duration: 1 round/level
Casting Time: 7
Area of Effect: Special
Saving Throw: None

Upon casting this spell, the shadow adept brings into being a shimmering, sword-like plane of force that leaps into <PRO_HISHER> hands. The sword acts as a +4 weapon in all respects and deals 3d4 points of slashing damage and 2d4 cold damage upon hitting a target. Once the spell is cast, the sword will float in the air completely under the caster's control. This does not prevent the caster from doing any other actions during the spell's duration.~

COPY_EXISTING ~C0SA705.spl~ ~override~
SAY NAME1 ~Shadowplague~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj10%~
END
SAY NAME2 ~Shadowplague~
SAY UNIDENTIFIED_DESC ~Shadowplague
(Conjuration/Summoning – Shadow Weave)
Level: 7
Range: Long
Duration: 6 rounds
Casting Time: 1 round
Area of Effect: Target, and enemies within 30'
Saving Throw: Special

When the caster utters the spell, he calls forth a swarm of venomous biting and stinging shadow creatures to plague the target. This carpet-like mass swarms over a large area, spreading to all creatures within 30 feet of the target. Invisibility is no protection.

For the duration of the spell, those affected fight with a -2 penalty to attack rolls and armor class. In addition, each round, the victims suffer 2d6 points of damage from bites, have a 100% chance of spell failure, and must make saving throws vs. Death at -2 or run away in fear. If a successful Save vs. breath at -6 is made, the target manages to avoid most of the swarm, reducing damage from bites by half and completely negating the spell failure penalty.

This spell is not affected by Magic Resistance.~

COPY_EXISTING ~C0SA707.spl~ ~override~
SAY NAME1 ~Vengeful Shade~
SAY NAME2 ~Vengeful Shade~
SAY UNIDENTIFIED_DESC ~Vengeful Shade
(Necromancy – Shadow Weave)

Level: 7
Range: Touch
Duration: 1 turn
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: None

This powerful and dangerous spell has the power to temporarily revive dead allies. For 1 turn, the target ally is resurrected with full hit points and dramatically increased power - the resurrected ally is hasted for the duration, Strength and Dexterity are set to 25, base AC is set to -6 and target gains immunity to all mind-affecting spells. The target deals maximum damage for the duration of the spell and their casting speed is increased by 4. However, this spell does not truly resurrect the target - once the spell has expired, the target dies again, regardless of their current hit points.~

COPY_EXISTING ~c0sa707a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 8)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 1
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 5 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 2
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 4 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 3
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 3 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 4
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 2 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 5
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 1 round~)
  END

COPY_EXISTING ~C0SA708.spl~ ~override~
SAY NAME1 ~Nightmare~
SAY NAME2 ~Nightmare~
SAY UNIDENTIFIED_DESC ~Nightmare
(Enchantment/Charm – Shadow Weave)

Level: 7
Range: Visual range of the caster
Duration: 5 rounds
Casting Time: 1 
Area of Effect: 1 creature
Saving Throw: Neg.

Nightmare is both a deadly weapon and a horrific torture device. When the shadow adept casts this spell, <PRO_HESHE> causes one creature to fall into a deep sleep and become tormented with terrible nightmares. For each round that the target remains asleep, they must make a Save vs. Spell at -4 to wake up from the nightmare. If the save is failed, they must make a Save vs. Death at -2 or lose 10% of their hit points. Once 5 rounds have passed, the victim awakens from their nightmare without needing a save.~

COPY_EXISTING ~c0sa709.spl~ ~override~
SAY NAME1 ~Possess~
SAY NAME2 ~Possess~
SAY UNIDENTIFIED_DESC ~Possess
(Enchantment/Charm – Shadow Weave)

Level: 7
Range: Visual range of the caster
Duration: 10 turns
Casting Time: 1 round
Area of Effect: 1 creature
Saving Throw: Neg.

When the shadow adept casts Possess, <PRO_HESHE> attempts to forcibly take control of one creature within <PRO_HISHER> visual range. The target must make as Saving Throw vs. Spells at -7 or become directly controlled by the caster. The shadow adept loses control of <PRO_HISHER> body but may see through the eyes of <PRO_HISHER> target and use spells and abilities available to them. Additionally, the possessed target's Strength, Dexterity and Constitution are increased to 25 while they are possessed. Possess may not be dispelled and the target only regains control over their own body once the duration has ended or if the caster chooses to relinquish control of <PRO_HISHER> own volition.

Once the duration expires, the vertigo and shock of suddenly regaining control causes the target to suffer 5d10 non-lethal damage and fall unconscious for 5 rounds (no save).~

COPY_EXISTING ~c0sa709a.spl~ ~override~
SAY NAME1 ~End Possession~
SAY NAME2 ~End Possession~
SAY UNIDENTIFIED_DESC ~End Possession

Use this ability to end Possession. The possessed target will suffer 5d10 non-lethal damage and fall unconscious for 5 rounds.~

COPY_EXISTING ~c0sa709b.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 7)
END
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			parameter1 = RESOLVE_STR_REF (~Possessed~)
	END

COPY_EXISTING ~C0SA710.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = MAGIC
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
SAY NAME1 ~Malefic Bomb~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj20%~
END
SAY NAME2 ~Malefic Bomb~
SAY UNIDENTIFIED_DESC ~Malefic Bomb
(Invocation/Evocation – Shadow Weave)

Level: 7
Range: 50 ft.
Duration: Permanent
Casting Time: 6
Area of Effect: 10 ft. radius
Saving Throw: 1/2

The shadow adept launches a mass of volatile shadowstuff towards a target location, dealing 8d6 magic damage in a 20 ft. radius (Save vs. Death at -2 for half). All enemies that fail the save will, after 1 round, spontaneously explode with another Malefic Bomb dealing 4d6 damage in a 20 ft. radius (Save vs. Death for half), afflicting all enemies that fail the save with another Malefic Bomb dealing 2d6 damage in a 20 ft. radius.~

COPY_EXISTING ~C0SA710a.spl~ ~override~
COPY_EXISTING ~C0SA710b.spl~ ~override~

COPY_EXISTING ~C0SA711.spl~ ~override~
SAY NAME1 ~Shadow Gate~
SAY NAME2 ~Shadow Gate~
SAY UNIDENTIFIED_DESC ~Shadow Gate
(Conjuration – Shadow Weave)

Level: 7
Range: Visual range of the caster
Duration: 8 rounds
Casting Time: 1 round
Area of Effect: Special
Saving Throw: None

This spell conjures a one-way portal linked to the Plane of Shadow at the caster's targeted location for 8 rounds. For each round that the portal is active, a creature of the Plane of Shadow has a chance of emerging. These creatures are allied with the caster. There is a 40% chance of spawning a Shadow Fiend, a 40% chance of spawning a Wraith, a 10% chance of spawning a Devil Shade and a 5% chance of spawning a Nightwalker each turn. The Shadow Gate may be targeted and destroyed by enemies, though it is immune to elemental damage as well as weapons of +1 enchantment and below.

Creatures summoned by this spell remain for 1 turn.~

COPY_EXISTING ~c0sa711.cre~ ~override~
SAY NAME1 ~Shadow Gate~
SAY NAME2 ~Shadow Gate~
WRITE_ASCII 0x248 ~c0sa711~ #8
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0sa712.spl~ ~override~
SAY NAME1 ~Nightfall~
SAY UNIDENTIFIED_DESC ~Nightfall
(Invocation/Evocation – Shadow Weave) 

Level: 7
Range: Self
Duration: 6 rounds
Casting Time: 8
Area of Effect: 50-ft. radius
Saving Throw: None

This spell creates a rainfall of shadowstuff centered on the caster for six rounds. Enemy creatures suffer 1d6 magical damage for every round that they remain within the rainfall and suffer a cumulative penalty of -1 to Armor Class and all Saving Throws for one turn. Non-hostile creatures are healed for 2d6 hit points every round instead.~

COPY_EXISTING ~c0sa712a.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0sarain%~
END
COPY_EXISTING ~c0sa712b.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0sarain%~
END

COPY_EXISTING ~c0sa713.spl~ ~override~
SAY NAME1 ~Dark Renewal~
SAY UNIDENTIFIED_DESC ~Dark Renewal
(Necromancy – Shadow Weave) 

Level: 7
Sphere: Healing 
Range: Touch
Duration: Permanent
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: None

This powerful spell calls upon the energies of the Shadow Weave to wipe away disease and injury in the creature who receives the benefits of the spell. It completely cures all disease and blindness in the recipient and heals all points of damage suffered due to wounds or injury. It also dispels a Feeblemind spell and cures those mental disorders caused by spells or injury to the brain. Naturally, the effects can be negated by later wounds, injuries, and diseases.

Additionally, if this spell is cast upon a dead party member, it will restore them to life, but the caster is permanently drained of four levels which may only be recovered via a Restoration spell.~

COPY_EXISTING ~c0sa714.spl~ ~override~
SAY NAME1 ~Death Touch~
SAY UNIDENTIFIED_DESC ~Death Touch
(Necromancy)

Level: 7
Range: Touch
Duration: Permanent
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: Neg.

After casting this spell, the shadow adept touches the target creature with a> hand charged with necrotic energy. If the target fails a Save vs. Death at -4, the touch will reduce them to 1 Hit Point. The amount of damage dealt by this spell is added to the caster's Hit Points, but will not heal <PRO_HIMHER> past <PRO_HISHER> maximum.~

COPY_EXISTING ~C0SA801.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = MAGIC
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 1
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 10% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 2
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 11% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 3
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 12% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 4
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 13% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 5
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 14% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 6
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 15% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 7
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 16% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 8
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 17% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 9
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 18% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 10
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 19% of maximum hit points in shadow damage^-~)
END
  LPF ADD_SPELL_EFFECT
    INT_VAR
	  insert_point = 3
      opcode = 139
	  target = 2
	  timing = 1
	  power = 8
	  header = 11
	  resist_dispel = 1
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 20% of maximum hit points in shadow damage^-~)
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 139
	  match_savingthrow = 1
	  parameter1 = RESOLVE_STR_REF (~One Level Drained~)
END
SAY NAME1 ~Negastorm~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj11%~
END
SAY NAME2 ~Negastorm~
SAY UNIDENTIFIED_DESC ~Negastorm
(Necromancy – Shadow Weave) 

Level: 8
Range: Visual range of the caster 
Duration: 2 rounds
Casting Time: 8
Area of Effect: 30-ft. radius
Saving Throw: 1/2

This spell summons a shower of negative energy upon a targeted location, inflicting 1d4 cold damage per level plus 20% of their maximum hit points in damage (+2% per caster level after 16th level) over two rounds as well as draining one level and one point of strength for each instance of damage dealt. Affected creatures are allowed a Saving Throw vs. Spell to avoid the cold damage and loss of levels (but not strength). Effects last for 1 turn.

The negastorm lasts for 2 rounds and does not affect allies. If an enemy enters the negastorm after the first round, they only suffer half of the effects.~

COPY_EXISTING ~C0SA802.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 6)
END
SAY NAME1 ~Annulment~
SAY NAME2 ~Annulment~
SAY UNIDENTIFIED_DESC ~Annulment
(Abjuration – Shadow Weave)

Level: 8
Range: Touch
Duration: 1 round/level
Casting Time: 8
Area of Effect: 1 creature
Saving Throw: None

When the spell is cast, it confers 75% immunity against all energy attacks - such as fire, cold, acid, magic, and electricity, whether from magical or non-magical sources - such as spells, weapons, wands, breath weapons, etc. The target also becomes immune to all spells of 6th level and below, both beneficial and harmful, cast by others. This excludes any physical attacks and spell-created weapons, such as Enchanted Weapon and Spiritual Hammer. In other words, any physical damage, such as piercing, crushing, or slashing will get through. This effect lasts for the duration of the spell or until dispelled.~

COPY_EXISTING ~c0sa803.spl~ ~override~
SAY NAME1 ~Shadow Prison~
SAY NAME2 ~Shadow Prison~
SAY UNIDENTIFIED_DESC ~Shadow Prison
(Conjuration/Summoning – Shadow Weave)

Level: 8
Range: Touch 
Duration: Special
Casting Time: 3
Area of Effect: 1 creature 
Saving Throw: None

An extradimensional space is brought into being upon utterance of a Shadow Prison spell. The subject and all enemies within a 10 ft radius vanish into the shifting labyrinth in the Shadow Plane for a period of time that is totally dependent upon its Intelligence.

Intelligence of Target    -    Time trapped in maze
         under 3                -            2d4 turns
         3 to 5                   -            1d4 turns
         6 to 8                   -            5d4 rounds
         9 to 11                 -            4d4 rounds
         12 to 14               -            3d4 rounds
         15 to 17               -            2d4 rounds
         18 and up            -           1d4 rounds

Note that if the 9th-level spell Freedom is cast in the area where a creature is mazed, it will effectively bring <PRO_HIMHER> back to this plane, ending the spell prematurely. Note that a mazed creature is not freed through Dispel Magic.~

COPY_EXISTING ~c0sa804.spl~ ~override~
SAY NAME1 ~Power Word: Blind~
SAY NAME2 ~Power Word: Blind~
SAY UNIDENTIFIED_DESC ~Power Word, Blind
(Conjuration/Summoning – Shadow Weave)

Level: 8
Range: Visual range of the caster
Duration: 6 rounds
Casting Time: 1
Area of Effect: 10-ft. radius
Saving Throw: None

When a Power Word, Blind spell is cast, one or more creatures within the area of effect become sightless. The spellcaster selects one creature as the target center, and the effect spreads outward from the center, affecting all within a 10-ft. radius. This lasts for 6 rounds or until dispelled. All of the effects of blindness apply to the victims, such as a penalty to hit and to AC. The visibility range of the afflicted character is also decreased. This spell is not effected by magic resistance.~

COPY_EXISTING ~c0sa805.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 5)
END
SAY NAME1 ~Shadow Shield~
SAY NAME2 ~Shadow Shield~
SAY UNIDENTIFIED_DESC ~Shadow Shield
(Abjuration – Shadow Weave)

Level: 8
Range: 0
Duration: 2 turns
Casting Time: 8
Area of Effect: The caster
Saving Throw: None

This spell shrouds the shadow adept in a cloak of shadow that protects <PRO_HIMHER> with the following effects: +5 bonus to AC, immunity to magic damage, 20% magic and physical resistance. This spell, unlike other Shadow Weave spells, does not drain the caster's life force and will in fact temporarily protect the shadow adept from loss of Constitution while it is active.~

COPY_EXISTING ~c0sa806.spl~ ~override~
SAY NAME1 ~Blackfire Fury~
SAY NAME2 ~Blackfire Fury~
SAY UNIDENTIFIED_DESC ~Blackfire Fury
(Invocation/Evocation – Shadow Weave)

Level: 8
Range: 0
Duration: 1 turn
Casting Time: 8
Area of Effect: The caster
Saving Throw: 1/2

The shadow adept conjures a rift from the Shadow Plane beneath the target's feet, which unleashes black fire after a short delay dealing 10d10 fire damage (Save vs. Spells for half damage). This damage is not mitigated by fire resistance and ignores magic resistance.

If the target is slain by this spell, it is burned to ash completely and its remaining consciousness becomes a devil shade under the caster's allegiance for one turn before becoming assimilated into the Shadow Plane.~

COPY_EXISTING ~c0sa813.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj25%~
END
SAY NAME1 ~Blackfire Ruin~
SAY NAME2 ~Blackfire Ruin~
SAY UNIDENTIFIED_DESC ~Blackfire Ruin
(Invocation/Evocation – Shadow Weave)

Level: 8
Range: 0
Duration: 1 turn
Casting Time: 8
Area of Effect: 20-ft. radius
Saving Throw: 1/2

This powerful spell is the upgraded version of Blackfire Fury. The shadow adept conjures a rift from the Shadow Plane beneath their own feet, which unleashes shadow fire in a 20' radius centered on them dealing 10d10 fire damage (Save vs. Spells at -4 for half damage) to all enemies within range. This damage is not mitigated by fire resistance and ignores magic resistance.

If a creature is slain by this spell, it is burned to ash completely and its remaining consciousness becomes a Blackfire Vessel under the caster's allegiance for one turn before becoming assimilated into the Shadow Plane.~

COPY_EXISTING ~c0blackf.cre~ ~override~
SAY NAME1 ~Blackfire Vessel~
SAY NAME2 ~Blackfire Vessel~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~c0devsha~ #8
  WRITE_ASCII 0x280 ~c0devsha~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0blacks.cre~ ~override~
SAY NAME1 ~Blackfire Vessel~
SAY NAME2 ~Blackfire Vessel~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x280 ~c0shadfi~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0sa807.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 4)
END
SAY NAME1 ~Shar's Mantle~
SAY NAME2 ~Shar's Mantle~
SAY UNIDENTIFIED_DESC ~Shar's Mantle
(Abjuration – Shadow Weave)

Level: 8
Range: 0
Duration: 1 round/4 levels
Casting Time: 6
Area of Effect: The caster
Saving Throw: Neg.

This spell surrounds the shadow adept with a barrier of dark energy. Missiles are completely deflected and weapons of +3 enchantment or below are unable to penetrate the darkness. Additionally, attackers within a 5-ft. radius will suffer 10% of their maximum hit points in damage, transferring the same amount to the caster, as well as losing one level permanently if they fail a Save vs. Death at -2.~
COPY_EXISTING ~c0sa807b.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 1
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 10% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  match_parameter2 = 0
 parameter1 = RESOLVE_STR_REF (~One Level Drained~)
  END

COPY_EXISTING ~c0sa808.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 3)
END
SAY NAME1 ~Shadow's Refuge~
SAY NAME2 ~Shadow's Refuge~
SAY UNIDENTIFIED_DESC ~Shadow's Refuge
(Abjuration – Shadow Weave)

Level: 8
Range: 0
Duration: 1 turn
Casting Time: 3
Area of Effect: The caster
Saving Throw: None

When a shadow adept casts Shadow's Refuge, <PRO_HESHE> opens a gate to a safe (in relative terms) pocket area in the Plane of Shadow, where time passes more slowly and gives <PRO_HIMHER> time to rest and recuperate away from the present battle. For one turn, the shadow adept is safe from combat and <PRO_HISHER> hit points are restored to full, and <PRO_HESHE> regains two arcane spells of each spell level of 7th level and below when <PRO_HESHE> returns. In addition, as the caster will be resting for a long period of time, all effects whether beneficial or otherwise will be removed when they return.

The shadow adept may choose to return from the refuge before its duration has expired, but <PRO_HESHE> will only get partial benefits.~

COPY_EXISTING ~c0s808a.spl~ ~override~
SAY NAME1 ~Shadow's Refuge: Return~

COPY_EXISTING ~c0sa809.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 2)
END
SAY NAME1 ~Dark Premonition~
SAY NAME2 ~Dark Premonition~
SAY UNIDENTIFIED_DESC ~Dark Premonition
(Divination – Shadow Weave)

Level: 8
Range: Self
Duration: 4 rounds
Casting Time: 1
Area of Effect: Caster
Saving Throw: None

This spell grants the caster with a brief and short-sighted degree of prescience, enough to predict events in the immediate future and react to them in advance. For 4 rounds, the shadow adept gains a bonus of 20 to Armor Class, a +20 bonus to hit, +20 to all saves and immunity to backstabs. Due to this spell's short casting time and duration, it is mainly used to buy the shadow adept a few rounds in the thick of combat.~

COPY_EXISTING ~c0sa810.spl~ ~override~
SAY NAME1 ~Dark Passage~
SAY NAME2 ~Dark Passage~
SAY UNIDENTIFIED_DESC ~Dark Passage
(Evocation – Shadow Weave)

Level: 8
Range: Party
Duration: Special
Casting Time: 1 round
Area of Effect: 20-ft. radius
Saving Throw: None

This powerful but dangerous spell temporarily turns the caster into a gateway for the energies of the Shadow Weave, which <PRO_HESHE> may control and bestow upon <PRO_HISHER> allies within 20' in range for as long as <PRO_HESHE> can maintain it. For an indefinite amount of time, the shadow adept is unable to make any actions as <PRO_HESHE> channels power into <PRO_HISHER> party, providing a +4 bonus to all attributes, +6 to Armor Class, +4 to to-hit and damage modifiers, +50% magic resistance, +50% resistance to elemental damage and immunity to level drain. However, for each round the link is maintained, the caster loses 10% of <PRO_HISHER> hit points (Save vs. Death at -4 to avoid) and <PRO_HESHE> is completely vulnerable to attack unless <PRO_HESHE> breaks the connection. Additionally, if <PRO_HESHE> ends the channel, the backlash causes <PRO_HIMHER> to become stunned for 2 rounds unless a Save vs. Death at -2 is made.~

COPY_EXISTING ~c0s810a.spl~ ~override~
SAY NAME1 ~End Dark Passage~
SAY NAME2 ~End Dark Passage~
SAY UNIDENTIFIED_DESC ~End Dark Passage

Use this ability to break the Dark Passage. The shadow adept will be stunned for 2 rounds unless a Save vs. Death at -2 is made.~
COPY_EXISTING ~c0sa810b.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 10% of maximum hit points in shadow damage^-~)
  END
COPY_EXISTING ~c0sa810c.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj15%~
END
COPY_EXISTING ~c0sa810d.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon - 17)
END

COPY_EXISTING ~C0SA811.spl~ ~override~
SAY NAME1 ~Invoke Reflection~
SAY NAME2 ~Invoke Reflection~
SAY UNIDENTIFIED_DESC ~Invoke Reflection
(Illusion/Phantasm – Shadow Weave) 

Level: 8
Range: Visual range of the caster
Duration: 2 turns
Casting Time: 9
Area of Effect: Special
Saving Throw: Special

A duplicate of the target is created with this spell. The duplicate is almost identical to the target, making it a very powerful ally. It is created at 60% of the target's level and has all the spells and abilities that the target would have at that level. It also has 60% of the target's Hit Points and is fully under the caster's control. Enemies can make a Saving Throw vs. Spells at -3 to avoid the spell's effect.~

COPY_EXISTING ~mislead.spl~ ~override~
LPF ADD_SPELL_EFFECT
	INT_VAR
		check_globals = 1
		check_headers = 1
		opcode = 177
		target = 1
		timing = 1
		parameter1 = IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~)
		parameter2 = 6
	STR_VAR
		resource = c0misled
END
COPY_EXISTING ~simulacr.spl~ ~override~
LPF ADD_SPELL_EFFECT
	INT_VAR
		check_globals = 1
		check_headers = 1
		opcode = 177
		target = 1
		timing = 1
		parameter1 = IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~)
		parameter2 = 6
	STR_VAR
		resource = c0simula
END

COPY_EXISTING ~C0SA812.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = COLD
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0blizza%~
END
SAY NAME1 ~Merciless Blizzard~
SAY NAME2 ~Merciless Blizzard~
SAY UNIDENTIFIED_DESC ~Merciless Blizzard
(Invocation/Evocation – Shadow Weave) 

Level: 8
Range: Visual range of the caster
Duration: 1 turn 
Casting Time: 8
Area of Effect: 30-ft. radius cloud 
Saving Throw: 1/2

This spell creates a vicious blizzard within a 30 ft. radius. Any in the area of the spell must leave the blizzard immediately or suffer 10d4 cold damage per round and become slowed for two rounds. Targets who remain within the blizzard suffer a cumulative -20% penalty to cold resistance for one turn. Additionally, all creatures must make a Save vs. Spells at -2 each round or be paralyzed for that round.

This spell is not affected by Magic Resistance, but creatures that are immune to cold are unaffected.~

COPY_EXISTING ~c0sa814.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj26%~
END
SAY NAME1 ~Sacred Shadow~
SAY NAME2 ~Sacred Shadow~
SAY UNIDENTIFIED_DESC ~Sacred Shadow
(Conjuration/Summoning – Shadow Weave)

Level: 8
Range: 90 ft.
Duration: Special
Casting Time: 9
Area of Effect: 12-ft. radius
Saving Throw: Neg.

This powerful spell inscribes a blessed symbol upon the targeted location, which remains there until any creature comes too close, at which point it will explode, causing all enemies within the area to make a Save vs. Spell at a -4 penalty or become silenced and deal 50% reduced damage for 1 turn. Allies within the area gain a +50% bonus to damage for the duration.~
COPY_EXISTING ~c0sa814a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Silenced~)
  END
COPY_EXISTING ~c0sa814b.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 142 // display string
 parameter2 = (icon)
END
  
COPY_EXISTING ~c0sa814z.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj26%~
END
SAY NAME1 ~Sacred Shadow~
SAY NAME2 ~Sacred Shadow~
SAY UNIDENTIFIED_DESC ~Sacred Shadow
(Conjuration/Summoning – Shadow Weave)

Level: 8
Range: 90 ft.
Duration: Special
Casting Time: 9
Area of Effect: 12-ft. radius
Saving Throw: Neg.

This powerful spell inscribes a blessed symbol upon the targeted location, which remains there until any creature comes too close, at which point it will explode, causing all enemies within the area to make a Save vs. Spell at a -4 penalty or become silenced and deal 50% reduced damage for 1 turn. Allies within the area gain a +50% bonus to damage for the duration.~

COPY_EXISTING ~c0sa815.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj26%~
END
SAY NAME1 ~Curse of Oblivion~
SAY NAME2 ~Curse of Oblivion~
SAY UNIDENTIFIED_DESC ~Curse of Oblivion
(Conjuration/Summoning – Shadow Weave)

Level: 8
Range: 90 ft.
Duration: Special
Casting Time: 9
Area of Effect: 12-ft. radius
Saving Throw: Neg.

This powerful spell inscribes a cursed symbol upon the targeted location, which remains there until any creature comes too close, at which point it will explode, causing all those within the area to make a Save vs. Spell at a -4 penalty or have their morale and senses crippled, affecting them with fear, blindness, silence, slow and deafness (75% chance to miscast magic) for 1 turn.~

COPY_EXISTING ~c0sa901.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Maximum Hit Points reduced to half~)
  END
SAY NAME1 ~Darkbolt~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj12%~
END
SAY NAME2 ~Darkbolt~
SAY UNIDENTIFIED_DESC ~Darkbolt
(Invocation/Evocation – Shadow Weave) 

Level: 9
Range: Visual range of the caster
Duration: 5 rounds
Casting Time: 0
Area of Effect: 1 creature
Saving Throw: Special 

This spell fires a bolt of necrotic energy which rends the soul of its target. Targets who fail a Save vs. Death at -2 have their maximum hit points cut in half for five rounds. Even if the target makes its save, they take 5d6+10 magic damage and their magic resistance, if any, is nullified for five rounds. If the bolt kills its target, the caster temporarily gains a 50% bonus to their maximum hit points for 1 turn and regains two spells of 8th level or below.

This spell is not affected by Magic Resistance.~

COPY_EXISTING ~c0sa902.spl~ ~override~
SAY NAME1 ~Umbral Stasis~
SAY NAME2 ~Umbral Stasis~
SAY UNIDENTIFIED_DESC ~Umbral Stasis
(Alteration – Shadow Weave)

Level: 9
Range: 0
Duration: Special
Casting Time: 9
Area of Effect: Special
Saving Throw: None 

This powerful spell causes the shadow adept to partially shift to the Plane of Shadow at the exact same point as he was, creating an effect identical to the Time Stop spell. The caster may move freely for 3 rounds in terms of time in the Plane of Shadow while time stands still in the Prime Material Plane. Additionally, the shadow adept's casting speed is increased by 4 and <PRO_HISHER> movement rate is doubled for the duration of the spell.~

COPY_EXISTING ~c0sa903.spl~ ~override~
SAY NAME1 ~Nightsinger's Tithe~
SAY NAME2 ~Nightsinger's Tithe~
SAY UNIDENTIFIED_DESC ~Nightsinger's Tithe
(Conjuration/Summoning – Shadow Weave) 

Level: 9
Range: Visual range of the caster 
Duration: Instant
Casting Time: 1 
Area of Effect: 1 creature 
Saving Throw: None

When Nightsinger's Tithe is uttered, one creature within the spell range is slain. The target must have 60 or fewer current Hit Points, otherwise the spell has no effect. There is no Saving Throw. Creatures slain by this spell have their souls sent to the Plane of Shadow as a sacrifice to Shar. There is an 50% chance that killing a target with this spell will permanently bestow 1 bonus hit point to the caster. Once 50 enemies have been slain with this spell, the shadow adept permanently gains +2 to Constitution, +1 to all saves and -1 casting time, and further castings of this spell will no longer grant hit points.~

COPY_EXISTING ~c0sa903b.spl~ ~override~
SAY NAME1 ~Nightsinger's Boon~
SAY NAME2 ~Nightsinger's Boon~

COPY_EXISTING ~c0sa904.spl~ ~override~
	LPF ADD_SPELL_EFFECT
		INT_VAR
		  opcode = 324
		  insert_point = 0
		  target = 2
		  duration = 0
		  parameter2 = 1
		STR_VAR
		  resource = C0SA904
	END
SAY NAME1 ~Enervation~
SAY NAME2 ~Enervation~
SAY UNIDENTIFIED_DESC ~Enervation
(Necromancy – Shadow Weave) 

Level: 9
Range: Touch
Duration: Permanent
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: None 

The casting of this spell opens a channel between the caster's plane and the Negative Energy Plane. The caster of the spell acts as a conduit between the two planes, sucking life from a victim and transferring it to the Negative Energy Plane, draining the target of two levels of experience every round for four rounds. A Saving Throw vs. Death at -4 can be made to avoid losing levels after the first round. The target of this spell loses levels, Hit Dice, Hit Points, and abilities permanently. These levels can only be restored by a priest's Restoration spell. Additionally, the caster is restored of 1-4 lost spells of 8th level or below for every instance of level loss of the target.~
COPY_EXISTING ~c0sa904a.spl~ ~override~
	LPF ALTER_EFFECT
		INT_VAR
			match_opcode = 139
			parameter1 = RESOLVE_STR_REF (~Two Levels Drained~)
	END
SAY NAME1 ~Enervation~

COPY_EXISTING ~c0sa905.spl~ ~override~
SAY NAME1 ~Black Blade of Disaster~
SAY NAME2 ~Black Blade of Disaster~
SAY UNIDENTIFIED_DESC ~Black Blade of Disaster
(Invocation/Evocation – Shadow Weave) 

Level: 9
Range: 0
Duration: 18 rounds
Casting Time: 4
Area of Effect: Special
Saving Throw: None 

This spell enables the caster to create a black, blade-shaped planar rift about three feet long. It jumps into the caster's hand and is used as a normal sword, remaining there for the duration of the spell. The caster is considered to be proficient to the point of Grand Mastery in this weapon. The sword acts as a +5 weapon and deals 2-24 damage to its victims. Also, every time it hits a target, the victim must make a Save vs. Death at +4 or be disintegrated. There is also a 10% chance with every hit that the sword drains 4 levels from the target and heals the wielder 20 Hit Points.~

COPY_EXISTING ~c0sa906.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0weird%~
END
SAY NAME1 ~Weird~
SAY NAME2 ~Weird~
SAY UNIDENTIFIED_DESC ~Weird
(Illusion/Phantasm – Shadow Weave) 

Level: 9
Range: 0
Duration: Instant
Casting Time: 8
Area of Effect: Special
Saving Throw: Special

You create a phantasmal image of the most fearsome creature imaginable to the subject simply by forming the fears of the subject’s subconscious mind into something that its conscious mind can visualize: this most horrible beast. Only the affected creatures see the phantasmal creatures attacking them, though you see the attackers as shadowy shapes. The target first gets a Save vs. Spells at -4 to recognize the image as unreal. If that save fails, the phantasm touches the subject, and the subject must succeed on a Save vs. Death at -2 or die from fear. If a subject succeeds, it still takes 3d6 points of damage and is stunned for 1 round. The subject also takes 1d4 points of temporary Strength damage.~

COPY_EXISTING ~c0sa907.spl~ ~override~
SAY NAME1 ~Death Mark~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 15% of maximum hit points in shadow damage^-~)
  END
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139 // display string
	  target = 2
	  timing = 1
	  parameter1 = RESOLVE_STR_REF (~Cursed~)
	  savingthrow = 4
	  savebonus = 0 - 8
	  resist_dispel = 1
  END
SAY NAME2 ~Death Mark~
SAY UNIDENTIFIED_DESC ~Death Mark
(Necromancy – Shadow Weave) 

Level: 9
Range: 0
Duration: Special
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: Special 

This horrific spell marks a specific target with a curse that dooms them to an inevitable end. The victim suffers 15% of their maximum hit points in damage on the first round with no save. On the next round, they must make another Saving Throw vs. Death at -8 or suffer the same amount of damage, then on the next round, make another saving throw at -7, and so on until a save modifier of zero. The curse remains indefinitely until the target is either killed, the curse is dispelled or resisted, or a successful save is made.~

COPY_EXISTING ~c0sa907a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 15% of maximum hit points in shadow damage^-~)
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0 - 6
	STR_VAR
	  resource = c0sa907c
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0 - 5
	STR_VAR
	  resource = c0sa907d
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0 - 4
	STR_VAR
	  resource = c0sa907e
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0 - 3
	STR_VAR
	  resource = c0sa907f
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0 - 2
	STR_VAR
	  resource = c0sa907g
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907g.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0 - 1
	STR_VAR
	  resource = c0sa907h
  END
COPY_EXISTING ~c0sa907a.spl~ ~override/c0sa907h.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_savingthrow = 4 // display string
	  savebonus = 0
	STR_VAR
	  resource = c0sa907h
  END

COPY_EXISTING ~c0sa908.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0oblivi%~
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Imprisoned~)
  END
SAY NAME1 ~Oblivion Pull~
SAY NAME2 ~Oblivion Pull~
SAY UNIDENTIFIED_DESC ~Oblivion Pull
(Abjuration – Shadow Weave)

Level: 9
Range: 30 ft.
Duration: 3 rounds
Casting Time: 9
Area of Effect: 1 creature and any creature within 7.5 ft.
Saving Throw: Special

When Oblivion Pull is cast, the shadow adept launches a tiny, fast-moving projectile towards a target which opens a portal using the target's body as a catalyst. When this happens, the portal pulls it and all other creatures within a 7.5 ft. radius into it and sends them to a small pocket in the Plane of Shadow where they are trapped indefinitely. The victim remains there unless the spell "Freedom" is cast. If a Freedom spell is cast in the area where the creature was imprisoned, then <PRO_HESHE> will reappear exactly where <PRO_HESHE> was last standing. Dispel Magic will not free creatures trapped in this manner. There is no Saving Throw against imprisonment for the target, but creatures within a 7.5 ft. radius may make a Save vs. Spells at -6 to resist being pulled into the portal.~

COPY_EXISTING ~c0sa908a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Imprisoned~)
  END

COPY_EXISTING ~c0sa909.spl~ ~override~
		LPF	ADD_SPELL_EFFECT
			INT_VAR
				insert_point = 0
				opcode = 324
				target = 2
				parameter2 = FIRE
				duration = 1
			STR_VAR
				resource = EVAL ~%SOURCE_RES%~
		END
SAY NAME1 ~Fiery Pandemonium~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0pandem%~
END
SAY NAME2 ~Fiery Pandemonium~
SAY UNIDENTIFIED_DESC ~Fiery Pandemonium
(Invocation/Evocation – Shadow Weave)

Level: 9
Range: 270 ft.
Duration: 6 rounds
Casting Time: 9
Area of Effect: 30-ft. radius
Saving Throw: None

When the caster utters the words to this powerful spell, <PRO_HESHE> calls upon powerful forces indeed. These forces bring forth a storm of shadow fire, dealing 6d10 fire and magical damage per round with no Saving Throw. Additionally, anyone within the storm must make a Saving Throw vs. Death each round or be petrified permanently. If a statue created by this spell is subjected to attacks of any sort, it will shatter into tiny pieces, making it impossible for the creature to be returned to flesh. The caster is well advised to be careful in <PRO_HISHER> use of this spell.

This spell is not affected by Magic Resistance, but creatures that are immune to fire are unaffected.~

COPY_EXISTING ~c0sa910.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 206
	  match_parameter2 = 0
	  parameter1 = RESOLVE_STR_REF (~You may not summon another dragon until eight hours have passed.~)
  END
SAY NAME1 ~Shadowcall~
SAY UNIDENTIFIED_DESC ~Shadowcall
(Conjuration/Summoning – Shadow Weave)

Level: 9
Range: 30 ft.
Duration: 8 hours
Casting Time: 9
Area of Effect: Special 
Saving Throw: None 

By means of this powerful spell, the shadow adept calls upon a mighty shadow dragon from the Plane of Shadow to assist <PRO_HIMHER> in combat. The shadow dragon will fight as the summoner's ally, but cannot be directly controlled. Only one dragon may be summoned every eight hours.~

COPY_EXISTING ~c0shadra.cre~ ~override~
SAY NAME1 ~Shadow Dragon~
SAY NAME2 ~Shadow Dragon~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~c0shadra~ #8
  WRITE_ASCII 0x280 ~c0shadra~  #32
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0sa911.spl~ ~override~
SAY NAME1 ~Shadowsight~
SAY UNIDENTIFIED_DESC ~Shadowsight
(Divination – Shadow Weave)

Level: 9
Range: 30 ft.
Duration: Permanent
Casting Time: 10
Area of Effect: Self 
Saving Throw: None 

When this powerful spell is cast, the shadow adept peers into the endless depths of the Shadow Weave, drawing upon its power to completely restore <PRO_HISHER> used arcane spells. However, for each use of this spell, the caster incurs a cumulative fatigue penalty and a -4 penalty to all Saving Throws for eight hours.~

COPY_EXISTING ~c0sahla1.spl~ ~override~
SAY NAME1 ~Relentless Assault~
SAY NAME2 ~Relentless Assault~
SAY UNIDENTIFIED_DESC ~Relentless Assault
(Any School – Shadow Weave)

Level: 10
Range: 0
Duration: 2 rounds
Casting Time: 9
Area of Effect: The caster
Saving Throw: None

Relentless Assault essentially erases the pause between casting spells. When cast, the shadow can begin casting a new spell the instant <PRO_HESHE> is finished casting <PRO_HISHER> current spell. The effect lasts for 2 rounds.

If the shadow adept kills a creature during the spell's lifetime, the remaining duration is reset to 2 rounds (only once per cast).~

COPY_EXISTING ~c0saalac.spl~ ~override~
SAY NAME1 ~Relentless Assault: Second Wind~
SAY NAME2 ~Relentless Assault: Second Wind~

COPY_EXISTING ~c0sahla2.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 139
	  match_parameter2 = 0
	  parameter1 = RESOLVE_STR_REF (~^0xFFC76777Takes 30% of maximum hit points in shadow damage^-~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 139
	  match_parameter2 = 1
	  parameter1 = RESOLVE_STR_REF (~Blinded~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 139
	  match_parameter2 = 2
	  parameter1 = RESOLVE_STR_REF (~Four Levels Drained~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 139
	  match_parameter2 = 3
	  parameter1 = RESOLVE_STR_REF (~Two Levels Drained~)
  END
SAY NAME1 ~Shadow Dragon Breath~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj09%~
END
SAY NAME2 ~Shadow Dragon Breath~
SAY UNIDENTIFIED_DESC ~Shadow Dragon Breath
(Any School – Shadow Weave)

Level: 10
Range: 0
Duration: 1 turn
Casting Time: 1
Area of Effect: Special
Saving Throw: Neg.

The shadow adept releases a deadly breath of negative energy causing blindness, dealing 4d4 unmitigated magic damage + 30% maximum hit points in damage and draining six levels from all targets hit by the blast. Targets may Save vs. Breath at -6 to avoid the maximum hit point damage and lose only 2 levels.~

COPY_EXISTING ~c0sahla3.spl~ ~override~
SAY NAME1 ~Summon Nightwalker~
SAY NAME2 ~Summon Nightwalker~
SAY UNIDENTIFIED_DESC ~Summon Nightwalker
(Any School – Shadow Weave)

Level: 10
Range: 0
Duration: 2 hours
Casting Time: 9
Area of Effect: Special
Saving Throw: Neg.

The shadow adept summons a deadly nightwalker, one of the most powerful creatures from the Plane of Shadows, under <PRO_HISHER> command.~

COPY_EXISTING ~c0nightw.cre~ ~override~
SAY NAME1 ~Nightwalker~
SAY NAME2 ~Nightwalker~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x280 ~c0nightw~  #32
    WRITE_LONG 0x28 (IDS_OF_SYMBOL (~animate~ ~C0_NIGHTWALKER~))
  WRITE_BYTE 0x274 (IDS_OF_SYMBOL (~SPECIFIC~ ~SHADOW_ADEPT~))

COPY_EXISTING ~c0sahla4.spl~ ~override~
SAY NAME1 ~Shapeshift: Shadow Dragon Scion~
SAY NAME2 ~Shapeshift: Shadow Dragon Scion~
SAY UNIDENTIFIED_DESC ~Shapeshift: Shadow Dragon Scion
(Any School – Shadow Weave)

Level: 10
Range: 0
Duration: 5 turns
Casting Time: 9
Area of Effect: Special
Saving Throw: Neg.

The shadow adept shapeshifts into a half-dragon with shadow dragon lineage, gaining the powers available to such a creature. Spells may be cast while in this form.

Strength: 22
Dexterity: 24

Base Armor Class: -6
Number of Attacks: 3
Damage: 1d12+6 slashing, 1d4 cold, 50% chance to drain two levels on hit (Save vs. Death at -4 to avoid), strikes as a +5 weapon.
40% physical resistance
80% elemental damage resistance
100% magical damage resistance
60% magic resistance
Movement rate increased by 4
Regenerate 1 hp per 3 seconds~

COPY_EXISTING ~c0shape4.itm~ ~override~
SAY NAME1 ~Shadow's Edge +5~
SAY NAME2 ~Shadow's Edge +5~

COPY_EXISTING ~c0sahlaa.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Night Knives Created~)
END
SAY NAME1 ~Night Knives~
SAY NAME2 ~Night Knives~
SAY UNIDENTIFIED_DESC ~Night Knives
(Any School – Shadow Weave)

Level: 10
Range: Special
Duration: 5 turns
Casting Time: 3
Area of Effect: Special
Saving Throw: None

This spell conjures several blades made of shadowstuff. The blades give +10 to THAC0, and when thrown, the knives divide into two and deal 1d4+2 missile damage as well as 1d4 cold damage each. The spell creates 20 blades and sets the caster's attacks to 10 as long as the blades are held.~

COPY_EXISTING ~c0nightk.itm~ ~override~
SAY NAME1 ~Night Knives~
SAY NAME2 ~Night Knives~
WRITE_SHORT 0x9C ~%c0nightk%~

COPY_EXISTING ~c0sahla5.spl~ ~override~
SAY NAME1 ~Disciple of Darkness~
SAY NAME2 ~Disciple of Darkness~
SAY UNIDENTIFIED_DESC ~Disciple of Darkness
The shadow adept has fully mastered control over the Shadow Weave, gaining +2 to Wisdom and Charisma and 20% magic resistance.

Only one of either Disciple of Darkness or Wrath of Darkness may be chosen.~

COPY_EXISTING ~c0sahla6.spl~ ~override~
SAY NAME1 ~Wrath of Darkness~
SAY NAME2 ~Wrath of Darkness~
SAY UNIDENTIFIED_DESC ~Wrath of Darkness 
The shadow adept infuses the power of the Shadow Weave into <PRO_HISHER> very body, gaining +2 to Strength and Constitution, regeneration of one hit point per 3 seconds, +4 to THAC0 and one bonus attack per round.

Only one of either Disciple of Darkness or Wrath of Darkness may be chosen.~

COPY_EXISTING ~c0sahla7.spl~ ~override~
SAY NAME1 ~Shadow Pact I~
SAY NAME2 ~Shadow Pact I~
SAY UNIDENTIFIED_DESC ~Shadow Pact I
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 1, 2 and 3 spell each. However, <PRO_HESHE> permanently loses 2 hit points.

This ability may be chosen twice.~

COPY_EXISTING ~c0sahla8.spl~ ~override~
SAY NAME1 ~Shadow Pact II~
SAY NAME2 ~Shadow Pact II~
SAY UNIDENTIFIED_DESC ~Shadow Pact II
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 4 and 5 spell each. However, <PRO_HESHE> permanently loses 3 hit points.

This ability may be chosen twice.

Requires: Shadow Pact I~

COPY_EXISTING ~c0sahla9.spl~ ~override~
SAY NAME1 ~Shadow Pact III~
SAY NAME2 ~Shadow Pact III~
SAY UNIDENTIFIED_DESC ~Shadow Pact III
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 6 and 7 spell each. However, <PRO_HESHE> permanently loses 4 hit points.

This ability may be chosen twice.

Requires: Shadow Pact II~

COPY_EXISTING ~c0sahla0.spl~ ~override~
SAY NAME1 ~Shadow Pact IV~
SAY NAME2 ~Shadow Pact IV~
SAY UNIDENTIFIED_DESC ~Shadow Pact IV
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 8 and 9 spell each. However, <PRO_HESHE> permanently loses 5 hit points.

This ability may only be chosen once.

Requires: Shadow Pact III~

COPY_EXISTING ~c0sahlab.spl~ ~override~
SAY NAME1 ~Arcane Lore~
SAY NAME2 ~Arcane Lore~
SAY UNIDENTIFIED_DESC ~Arcane Lore
The shadow adept taps into the deeper secrets of the shadow weave, gaining a permanent +1 to Intelligence and +10 Lore. <PRO_HESHE> also learns one extra Shadow Weave spell of each level.~