COPY ~%MOD_FOLDER%/2da~ ~override~
COPY ~%MOD_FOLDER%/audio~ ~override~
COPY ~%MOD_FOLDER%/animations~ ~override~
COPY ~%MOD_FOLDER%/portraits~ ~override~
COPY ~%MOD_FOLDER%/spells~ ~override~

// 2da

APPEND ~splprot.2da~ ~C0SAINT%TAB%38%TAB%-1%TAB%1~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SAINT~ BEGIN
	    SET C0SAINT = %row%
	  END
	END

APPEND ~splprot.2da~ ~C0SAWIS%TAB%39%TAB%-1%TAB%1~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SAWIS~ BEGIN
	    SET C0SAWIS = %row%
	  END
	END

APPEND ~splprot.2da~ ~C0SA611%TAB%0x111%TAB%0x00000001%TAB%8~
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~C0SA611~ BEGIN
	    SET C0SA611 = %row%
	  END
	END
	
////////////////////////////////////////
///////////////ANIMATIONS///////////////
////////////////////////////////////////

// Internally used: Animation slots reserved by vanilla or mod-added game creatures (in hexadecimal format)
// Mods with fixed animation slots that are currently considered:
// - Bearwalker + extended Werebear animation
// - Pack Mule
OUTER_TEXT_SPRINT animationSlots ~"0410" "1000" "1003" "1004" "1100" "1101" "1102" "1103" "1104" "1105" "1200" "1201" "1202" "1203" "1204" "1205" "1206" "1207" "1208" "1300" "2000" "2100" "2200" "2300" "3000" "3001" "4000" "4001" "4002" "4010" "4012" "4100" "4101" "4102" "4110" "4112" "4200" "4300" "4400" "4410" "4500" "4600" "4700" "4710" "4800" "5000" "5001" "5002" "5003" "5010" "5011" "5012" "5013" "5100" "5101" "5102" "5103" "5110" "5111" "5112" "5113" "5200" "5201" "5202" "5210" "5211" "5212" "5300" "5301" "5302" "5303" "5310" "5311" "5312" "5313" "6000" "6001" "6002" "6003" "6004" "6005" "6010" "6011" "6012" "6013" "6014" "6015" "6100" "6101" "6102" "6103" "6104" "6105" "6110" "6111" "6112" "6113" "6114" "6115" "6200" "6201" "6202" "6204" "6205" "6210" "6211" "6212" "6214" "6215" "6300" "6301" "6302" "6303" "6304" "6305" "6310" "6311" "6312" "6313" "6314" "6315" "6400" "6401" "6402" "6403" "6404" "6405" "6406" "6500" "6510" "6621" "7000" "7001" "7100" "7101" "7200" "7201" "7202" "7203" "7300" "7301" "7302" "7310" "7311" "7312" "7313" "7314" "7320" "7321" "7400" "7401" "7402" "7500" "7501" "7600" "7601" "7602" "7603" "7604" "7700" "7701" "7702" "7703" "7800" "7801" "7802" "7900" "7901" "7902" "7903" "7904" "7a00" "7a01" "7a02" "7a03" "7a04" "7b00" "7b01" "7b02" "7b03" "7b04" "7b05" "7b06" "7c00" "7c01" "7d00" "7d01" "7d02" "7d03" "7d04" "7d05" "7d06" "7d07" "7d08" "7e00" "7e01" "7f00" "7f01" "7f02" "7f03" "7f04" "7f05" "7f06" "7f07" "7f08" "7f09" "7f0a" "7f0b" "7f0c" "7f0d" "7f0e" "7f0f" "7f10" "7f11" "7f12" "7f13" "7f14" "7f15" "7f16" "7f17" "7f18" "7f19" "7f20" "7f21" "7f22" "7f23" "7f24" "7f27" "7f28" "7f29" "7f2a" "7f2b" "7f2c" "7f2d" "7f2e" "7f2f" "7f30" "7f31" "7f32" "7f33" "7f34" "7f35" "7f36" "7f37" "7f38" "7f39" "7f3a" "7f3b" "7f3c" "7f3d" "7f3e" "7f3f" "7f40" "7f41" "7f42" "7f43" "7f44" "7f45" "7f46" "7f47" "7f48" "7f49" "7f4a" "7f4b" "7f4c" "7f4d" "7f4e" "7f4f" "7f50" "7f51" "7f52" "7f53" "7f54" "7f55" "7f56" "7f57" "7f58" "7f59" "7f5a" "7f5b" "7f5c" "7f5d" "7f5e" "7f5f" "7f60" "7f61" "7f62" "8000" "8100" "8200" "9000" "a000" "a100" "a200" "a201" "a202" "b000" "b100" "b200" "b210" "b300" "b310" "b400" "b410" "b500" "b510" "b600" "b610" "b700" "c000" "c100" "c200" "c300" "c400" "c500" "c600" "c610" "c700" "c710" "c800" "c810" "c900" "c910" "ca00" "ca10" "cb00" "cc00" "cc01" "cc02" "cc04" "d000" "d100" "d200" "d300" "d400" "e000" "e010" "e020" "e040" "e050" "e060" "e070" "e080" "e090" "e0a0" "e0b0" "e0c0" "e0d0" "e0e0" "e0f0" "e0f1" "e0f2" "e200" "e210" "e220" "e230" "e240" "e241" "e242" "e243" "e244" "e245" "e246" "e247" "e248" "e249" "e24a" "e24b" "e24c" "e24d" "e24e" "e24f" "e250" "e251" "e252" "e253" "e254" "e255" "e256" "e257" "e258" "e259" "e25a" "e25b" "e25c" "e25d" "e25e" "e25f" "e260" "e261" "e262" "e263" "e264" "e265" "e266" "e267" "e26a" "e26b" "e26d" "e26e" "e26f" "e270" "e271" "e272" "e273" "e274" "e276" "e279" "e27d" "e27e" "e27f" "e280" "e281" "e282" "e283" "e288" "e289" "e28a" "e28b" "e28c" "e28d" "e28e" "e28f" "e290" "e291" "e292" "e293" "e294" "e300" "e310" "e320" "e330" "e400" "e410" "e420" "e430" "e440" "e441" "e442" "e443" "e444" "e500" "e510" "e520" "e600" "e610" "e6fe" "e700" "e710" "e720" "e800" "e810" "e820" "e830" "e840" "e900" "e910" "ea00" "ea10" "ea20" "eb00" "eb10" "eb20" "ec00" "ec10" "ec20" "ed00" "ed10" "ed20" "ee00" "ee10" "ef10" "f000" "f001" "f002" "f003" "f004" "f005" "f006" "f007" "f008" "f009" "f00a" "f00b" "f00c" "f00d" "f00e" "f00f" "f010" "f011" "f012" "f013" "f014" "f015" "f016" "f017" "f018" "f019" "f01a" "f01b" "f01c" "f01d" "f01e" "f01f" "f020" "f021" "f022" "f023" "f024" "f025" "f026" "f027" "f028" "f029" "f02a" "f02b" "f02c" "f02d" "f02e" "f02f" "f030" "f031" "f032" "f033" "f034" "f035" "f036" "f037" "f038" "f039" "f03a" "f03b" "f03c" "f03d" "f03e" "f03f" "f040" "f041" "f042" "f043" "f044" "f045" "f046" "f047" "f048" "f049" "f04a" "f04b" "f04c" "f04d" "f04e" "f04f" "f050" "f051" "f052" "f053" "f054" "f055" "f056" "f057" "f058" "f059" "f05a" "f05b" "f05c" "f05d" "f05e" "f05f" "f060" "f061" "f062" "f100" "f101" "f22e" "f80e"~

/**
 * Patch function. Returns the first free creature animation slot in the range defined by slotMin and slotMax.
 * INT_VAR slotMin    Lowest available creature animation slot for the animation, inclusive. (Default: 0)
 * INT_VAR slotMax    Highest available creature animation slot for the animation, exclusive.
 *                    (Default: highest value for slot type indicated by "slotMin")
 * INT_VAR slotSteps  How many slots to skip after each iteration, starting from slotMin.
 *                    Setting this parameter is useful if compatible animation slots are always 
 *                    a fixed distance apart (e.g. at a distance of 0x10 each). (Default: 1)
 * RET slot           A free animation slot. Returns -1 if none are found in the given range.
 */
DEFINE_PATCH_FUNCTION FIND_FREE_ANIM_SLOT
INT_VAR
  slotMin   = 0
  slotMax   = (slotMin BAND 0xf000) + 0x1000
  slotSteps = 1
RET
  slot
BEGIN
  SET slot = "-1"
  SET slotSteps = (slotSteps < 1) ? 1 : slotSteps
  SET slotMin = (slotMin < 0) ? 0 : slotMin
  SET slotMax = (slotMax < 0) ? 0 : slotMax
  PATCH_IF (slotMax < slotMin) BEGIN
    SET tmp = slotMin
    SET slotMin = slotMax
    SET slotMax = tmp
  END

  INNER_PATCH ~%animationSlots%~ BEGIN
    FOR (idx = slotMin; idx < slotMax; idx += slotSteps) BEGIN
      LOOKUP_IDS_SYMBOL_OF_INT name ~animate~ idx
      PATCH_IF (~%name%~ STR_EQ ~%idx%~) BEGIN
        LPF TO_HEX_NUMBER INT_VAR value = idx minDigits = 4 RET hexNumber END
        PATCH_IF (NOT FILE_EXISTS_IN_GAME ~%hexNumber%.ini~ AND 
                  ~%slotList%~ STRING_CONTAINS_REGEXP ~"%hexNumber%"~ != 0) BEGIN
          SET slot = idx
          SET idx = slotMax
        END
      END
    END
  END
END

// Action version of FIND_FREE_ANIM_SLOT
DEFINE_ACTION_FUNCTION FIND_FREE_ANIM_SLOT
INT_VAR
  slotMin   = 0
  slotMax   = (slotMin BAND 0xf000) + 0x1000
  slotSteps = 1
RET
  slot
BEGIN
  OUTER_PATCH ~~ BEGIN
    LPF FIND_FREE_ANIM_SLOT
    INT_VAR
      slotMin = slotMin
      slotMax = slotMax
      slotSteps = slotSteps
    RET
      slot
    END
  END
END

// Shadow Magi

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0x7000 slotMax = 0x7999 RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_SHADOW_MAGI~ UNLESS ~C0_SHADOW_MAGI~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/c0mg/7xxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/c0mg~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

// Nightwalker

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xe999 RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_NIGHTWALKER~ UNLESS ~C0_NIGHTWALKER~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/c0nw/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/c0nw~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

//AUDIO

LAF HANDLE_AUDIO END

PRINT ~Please choose one of the following:
[1] Constitution drain on cast
[2] Drain Hit Points on cast~

OUTER_SPRINT ~hpcost~ ~placeholder_value~
OUTER_WHILE (!(IS_AN_INT ~hpcost~) OR (~hpcost~ > 0x5) OR (~hpcost~ < 0x1)) BEGIN
  PRINT ~Please select 1 or 2 and press Enter.~
  ACTION_READLN ~hpcost~
END
      ACTION_IF ("hpcost" = 1) THEN BEGIN
LOAD_TRA ~%MOD_FOLDER%/languages/english/setup.tra~
COPY ~%MOD_FOLDER%/spells/c0sacon1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-1 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon2.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-2 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon3.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-3 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon4.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-4 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon5.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-5 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon6.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-6 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon7.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-7 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon8.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-8 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon9.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-9 penalty to Constitution~)
END

COPY ~%MOD_FOLDER%/spells/c0sacon0.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-10 penalty to Constitution~)
END
COMPILE ~%MOD_FOLDER%/scripts/c0sacon.baf~

COPY ~%MOD_FOLDER%/spells/C0SA207.spl~ ~override~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 1
	  timing = 4
	  duration = 60
	  parameter1 = RESOLVE_STR_REF (~Constitution Restored~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
  END
SAY NAME1 ~Lesser Drain Vitality~
SAY NAME2 ~Lesser Drain Vitality~
SAY UNIDENTIFIED_DESC ~Lesser Drain Vitality
(Necromancy - Shadow Weave)

Level: 2
Range: Touch
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain two points of Constitution from a single target, increasing the caster's own for 1 turn. Drain Vitality (and its variants) does not cost Constitution as other spells of the Shadow Weave and may not affect the same target more than once per turn.~

COPY ~%MOD_FOLDER%/spells/C0SA407.spl~ ~override~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 1
	  timing = 4
	  duration = 60
	  parameter1 = RESOLVE_STR_REF (~Constitution Restored~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
  END
SAY NAME1 ~Drain Vitality~
SAY NAME2 ~Drain Vitality~
SAY UNIDENTIFIED_DESC ~Drain Vitality
(Necromancy - Shadow Weave)

Level: 4
Range: Touch
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain four points of Constitution from a single target, increasing the caster's own for 1 turn. Drain Vitality (and its variants) does not cost Constitution as other spells of the Shadow Weave and may not affect the same target more than once per turn.~

COPY ~%MOD_FOLDER%/spells/C0SA706.spl~ ~override~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 139
	  target = 1
	  timing = 4
	  duration = 60
	  parameter1 = RESOLVE_STR_REF (~Constitution Restored~)
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Target's Constitution has already been drained~)
  END
SAY NAME1 ~Greater Drain Vitality~
SAY NAME2 ~Greater Drain Vitality~
SAY UNIDENTIFIED_DESC ~Greater Drain Vitality
(Necromancy - Shadow Weave)

Level: 7
Range: Touch
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain eight points of Constitution from a single target, increasing the caster's own for 1 turn. Drain Vitality (and its variants) does not cost Constitution as other spells of the Shadow Weave and may not affect the same target more than once per turn.~

      PRINT ~Resource: Constitution drain on cast~
      END
      ACTION_IF ("hpcost" = 2) THEN BEGIN
LOAD_TRA ~%MOD_FOLDER%/languages/english/setup-2.tra~
COPY ~%MOD_FOLDER%/alt-spell/c0sacon1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-2 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon2.spl~ ~override/c0sacon2.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-4 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon3.spl~ ~override/c0sacon3.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-6 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon4.spl~ ~override/c0sacon4.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-8 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon5.spl~ ~override/c0sacon5.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-10 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon6.spl~ ~override/c0sacon6.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-12 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon7.spl~ ~override/c0sacon7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-14 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon8.spl~ ~override/c0sacon8.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-16 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon9.spl~ ~override/c0sacon9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-18 Hit Points~)
END
COPY ~%MOD_FOLDER%/alt-spell/c0sacon0.spl~ ~override/c0sacon0.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~-20 Hit Points~)
END

COMPILE ~%MOD_FOLDER%/alt-spell/c0sacon.baf~
COPY ~%MOD_FOLDER%/alt-spell/C0SA207a.spl~ ~override~
COPY ~%MOD_FOLDER%/alt-spell/C0SA207.spl~ ~override~
SAY NAME1 ~Lesser Drain Vitality~
SAY NAME2 ~Lesser Drain Vitality~
SAY UNIDENTIFIED_DESC ~Lesser Drain Vitality
(Necromancy - Shadow Weave)

Level: 2
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain two hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA407a.spl~ ~override~
COPY ~%MOD_FOLDER%/alt-spell/C0SA407.spl~ ~override~
SAY NAME1 ~Drain Vitality~
SAY NAME2 ~Drain Vitality~
SAY UNIDENTIFIED_DESC ~Drain Vitality
(Necromancy - Shadow Weave)

Level: 4
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain four hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
COPY ~%MOD_FOLDER%/alt-spell/C0SA706a.spl~ ~override~
COPY ~%MOD_FOLDER%/alt-spell/C0SA706.spl~ ~override~
SAY NAME1 ~Greater Drain Vitality~
SAY NAME2 ~Greater Drain Vitality~
SAY UNIDENTIFIED_DESC ~Greater Drain Vitality
(Necromancy - Shadow Weave)

Level: 7
Range: Touch
Duration: Permanent
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell allows the shadow adept to drain six hit points per level from the target as magic damage (Save vs. Death at -2 for half), healing <PRO_HIMHER>self for the same amount. Drain Vitality (and its variants) does not cost hit points as other spells.~
      PRINT ~Resource: Hit Point drain on cast~
      END

INCLUDE ~%MOD_FOLDER%/lib/fl#add_kit_ee.tpa~
ADD_KIT ~C0SADEPT~

 // appended to CLASWEAP.2da
 ~C0SADEPT		1           1           1           1           1           1           1           1~

 // appended column-wise to WEAPPROF.2da
 ~C0SADEPT		0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~
    
 // appended to ABCLASRQ.2da
 ~C0SADEPT				0	0	12	9	0	9~

 // appended to ABCLSMOD.2da
 ~C0SADEPT				0	0	0	0	0	0~

 // appended to ABDCDSRQ.2da
 ~C0SADEPT                		0       0       15       15       0       15~

 // appended to ABDCSCRQ.2da
 ~C0SADEPT                 	0       0       0       0       0		0~

 // appended to ALIGNMNT.2da
 ~C0SADEPT                  	0       1       1       0       1	1       0       1       1~

 // appended to DUALCLAS.2da
 ~C0SADEPT                  	1       1       0       1       0       0~

 // path to your CLAB-style 2da file 
 ~%MOD_FOLDER%/2da/C0SADEPT.2da~

 // PC races and classes allowed to use this kit, from KITTABLE.2da
 ~~

 // usability flags, added to the end of the KITLIST.2da entry
 ~0x00003FC0     1~

 // HLA table to use; see LUABBR.2da
 ~C0SA~

 // list of starting equipment for PCs starting in ToB. Appended column-wise to 25STWEAP.2da
 ~* * * BAG29 RING06 RING40 * BOOT01 AMUL21 BRAC15 BELT10 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 SLNG05 DAGG05,20 STAF20~

 // Lower, mixed, and help kit names and UNIDENTIFIED_DESCriptions, added to KITLIST.2da
  SAY @0
  SAY @1
  SAY @10001

LAF fl#add_kit_ee
  INT_VAR
	biography = RESOLVE_STR_REF (~There is a dark secret hidden within the walls of Candlekeep, forbidden to be spoken of among the scribes and monks even in hushed voices. A well of shadow magic, fueled by darkness and loss, shunned by most practitioners of the arcane arts. Such powers originate from the realm of the Shadow Weave, the distorted mockery of Mystra's Weave created by Shar, the Nightsinger. So obscure is this power that most are unaware of its existence, and those that know of it refuse to acknowledge it due to its dark origins. However, the seductive whispers of this power has called to you, an apprentice mage who had barely mastered your first cantrip, since a young age, deep beneath the great library.

When the voices became too much to resist, you snuck into the depths of Candlekeep in the dead of night, where unwanted and dangerous secrets are left to rot. Inside of a once-sealed chamber stood a strange fountain, an open wound in the Prime Material Plane through which the energies of the Shadow Weave bled. As soon as you touched the eerie yet beautiful strands of magic that flowed from the wound, you felt an awakening as your connection to the Weave was severed and the power of Shar's dark Weave coursed through you in its place, bestowing upon you a magic that few are gifted with. As you matured, the growing magic within you developed a symbiotic connection until it became one with your very being, and the power of the Shadow Weave became subservient to your will. Gorion and your tutors grew wary of the strange magic that you wielded, though they never learned of the source. Though you knew the dangers of toying with Shar's domain were great, the temptation of such a little-known power in your hands were a thousand times worth the cost.~)
  STR_VAR
    kit_name = C0SADEPT
	hpclass = ~HPDD~
	clascolr = ~27 136 119 21 187~
	clsrcreq = ~1 1 1 1 1 1 1~
END

INCLUDE ~%MOD_FOLDER%/lib/fl#add_kit_ee.tpa~
ADD_KIT ~C0SADEP2~

 // appended to CLASWEAP.2da
 ~C0SADEP2		1           1           1           1           1           1           1           1~

 // appended column-wise to WEAPPROF.2da
 ~C0SADEP2		0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~
    
 // appended to ABCLASRQ.2da
 ~C0SADEP2				0	0	12	9	0	9~

 // appended to ABCLSMOD.2da
 ~C0SADEP2				0	0	0	0	0	0~

 // appended to ABDCDSRQ.2da
 ~C0SADEP2                		0       0       0       15       0       15~

 // appended to ABDCSCRQ.2da
 ~C0SADEP2                 	0       0       0       0       0		0~

 // appended to ALIGNMNT.2da
 ~C0SADEP2                  	0       1       1       0       1	1       0       1       1~

 // appended to DUALCLAS.2da
 ~C0SADEP2                  	1       1       0       1       0       0~

 // path to your CLAB-style 2da file 
 ~%MOD_FOLDER%/2da/blankclab.2da~

 // PC races and classes allowed to use this kit, from KITTABLE.2da
 ~K_M_H K_M_E K_M_HE K_M_HL K_M_G K_M_D K_M_HO~

 // usability flags, added to the end of the KITLIST.2da entry
 ~0x00004000     1~

 // HLA table to use; see LUABBR.2da
 ~C0SA~

 // list of starting equipment for PCs starting in ToB. Appended column-wise to 25STWEAP.2da
 ~* * * BAG29 RING06 RING40 * BOOT01 AMUL21 BRAC15 BELT10 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 SLNG05 DAGG05,20 STAF20~

 // Lower, mixed, and help kit names and descriptions, added to KITLIST.2da
  SAY @0
  SAY @1
  SAY @10002

LAF fl#add_kit_ee
  INT_VAR
	biography = RESOLVE_STR_REF (~There is a dark secret hidden within the walls of Candlekeep, forbidden to be spoken of among the scribes and monks even in hushed voices. A well of shadow magic, fueled by darkness and loss, shunned by most practitioners of the arcane arts. Such powers originate from the realm of the Shadow Weave, the distorted mockery of Mystra's Weave created by Shar, the Nightsinger. So obscure is this power that most are unaware of its existence, and those that know of it refuse to acknowledge it due to its dark origins. However, the seductive whispers of this power has called to you, an apprentice mage who had barely mastered your first cantrip, since a young age, deep beneath the great library.

When the voices became too much to resist, you snuck into the depths of Candlekeep in the dead of night, where unwanted and dangerous secrets are left to rot. Inside of a once-sealed chamber stood a strange fountain, an open wound in the Prime Material Plane through which the energies of the Shadow Weave bled. As soon as you touched the eerie yet beautiful strands of magic that flowed from the wound, you felt an awakening as your connection to the Weave was severed and the power of Shar's dark Weave coursed through you in its place, bestowing upon you a magic that few are gifted with. As you matured, the growing magic within you developed a symbiotic connection until it became one with your very being, and the power of the Shadow Weave became subservient to your will. Gorion and your tutors grew wary of the strange magic that you wielded, though they never learned of the source. Though you knew the dangers of toying with Shar's domain were great, the temptation of such a little-known power in your hands were a thousand times worth the cost.~)
  STR_VAR
    kit_name = C0SADEP2
	hpclass = ~HPDD~
	clascolr = ~27 136 119 21 187~
	clsrcreq = ~1 1 1 1 1 1 1~
END

////////////////////////////////////////
/////////CREATURES//////////////////////
////////////////////////////////////////

COPY ~%MOD_FOLDER%/spells/c0satalk.cre~ ~override~
WRITE_ASCII 0x2cc ~c0satalk~ #8  // dialogue
WRITE_ASCII 0x248 ~c0satalk~ #8  // override
WRITE_ASCII 0x280 ~c0satalk~ #32 // death variable

COPY ~%MOD_FOLDER%/spells/c0satalk.cre~ ~override/c0saorb.cre~
WRITE_ASCII 0x2cc ~c0saorb~ #8  // dialogue
WRITE_ASCII 0x248 ~c0saorb~ #8  // override
WRITE_ASCII 0x280 ~c0saorb~ #32 // death variable

////////////////////////////////////////
/////////DIALOGUE///////////////////////
////////////////////////////////////////

COMPILE ~%MOD_FOLDER%/dialogue/c0satalk.d~
COMPILE ~%MOD_FOLDER%/dialogue/c0saorb.d~

////////////////////////////////////////
/////////SCRIPTS////////////////////////
////////////////////////////////////////

EXTEND_TOP ~dplayer3.bcs~ ~%MOD_FOLDER%/scripts/dplayer3.baf~
EXTEND_TOP ~dplayer2.bcs~ ~%MOD_FOLDER%/scripts/dplayer2.baf~

ACTION_IF FILE_EXISTS_IN_GAME ~baldur.bcs~ THEN BEGIN
EXTEND_TOP ~baldur.bcs~ ~%MOD_FOLDER%/scripts/c0sa402.baf~
EXTEND_TOP ~baldur.bcs~ ~%MOD_FOLDER%/scripts/baldur.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdbaldur.bcs~ THEN BEGIN
EXTEND_TOP ~bdbaldur.bcs~ ~%MOD_FOLDER%/scripts/c0sa402.baf~
EXTEND_TOP ~bdbaldur.bcs~ ~%MOD_FOLDER%/scripts/baldur.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur25.bcs~ THEN BEGIN
EXTEND_TOP ~baldur25.bcs~ ~%MOD_FOLDER%/scripts/c0sa402.baf~
EXTEND_TOP ~baldur25.bcs~ ~%MOD_FOLDER%/scripts/baldur.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdcutgl2.bcs~ THEN BEGIN
COMPILE ~%MOD_FOLDER%/dialogue/soddial.d~
COMPILE ~%MOD_FOLDER%/scripts/c0cutgl2.baf~
END

COMPILE ~%MOD_FOLDER%/scripts/c0satalk.baf~
COMPILE ~%MOD_FOLDER%/scripts/c0saorb.baf~
COMPILE ~%MOD_FOLDER%/scripts/c0sasumm.baf~
COMPILE ~%MOD_FOLDER%/scripts/c0devsha.baf~
COMPILE ~%MOD_FOLDER%/scripts/c0nighth.baf~
COMPILE ~%MOD_FOLDER%/scripts/c0sa711.baf~

// items

COPY ~%MOD_FOLDER%/items/c0sablad.bam~ ~override~
COPY ~%MOD_FOLDER%/Items/C0SASWD1.itm~ ~override/C0SASWD1.itm~
SAY NAME1 ~Shadow Sword +1~
SAY NAME2 ~Shadow Sword +1~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - Cold Resistance: +25%
 - Wielded as though proficient in long swords

THAC0: +1
Damage: 1d8+1, 1 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD2.itm~ ~override/C0SASWD2.itm~
SAY NAME1 ~Shadow Sword +2~
SAY NAME2 ~Shadow Sword +2~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 2% chance to cast Essence Drain on hit
 - Cold Resistance: +25%
 - Wielded as though Proficient in long swords

THAC0: +2
Damage: 1d8+2, 2 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD3.itm~ ~override/C0SASWD3.itm~
SAY NAME1 ~Shadow Sword +3~
SAY NAME2 ~Shadow Sword +3~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 5% chance to cast Essence Drain on hit
 - 2% chance to cast Shadow Binding on hit
 - Cold Resistance: +50%
 - Wielded as though Specialized in long swords

THAC0: +3
Damage: 1d8+3, 3 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD4.itm~ ~override/C0SASWD4.itm~
SAY NAME1 ~Shadow Sword +4~
SAY NAME2 ~Shadow Sword +4~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 5% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 2% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +50%
 - Wielded as though Mastery with long swords

THAC0: +4
Damage: 1d8+4, 4 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD5.itm~ ~override/C0SASWD5.itm~
SAY NAME1 ~Shadow Sword +5~
SAY NAME2 ~Shadow Sword +5~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 10% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 5% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +75%
 - Wielded as though High Mastery with long swords

THAC0: +5
Damage: 1d8+5, 5 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/C0SASWD6.itm~ ~override/C0SASWD6.itm~
SAY NAME1 ~Shadow Sword +6~
SAY NAME2 ~Shadow Sword +6~
SAY DESC ~This powerful blade was created by energies from the Plane of Shadow and can only be wielded by shadow adepts.

STATISTICS:

Equipped abilities:
 - 20% chance to cast Essence Drain on hit
 - 10% chance to cast Shadow Binding on hit
 - 10% chance to cast Nightshade on hit
 - 2% chance to cast Death Mark on hit
 - 1 extra attack per round
 - Cold Resistance: +100%
 - Wielded as though Grand Mastery with long swords

THAC0: +6
Damage: 1d8+6, 6 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Weight: 3~
SAY 0xD6 ~Shadow Adepts~

COPY ~%MOD_FOLDER%/Items/c0sabook.bam~ ~override~
COPY ~%MOD_FOLDER%/Items/c0sabook.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = 12
	  parameter2 = 6
	  power = 1
	  special = RESOLVE_STR_REF (@1)
END
SAY NAME1 ~Book~
SAY NAME2 ~Shadow Tome of Shar~
SAY DESC ~This black leather-bound tome is filled with magical runes and incantations that seem to shift and change slightly as you blink.

STATISTICS:

- Learns all Shadow Weave spells on use.

Weight: 2~

COMPILE ~%MOD_FOLDER%/dialogue/c0sabook.d~

COPY_EXISTING ~ITEMDIAL.2da~ ~override~
APPEND_FILE ~%MOD_FOLDER%/items/ITEMDIAL.txt~
REPLACE ~-1~ ~Read Tome~

COPY ~%MOD_FOLDER%/Items/c0saorb.bam~ ~override~
COPY ~%MOD_FOLDER%/Items/c0saorbc.bam~ ~override~
COPY ~%MOD_FOLDER%/Items/c0saorb.itm~ ~override~
SAY NAME1 ~Black Orb~
SAY NAME2 ~Shadow Orb~
SAY DESC ~This smoky glass sphere emanates an aura of power unlike any magic you're familiar with. A strange energy struggles to break free of it.~

PRINT ~Add Shadow Disciple (Sorcerer Kit)?
[1] Yes
[2] No~

OUTER_SPRINT ~sorcerer~ ~placeholder_value~
OUTER_WHILE (!(IS_AN_INT ~sorcerer~) OR (~sorcerer~ > 0x5) OR (~sorcerer~ < 0x1)) BEGIN
  PRINT ~Please select 1 or 2 and press Enter.~
  ACTION_READLN ~sorcerer~
END
      ACTION_IF ("sorcerer" = 1) THEN BEGIN
INCLUDE ~%MOD_FOLDER%/lib/fl#add_kit_ee.tpa~
ADD_KIT ~C0SASORC~

 // appended to CLASWEAP.2da
 ~C0SASORC		1           1           1           1           1           1           1           1~

 // appended column-wise to WEAPPROF.2da
 ~C0SASORC		0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~
    
 // appended to ABCLASRQ.2da
 ~C0SASORC				0	0	12	9	0	9~

 // appended to ABCLSMOD.2da
 ~C0SASORC				0	0	0	0	0	0~

 // appended to ABDCDSRQ.2da
 ~C0SASORC                		0       0       15       15       0       15~

 // appended to ABDCSCRQ.2da
 ~C0SASORC                 	0       0       0       0       0		0~

 // appended to ALIGNMNT.2da
 ~C0SASORC                  	0       1       1       0       1	1       0       1       1~

 // appended to DUALCLAS.2da
 ~C0SASORC                  	0       0       0       0       0       0~

 // path to your CLAB-style 2da file 
 ~%MOD_FOLDER%/2da/C0SADEP3.2da~

 // PC races and classes allowed to use this kit, from KITTABLE.2da
 ~~

 // usability flags, added to the end of the KITLIST.2da entry
 ~0x00003FC0     19~

 // HLA table to use; see LUABBR.2da
 ~C0SA~

 // list of starting equipment for PCs starting in ToB. Appended column-wise to 25STWEAP.2da
 ~* * * BAG29 RING06 RING40 * BOOT01 AMUL21 BRAC15 BELT10 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 SLNG05 DAGG05,20 STAF20~

 // Lower, mixed, and help kit names and UNIDENTIFIED_DESCriptions, added to KITLIST.2da
  SAY ~shadow disciple~
  SAY ~Shadow Disciple~
  SAY @10003

LAF fl#add_kit_ee
  INT_VAR
	biography = RESOLVE_STR_REF (~There is a dark secret hidden within the walls of Candlekeep, forbidden to be spoken of among the scribes and monks even in hushed voices. A well of shadow magic, fueled by darkness and loss, shunned by most practitioners of the arcane arts. Such powers originate from the realm of the Shadow Weave, the distorted mockery of Mystra's Weave created by Shar, the Nightsinger. So obscure is this power that most are unaware of its existence, and those that know of it refuse to acknowledge it due to its dark origins. However, the seductive whispers of this power has called to you, an apprentice mage who had barely mastered your first cantrip, since a young age, deep beneath the great library.

When the voices became too much to resist, you snuck into the depths of Candlekeep in the dead of night, where unwanted and dangerous secrets are left to rot. Inside of a once-sealed chamber stood a strange fountain, an open wound in the Prime Material Plane through which the energies of the Shadow Weave bled. As soon as you touched the eerie yet beautiful strands of magic that flowed from the wound, you felt an awakening as your connection to the Weave was severed and the power of Shar's dark Weave coursed through you in its place, bestowing upon you a magic that few are gifted with. As you matured, the growing magic within you developed a symbiotic connection until it became one with your very being, and the power of the Shadow Weave became subservient to your will. Gorion and your tutors grew wary of the strange magic that you wielded, though they never learned of the source. Though you knew the dangers of toying with Shar's domain were great, the temptation of such a little-known power in your hands were a thousand times worth the cost.~)
  STR_VAR
    kit_name = C0SASORC
	hpclass = ~HPDD~
	clascolr = ~27 136 119 21 187~
	clsrcreq = ~1 1 1 1 1 1 1~
END

INCLUDE ~%MOD_FOLDER%/lib/fl#add_kit_ee.tpa~
ADD_KIT ~C0SASOR2~

 // appended to CLASWEAP.2da
 ~C0SASOR2		1           1           1           1           1           1           1           1~

 // appended column-wise to WEAPPROF.2da
 ~C0SASOR2		0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~
    
 // appended to ABCLASRQ.2da
 ~C0SASOR2				0	0	12	9	0	9~

 // appended to ABCLSMOD.2da
 ~C0SASOR2				0	0	0	0	0	0~

 // appended to ABDCDSRQ.2da
 ~C0SASOR2                		0       0       0       15       0       15~

 // appended to ABDCSCRQ.2da
 ~C0SASOR2                 	0       0       0       0       0		0~

 // appended to ALIGNMNT.2da
 ~C0SASOR2                  	0       1       1       0       1	1       0       1       1~

 // appended to DUALCLAS.2da
 ~C0SASOR2                  	0       0       0       0       0       0~

 // path to your CLAB-style 2da file 
 ~%MOD_FOLDER%/2da/blankclab.2da~

 // PC races and classes allowed to use this kit, from KITTABLE.2da
 ~K_S_H K_S_E K_S_HE K_S_HL K_S_G K_S_D K_S_HO~

 // usability flags, added to the end of the KITLIST.2da entry
 ~0x00004000 19~

 // HLA table to use; see LUABBR.2da
 ~C0SA~

 // list of starting equipment for PCs starting in ToB. Appended column-wise to 25STWEAP.2da
 ~* * * BAG29 RING06 RING40 * BOOT01 AMUL21 BRAC15 BELT10 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 SLNG05 DAGG05,20 STAF20~

 // Lower, mixed, and help kit names and descriptions, added to KITLIST.2da
  SAY ~shadow disciple~
  SAY ~Shadow Disciple~
  SAY @10004

LAF fl#add_kit_ee
  INT_VAR
	biography = RESOLVE_STR_REF (~There is a dark secret hidden within the walls of Candlekeep, forbidden to be spoken of among the scribes and monks even in hushed voices. A well of shadow magic, fueled by darkness and loss, shunned by most practitioners of the arcane arts. Such powers originate from the realm of the Shadow Weave, the distorted mockery of Mystra's Weave created by Shar, the Nightsinger. So obscure is this power that most are unaware of its existence, and those that know of it refuse to acknowledge it due to its dark origins. However, the seductive whispers of this power has called to you, an apprentice mage who had barely mastered your first cantrip, since a young age, deep beneath the great library.

When the voices became too much to resist, you snuck into the depths of Candlekeep in the dead of night, where unwanted and dangerous secrets are left to rot. Inside of a once-sealed chamber stood a strange fountain, an open wound in the Prime Material Plane through which the energies of the Shadow Weave bled. As soon as you touched the eerie yet beautiful strands of magic that flowed from the wound, you felt an awakening as your connection to the Weave was severed and the power of Shar's dark Weave coursed through you in its place, bestowing upon you a magic that few are gifted with. As you matured, the growing magic within you developed a symbiotic connection until it became one with your very being, and the power of the Shadow Weave became subservient to your will. Gorion and your tutors grew wary of the strange magic that you wielded, though they never learned of the source. Though you knew the dangers of toying with Shar's domain were great, the temptation of such a little-known power in your hands were a thousand times worth the cost.~)
  STR_VAR
    kit_name = C0SASOR2
	hpclass = ~HPDD~
	clascolr = ~27 136 119 21 187~
	clsrcreq = ~1 1 1 1 1 1 1~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur.bcs~ THEN BEGIN
EXTEND_TOP ~baldur.bcs~ ~%MOD_FOLDER%/scripts/c0satal2.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdbaldur.bcs~ THEN BEGIN
EXTEND_TOP ~bdbaldur.bcs~ ~%MOD_FOLDER%/scripts/c0satal2.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur25.bcs~ THEN BEGIN
EXTEND_TOP ~baldur25.bcs~ ~%MOD_FOLDER%/scripts/c0satal2.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~c0saorb.d~ THEN BEGIN
EXTEND_TOP ~c0saorb.bcs~ ~%MOD_FOLDER%/scripts/c0saorb2.baf~
END
      END
      ACTION_IF ("sorcerer" = 2) THEN BEGIN
      END

PRINT ~Add Nightsinger (Bard Kit)?
[1] Yes
[2] No~

OUTER_SPRINT ~bard~ ~placeholder_value~
OUTER_WHILE (!(IS_AN_INT ~bard~) OR (~bard~ > 0x5) OR (~bard~ < 0x1)) BEGIN
  PRINT ~Please select 1 or 2 and press Enter.~
  ACTION_READLN ~bard~
END
      ACTION_IF ("bard" = 1) THEN BEGIN
INCLUDE ~%MOD_FOLDER%/lib/fl#add_kit_ee.tpa~
ADD_KIT ~C0SABARD~

 // appended to CLASWEAP.2da
 ~C0SABARD		1           1           1           1           1           1           1           1~

 // appended column-wise to WEAPPROF.2da
//11                                T   S           F   Q             S S
//10                                W   C           L   U             W I
//9                         B L S   O   I   W       A   A             O N
//8                         A O H   H   M   A       I   R C   S       R G
//7         L S           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6         _ _       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5         S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4         W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3         O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2         R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1         D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
 ~C0AURA	1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~
    
 // appended to ABCLASRQ.2da
 ~C0SABARD				0	0	12	9	0	9~

 // appended to ABCLSMOD.2da
 ~C0SABARD				0	0	0	0	0	0~

 // appended to ABDCDSRQ.2da
 ~C0SABARD                		0       0       15       15       0       15~

 // appended to ABDCSCRQ.2da
 ~C0SABARD                 	0       0       0       0       0		0~

 // appended to ALIGNMNT.2da
 ~C0SABARD                  	0       1       1       0       1	1       0       1       1~

 // appended to DUALCLAS.2da
 ~C0SABARD                  	1       1       0       1       0       0~

 // path to your CLAB-style 2da file 
 ~%MOD_FOLDER%/2da/C0SABARD.2da~

 // PC races and classes allowed to use this kit, from KITTABLE.2da
 ~~

 // usability flags, added to the end of the KITLIST.2da entry
 ~0x00003FC0     5~

 // HLA table to use; see LUABBR.2da
 ~C0SA2~

 // list of starting equipment for PCs starting in ToB. Appended column-wise to 25STWEAP.2da
 ~* * * BAG29 RING06 RING40 * BOOT01 AMUL21 BRAC15 BELT10 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 SLNG05 DAGG05,20 STAF20~

 // Lower, mixed, and help kit names and UNIDENTIFIED_DESCriptions, added to KITLIST.2da
  SAY ~nightsinger~
  SAY ~Nightsinger~
  SAY @10005

LAF fl#add_kit_ee
  INT_VAR
	biography = RESOLVE_STR_REF (~There is a dark secret hidden within the walls of Candlekeep, forbidden to be spoken of among the scribes and monks even in hushed voices. A well of shadow magic, fueled by darkness and loss, shunned by most practitioners of the arcane arts. Such powers originate from the realm of the Shadow Weave, the distorted mockery of Mystra's Weave created by Shar, the Nightsinger. So obscure is this power that most are unaware of its existence, and those that know of it refuse to acknowledge it due to its dark origins. However, the seductive whispers of this power has called to you, an apprentice mage who had barely mastered your first cantrip, since a young age, deep beneath the great library.

When the voices became too much to resist, you snuck into the depths of Candlekeep in the dead of night, where unwanted and dangerous secrets are left to rot. Inside of a once-sealed chamber stood a strange fountain, an open wound in the Prime Material Plane through which the energies of the Shadow Weave bled. As soon as you touched the eerie yet beautiful strands of magic that flowed from the wound, you felt an awakening as your connection to the Weave was severed and the power of Shar's dark Weave coursed through you in its place, bestowing upon you a magic that few are gifted with. As you matured, the growing magic within you developed a symbiotic connection until it became one with your very being, and the power of the Shadow Weave became subservient to your will. Gorion and your tutors grew wary of the strange magic that you wielded, though they never learned of the source. Though you knew the dangers of toying with Shar's domain were great, the temptation of such a little-known power in your hands were a thousand times worth the cost.~)
  STR_VAR
    kit_name = C0SABARD
	hpclass = ~HPDD~
	clascolr = ~27 136 119 21 187~
	clsrcreq = ~1 1 1 1 1 1 1~
END

INCLUDE ~%MOD_FOLDER%/lib/fl#add_kit_ee.tpa~
ADD_KIT ~C0SABAR2~

 // appended to CLASWEAP.2da
 ~C0SABAR2		1           1           1           1           1           1           1           1~

 // appended column-wise to WEAPPROF.2da
//11                                T   S           F   Q             S S
//10                                W   C           L   U             W I
//9                         B L S   O   I   W       A   A             O N
//8                         A O H   H   M   A       I   R C   S       R G
//7         L S           M S N O   A   I   R     H L   T R L H     2 D L 2                 E E E E E E E E E E E
//6         _ _       S   I T G R   N K T D H     A M   E O O O     H A E W E E E E E E E E X X X X X X X X X X X
//5         S S   S B P   S A S T   D A A A A   S L O   R S N R   S A N W E X X X X X X X X T T T T T T T T T T T
//4         W W   P L I   S R W S   E T R G M C P B R M S S G T D L N D E A T T T T T T T T R R R R R R R R R R R
//3         O O B E U K A I D O W A D A W G M L E E N A T B B B A I D S A P R R R R R R R R A A A A A A A A A A A
//2         R R O A N E X L S R O X S N A E E U A R I C A O O O R N E H P O A A A A A A A A 1 1 1 1 1 1 1 1 1 1 2
//1         D D W R T D E E W D R E W A K R R B R D N E F W W W T G D I O N 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0
 ~C0AURA	1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0~
    
 // appended to ABCLASRQ.2da
 ~C0SABAR2				0	12	12	13	0	15~

 // appended to ABCLSMOD.2da
 ~C0SABAR2				0	0	0	0	0	0~

 // appended to ABDCDSRQ.2da
 ~C0SABAR2                		0       0       0       0       0       0~

 // appended to ABDCSCRQ.2da
 ~C0SABAR2                 	0       0       0       0       0		0~

 // appended to ALIGNMNT.2da
 ~C0SABAR2                  	0       0       0       0       1	1       0       1       0~

 // appended to DUALCLAS.2da
 ~C0SABAR2                  	0       0       0       0       0       0~

 // path to your CLAB-style 2da file 
 ~%MOD_FOLDER%/2da/blankclab.2da~

 // PC races and classes allowed to use this kit, from KITTABLE.2da
 ~K_B_H K_B_E K_B_HE K_B_HL K_B_G K_B_D K_B_HO~

 // usability flags, added to the end of the KITLIST.2da entry
 ~0x00004000     5~

 // HLA table to use; see LUABBR.2da
 ~C0SA~

 // list of starting equipment for PCs starting in ToB. Appended column-wise to 25STWEAP.2da
 ~* * * BAG29 RING06 RING40 * BOOT01 AMUL21 BRAC15 BELT10 AROW11,40 BULL03,40 BOLT06,40 POTN52,5 POTN04,2 POTN14,5 SLNG05 DAGG05,20 STAF20~

 // Lower, mixed, and help kit names and descriptions, added to KITLIST.2da
  SAY ~nightsinger~
  SAY ~Nightsinger~
  SAY @10006

LAF fl#add_kit_ee
  INT_VAR
	biography = RESOLVE_STR_REF (~There is a dark secret hidden within the walls of Candlekeep, forbidden to be spoken of among the scribes and monks even in hushed voices. A well of shadow magic, fueled by darkness and loss, shunned by most practitioners of the arcane arts. Such powers originate from the realm of the Shadow Weave, the distorted mockery of Mystra's Weave created by Shar, the Nightsinger. So obscure is this power that most are unaware of its existence, and those that know of it refuse to acknowledge it due to its dark origins. However, the seductive whispers of this power has called to you, an apprentice mage who had barely mastered your first cantrip, since a young age, deep beneath the great library.

When the voices became too much to resist, you snuck into the depths of Candlekeep in the dead of night, where unwanted and dangerous secrets are left to rot. Inside of a once-sealed chamber stood a strange fountain, an open wound in the Prime Material Plane through which the energies of the Shadow Weave bled. As soon as you touched the eerie yet beautiful strands of magic that flowed from the wound, you felt an awakening as your connection to the Weave was severed and the power of Shar's dark Weave coursed through you in its place, bestowing upon you a magic that few are gifted with. As you matured, the growing magic within you developed a symbiotic connection until it became one with your very being, and the power of the Shadow Weave became subservient to your will. Gorion and your tutors grew wary of the strange magic that you wielded, though they never learned of the source. Though you knew the dangers of toying with Shar's domain were great, the temptation of such a little-known power in your hands were a thousand times worth the cost.~)
  STR_VAR
    kit_name = C0SABAR2
	hpclass = ~HPROG~
	clascolr = ~27 136 119 21 187~
	clsrcreq = ~1 1 1 1 1 1 1~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur.bcs~ THEN BEGIN
EXTEND_TOP ~baldur.bcs~ ~%MOD_FOLDER%/scripts/c0satal3.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdbaldur.bcs~ THEN BEGIN
EXTEND_TOP ~bdbaldur.bcs~ ~%MOD_FOLDER%/scripts/c0satal3.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur25.bcs~ THEN BEGIN
EXTEND_TOP ~baldur25.bcs~ ~%MOD_FOLDER%/scripts/c0satal3.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~c0saorb.d~ THEN BEGIN
EXTEND_TOP ~c0saorb.bcs~ ~%MOD_FOLDER%/scripts/c0saorb3.baf~
END

COPY ~%MOD_FOLDER%/spells/c0sahlac.spl~ ~override~
SAY NAME1 ~Light's Requiem~
SAY NAME2 ~Light's Requiem~
SAY UNIDENTIFIED_DESC ~Light's Requiem
This dark hymn is a powerful aid to the Nightsinger. The song gives the Nightsinger <PRO_HIMHER>self a 10-point bonus to <PRO_HISHER> Armor Class, 25% Magic Resistance and +5 to all saving throws. The song also inflicts a -5 penalty to THAC0, damage, saving throws and morale to all nearby foes.

This ability replaces the current Bard Song.~

COPY ~%MOD_FOLDER%/spells/c0sabrds.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0sason2.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0sasong.spl~ ~override~
      END
      ACTION_IF ("bard" = 2) THEN BEGIN
      END

// PROJECTILES

ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0pro10a.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj01.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj2d.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj2c.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj2b.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj2a.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj02.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj03.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj04.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj05.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj06.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj07.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj08.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0pro08a.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj09.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj10.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj11.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj12.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj13.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj14.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj15.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj16.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj17.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj18.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj19.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj20.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj21.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj22.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj23.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0proj24.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0negeb.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0weird.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0nightk.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0sasper.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0sarain.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0sawall.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0cflame.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0blizza.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0oblivi.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0pandem.PRO~

COPY ~%MOD_FOLDER%/spells/c0proj08.pro~ ~override~
SAY 0x21A ~c0pro08a~

COPY ~%MOD_FOLDER%/spells/c0proj10.pro~ ~override~
SAY 0x21A ~c0pro10a~

////////////////////////////////////////
//////////SPELLS////////////////////////
////////////////////////////////////////

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv11.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %C0SALV1a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv12.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %C0SALV1b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv13.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %C0SALV1c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv14.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %C0SALV1d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv15.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %C0SALV1e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv16.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %C0SALV1f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv21.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv2a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv22.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv2b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv23.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv2c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv24.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv2d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv25.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv2e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv26.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv2f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv31.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv3a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv32.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv3b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv33.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv3c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv34.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv3d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv35.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv3e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv36.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv3f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv41.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv4a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv42.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv4b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv43.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv4c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv44.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv4d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv45.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv4e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv46.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv4f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv51.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv5a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv52.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv5b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv53.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv5c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv54.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv5d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv55.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv5e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv56.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv5f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv61.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv6a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv62.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv6b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv63.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv6c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv64.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv6d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv65.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv6e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv66.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv6f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv71.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv7a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv72.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv7b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv73.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv7c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv74.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv7d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv75.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv7e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv76.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv7f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv81.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv8a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv82.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv8b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv83.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv8c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv84.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv8d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv85.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv8e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv86.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv8f%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv91.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv9a%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv92.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv9b%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv93.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv9c%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv94.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv9d%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv95.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv9e%
END

COPY ~%MOD_FOLDER%/spells/c0salv11.spl~ ~override/c0salv96.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 206
	STR_VAR
	  resource = %c0salv9f%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv1a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV11%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv1b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV12%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv1c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV13%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv1d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV14%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv1e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV15%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv1f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV1%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV16%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv2a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV21%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv2b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV22%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv2c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV23%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv2d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV24%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv2e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV25%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv2f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV2%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV26%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv3a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV31%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv3b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV32%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv3c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV33%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv3d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV34%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv3e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV35%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv3f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV3%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV36%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv4a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV41%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv4b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV42%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv4c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV43%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv4d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV44%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv4e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV45%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv4f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV4%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV46%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv5a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV51%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv5b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV52%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv5c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV53%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv5d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV54%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv5e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV55%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv5f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV5%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV56%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv6a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV61%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv6b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV62%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv6c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV63%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv6d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV64%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv6e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV65%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv6f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV6%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV66%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv7a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV71%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv7b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV72%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv7c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV73%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv7d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV74%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv7e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV75%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv7f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV7%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV76%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv8a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV81%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv8b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV82%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv8c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV83%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv8d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV84%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv8e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV85%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv8f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV8%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV86%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/c0salv9a.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV91%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/C0SALV9b.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV92%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/C0SALV9c.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV93%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/C0SALV9d.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV94%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/C0SALV9e.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV95%
END

COPY ~%MOD_FOLDER%/spells/c0salv1.spl~ ~override/C0SALV9f.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 309
	STR_VAR
	  resource = %C0SALV9%
END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 146
	STR_VAR
	  resource = %C0SALV96%
END

COPY ~%MOD_FOLDER%/spells/c0saint1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter2 = 131
	  parameter2 = %C0SAINT%
END

COPY ~%MOD_FOLDER%/spells/c0sainta.spl~ ~override/c0saint7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 1
END

COPY ~%MOD_FOLDER%/spells/c0sainta.spl~ ~override/c0saint8.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 2
END

COPY ~%MOD_FOLDER%/spells/c0saintb.spl~ ~override/c0saint9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 2
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 1
END

COPY ~%MOD_FOLDER%/spells/c0saintb.spl~ ~override/c0saint0.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 3
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 1
END

COPY ~%MOD_FOLDER%/spells/c0saintb.spl~ ~override/c0sainta.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 3
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 2
END

COPY ~%MOD_FOLDER%/spells/c0saintb.spl~ ~override/c0saintb.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 4
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 2
END

COPY ~%MOD_FOLDER%/spells/c0saintb.spl~ ~override/c0saintc.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 4
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 3
END

COPY ~%MOD_FOLDER%/spells/c0saintb.spl~ ~override/c0saintd.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 191
	  parameter1 = 4
END
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 189
	  parameter1 = 4
END

COPY ~%MOD_FOLDER%/spells/c0sawis1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter2 = 131
	  parameter2 = %C0SAWIS%
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis3.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 45
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis4.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 40
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis5.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 35
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis6.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 30
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 25
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis8.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 20
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis9.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 15
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawis0.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 10
END

COPY ~%MOD_FOLDER%/spells/c0sawis2.spl~ ~override/c0sawisa.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 50
	  parameter1 = 5
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisb.spl~
COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisc.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 110
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisd.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 115
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawise.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 120
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisf.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 125
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisg.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 130
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawish.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 135
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisi.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 140
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisj.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 145
END

COPY ~%MOD_FOLDER%/spells/c0sawis3.spl~ ~override/c0sawisk.spl~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_parameter1 = 105
      parameter1 = 150
END

COPY ~%MOD_FOLDER%/spells/c0sacon.cre~ ~override~
  WRITE_ASCII 0x248 ~c0sacon~ #8
  WRITE_ASCII 0x280 ~c0sacon~  #32

COPY ~%MOD_FOLDER%/spells/c0sadept.spl~ ~override~

COPY ~%MOD_FOLDER%/spells/C0SA1.spl~ ~override~
SAY NAME1 ~Shield of Shadows~
SAY NAME2 ~Shield of Shadows~
SAY UNIDENTIFIED_DESC ~Shield of Shadows
The shadow adept surrounds <HIMHER>self with a barrier of purpleblack force. This shield of shadows functions like a shield spell, setting <HISHER> armor class to 4 (2 against ranged weapons) and absorbing magic missiles cast at him for 1 hour per 2 levels to a maximum of 9 hours.~

COPY ~%MOD_FOLDER%/spells/C0SA2.spl~ ~override~
SAY NAME1 ~Shadow Double~
SAY NAME2 ~Shadow Double~
SAY UNIDENTIFIED_DESC ~Shadow Double
The shadow adept creates a copy of himself out of shadowstuff. The copy is at 60% of the caster's level and has all the spells and abilities that the caster would have at that level.~

COPY ~%MOD_FOLDER%/spells/C0SA101.spl~ ~override~
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 1
		projectile = c0proj2d
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 2
		projectile = c0proj2c
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 3
		projectile = c0proj2b
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 4
		projectile = c0proj2a
END
  LPF ALTER_SPELL_HEADER
	INT_VAR
		header = 5
		projectile = c0proj02
END
SAY NAME1 ~Shadow Missile~
SAY NAME2 ~Shadow Missile~
SAY UNIDENTIFIED_DESC ~Shadow Missile
(Invocation/Evocation - Shadow Weave)

Level: 1
Range: Visual range of the caster
Duration: Instant
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None 

The shadow adept launches a missile of energy that unerringly strikes the target for 1d4 magic damage (+1 cold) and reduces the target's THAC0 by 1 for 3 rounds. An additional missile is launched for every 2 levels of the caster to a maximum of five missiles (5d4+5 damage and -5 THAC0) at level 9.~

COPY ~%MOD_FOLDER%/spells/C0SA102.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Doomed~)
END
SAY NAME1 ~Sigil of Despair~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj01%~
END
SAY NAME2 ~Sigil of Despair~
SAY UNIDENTIFIED_DESC ~Sigil of Despair
(Alteration - Shadow Weave)

Level: 1
Range: 25 ft.
Duration: 1 turn
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: None

This spell causes a feeling of doom to overwhelm the target. For the duration of the spell, the target receives a -2 penalty to all <PRO_HISHER> rolls, including THAC0 and Saving Throws. Additionally, the target suffers a -1 penalty to all statistics. There is no Saving Throw for this spell, and it is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA103.spl~ ~override~
SAY NAME1 ~Blinding Darkness~
SAY NAME2 ~Blinding Darkness~
SAY UNIDENTIFIED_DESC ~Blinding Darkness
(Illusion/Phantasm - Shadow Weave)

Level: 1
Range: 40 ft.
Duration: 2 hours
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: Neg.

This 1st-level spell temporarily blinds its target. A Saving Throw at -2 penalty is allowed and, if successful, there are no harmful effects. If a victim is blinded, <PRO_HESHE> receives a -4 penalty to <PRO_HISHER> attack rolls and Armor Class.~

COPY ~%MOD_FOLDER%/spells/C0SA104.spl~ ~override~
SAY NAME1 ~Deep Slumber~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj03%~
END
SAY NAME2 ~Deep Slumber~
SAY UNIDENTIFIED_DESC ~Deep Slumber
(Enchantment/Charm - Shadow Weave)

Level: 1
Range: Visual range of the caster
Duration: 5 rounds/level 
Casting Time: 1 
Area of Effect: 30-ft. radius
Saving Throw: Neg.

When a shadow adept casts Deep Slumber, <PRO_HESHE> causes a comatose slumber to come upon one or more enemies (other than undead and certain other creatures specifically excluded from the spell's effects). All creatures to be affected by Deep Slumber must be within a 30-ft. radius. Creatures in the area of effect must make a Saving Throw vs. Death with a -3 penalty or fall asleep. Monsters with 5 Hit Dice or more are unaffected. Attacks against sleeping opponents never miss.

At 9th level, targets above 4 Hit Dice may be affected though with no saving throw penalty.~

COPY ~%MOD_FOLDER%/spells/C0SA105.spl~ ~override~
SAY NAME1 ~Bittercold Touch~
SAY NAME2 ~Bittercold Touch~
SAY UNIDENTIFIED_DESC ~Bittercold Touch
(Necromancy - Shadow Weave)

Level: 1
Range: 0
Duration: 1 turn
Casting Time: 1
Area of Effect: The creature
Saving Throw: Neg.

When the caster completes this spell, <PRO_HISHER> hand sucks in all light. This energy attacks the life force of any living creature upon which the shadow adept makes a successful melee attack (+4 bonus to hit). (Nonliving creatures such as golems and undead are unaffected by this spell.) The creature is punched for 1d2 fist damage (Strength bonuses apply) and must make a Saving Throw vs. Spell or suffer 1d8 points of cold damage and become Chilled for 3 rounds. Chilled creatures suffer a -2 penalty to Armor Class and THAC0 and move at half of their normal rate. Non-living creatures, such as undead or constructs, must instead make a Saving Throw vs. Spell at -2 or suffer 1d10 magic damage and do not become Chilled.~

COPY ~%MOD_FOLDER%/spells/C0SA105a.spl~ ~override~
LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Chilled~)
  END

COPY ~%MOD_FOLDER%/spells/C0SA106.spl~ ~override~
SAY NAME1 ~Essence Drain~
SAY NAME2 ~Essence Drain~
SAY UNIDENTIFIED_DESC ~Essence Drain
(Necromancy - Shadow Weave)

Level: 1
Range: 30 ft.
Duration: Special
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

With this spell, the shadow adept drains the life force from a target and adds it to <PRO_HISHER> own. The target creature suffers 2 points of magical damage + 2 points per 2 levels of the caster to a maximum of 10 total at 9th level while the shadow adept gains an equal amount of Hit Points. If the shadow adept goes over <PRO_HISHER> maximum Hit Point total with this spell, <PRO_HESHE> loses any extra Hit Points after 1 turn.

If the target is slain, the amount of health gained by the caster is doubled.~

COPY ~%MOD_FOLDER%/spells/C0SA107.spl~ ~override~
SAY NAME1 ~Shadow Veil~
SAY NAME2 ~Shadow Veil~
SAY UNIDENTIFIED_DESC ~Shadow Veil
(Abjuration - Shadow Weave)

Level: 1
Range: 0
Duration: 9 hours
Casting Time: 9
Area of Effect: The caster
Saving Throw: None

By means of this spell, the shadow adept creates a magical field of force that serves as armor, increasing the caster's armor class by 1 point per 3 levels of the caster up to a maximum of +4 at level 13. It is cumulative with Dexterity bonuses to Armor Class. The veil is invisible, does not hinder movement, adds no weight or encumbrance, and doesn't prevent spellcasting. It lasts until successfully dispelled or until its duration expires.

Additionally, whenever the caster suffers damage while the shadow veil is active, <PRO_HESHE> has a 5% chance to turn invisible for 2 rounds.~

COPY ~%MOD_FOLDER%/spells/C0SA107a.spl~ ~override~

COPY ~%MOD_FOLDER%/spells/C0SA108.spl~ ~override~
SAY NAME1 ~Curse~
SAY NAME2 ~Curse~
SAY UNIDENTIFIED_DESC ~Curse
(Conjuration/Summoning - Shadow Weave)

Level: 1
Range: Sight
Duration: 1 turn
Casting Time: 1 round
Area of Effect: 30 ft. radius
Saving Throw: None

When the Curse spell is uttered, the caster lowers the morale of enemy creatures and penalizes their saving throws and attack rolls by -1. At the instant the spell is completed, it affects all creatures in a 30 ft. radius centered on the point selected by the caster (thus, affected creatures leaving the area are still subject to the spell's effects; those entering the area after the casting is completed are not. This spell is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA109.spl~ ~override~
SAY NAME1 ~Shadow Rope~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj15%~
END
SAY NAME2 ~Shadow Rope~
SAY UNIDENTIFIED_DESC ~Shadow Rope
(Conjuration/Summoning - Shadow Weave)

Level: 1
Range: Visual range of the caster
Duration: Special
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell creates a shadowy thread which wraps itself around the caster's target and pulls them towards the caster. It deals no damage, but the target is immobilized for the duration and is unable to attack or use spells for one round.~

COPY ~%MOD_FOLDER%/spells/C0SA110.spl~ ~override~
SAY NAME1 ~Decoy~
SAY NAME2 ~Decoy~
SAY UNIDENTIFIED_DESC ~Decoy
(Illusion/Phantasm - Shadow Weave)

Level: 1
Range: Visual range of caster
Duration: 1 round
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell briefly conjures a projection of the caster next to <PRO_HIMHER> while turning invisible for 1 round.~

COPY ~%MOD_FOLDER%/spells/C0SA111.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Mesmerized~)
  END
SAY NAME1 ~Mesmerize~
SAY NAME2 ~Mesmerize~
SAY UNIDENTIFIED_DESC ~Mesmerize
(Enchantment/Charm - Shadow Weave)

Level: 1
Range: Visual range of caster
Duration: 1 turn
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell inflicts an enchantment upon a target creature of the shadow adept's choice. If the target fails a Save vs. Spells at -4, they are pacified for one turn, ceasing all action and remaining still for the duration. The target also suffers a -6 penalty to Armor Class due to being too mentally unfocused to actively dodge attacks. However, the target will break free of its enchantment prematurely if they are attacked.~

COPY ~%MOD_FOLDER%/spells/C0SA112.spl~ ~override~
SAY NAME1 ~Shadow Rope~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0cflame%~
END
SAY NAME1 ~Cursed Flames~
SAY NAME2 ~Cursed Flames~
SAY UNIDENTIFIED_DESC ~Cursed Flames
(Alteration - Shadow Weave)

Level: 1
Range: 5 ft.
Duration: Special
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: 1/2

When the shadow adept casts this spell, a jet of searing flame shoots from <PRO_HISHER> fingertips. The shadow adept's hands must be held so as to send forth a fanlike sheet of flames: <PRO_HISHER> thumbs must touch each other and the fingers must be spread. The burning hands send out flame jets of 5 ft. length in a horizontal arc of about 120 degrees in front of the shadow adept. All targets within range take 1d4+2 fire damage and have their Luck reduced by two points for 2 rounds + 1 round per level to a maximum of 10 rounds at 9th level, additionally, they take 2 points of fire damage per round for the duration. A successful Saving Throw vs. Spells negates half damage and the secondary effects.~

COPY ~%MOD_FOLDER%/spells/C0SA201.spl~ ~override~
SAY NAME1 ~Dark Mirage~
SAY NAME2 ~Dark Mirage~
SAY UNIDENTIFIED_DESC ~Dark Mirage
(Illusion/Phantasm - Shadow Weave)

Level: 2
Range: 0
Duration: 1 hour
Casting Time: 2
Area of Effect: The caster
Saving Throw: None

When Dark Mirage is cast, the shadow adept causes the outline of <PRO_HISHER> form to become blurred, shifting and wavering. This distortion causes all missile and melee attacks against the caster to be made with a -3 penalty. The shadow adept also gains a +1 bonus to all of <PRO_HISHER> Saving Throws. Additionally, the caster causes from 2 to 8 exact duplicates of <PRO_HIMHER>self to come into being around <PRO_HIMHER>. These images do exactly what the shadow adept does. Since the spell causes a blurring and slight distortion when cast, it is impossible for opponents to be certain which are the illusions and which is the actual shadow adept. When an image is struck by a melee or missile attackmagical or otherwiseit disappears, but any other existing images remain intact until they are struck. However, it is important to note that this will not protect the caster against every attack, as it is possible for an enemy to choose the real caster amongst all the images.~

COPY ~%MOD_FOLDER%/spells/C0SA202.spl~ ~override~
SAY NAME1 ~Night Terrors~
SAY NAME2 ~Night Terrors~
SAY UNIDENTIFIED_DESC ~Night Terrors
(Necromancy - Shadow Weave)

Level: 2
Range: 40 ft.
Duration: 1 turn
Casting Time: 2
Area of Effect: 30-ft. radius
Saving Throw: Neg.

All enemies within the area of effect when this spell is cast must Save vs. Spell at -2 or flee in terror. Certain creatures are immune to the effects of fear, including all undead.

From 14th level onwards, this spell gains the effects of the 6th level wizard spell Death Spell: creatures below 8 Hit Dice and all summoned creatures will die instantly from overwhelming fear. (no saving throw)~

COPY ~%MOD_FOLDER%/spells/C0SA203.spl~ ~override~
SAY NAME1 ~Dark Fortune~
SAY NAME2 ~Dark Fortune~
SAY UNIDENTIFIED_DESC ~Dark Fortune
(Enchantment/Charm - Shadow Weave)

Level: 2
Range: 15 ft.
Duration: 1 hour
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

The recipient of this spell gains extraordinary luck for the next hour, receiving a +1 bonus to <PRO_HISHER> Saving Throws, attack rolls, and minimum damage/healing rolls as well as +5% to all thieving skills. Furthermore, damage dice for all effects outside a weapon's base damage is reduced by 1. For example, a 6d6 fireball will do 6d5 damage, and a flaming long sword that deals 1d8+2 slashing plus 1d3 fire damage will deal 1d8+2 slashing plus 1d2 fire damage instead. This spell also makes the target immune to effects that reduce luck, such as Doom or Greater Malison.~

COPY ~%MOD_FOLDER%/spells/C0SA204.spl~ ~override~
SAY NAME1 ~Power Word: Sleep~
SAY NAME2 ~Power Word: Sleep~
SAY UNIDENTIFIED_DESC ~Power Word, Sleep
(Conjuration/Summoning - Shadow Weave)

Level: 2
Range: 90 ft.
Duration: 5 rounds
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

When a shadow adept calls upon a Power Word, Sleep spell, <PRO_HESHE> causes a comatose slumber to come upon 1 creature (other than undead and certain other creatures specifically excluded from the spell's effects). The creature targeted must have less than 20 Hit Points and gets no Saving Throw. Magically sleeping opponents can be attacked with substantial bonuses. The Sleep effect will last for 5 rounds. This spell has no effect on creatures with more than 20 Hit Points.

At 10th level, creatures above 20 Hit Points are put to sleep for 2 rounds. This spell is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA205.spl~ ~override~
SAY NAME1 ~Dread Silence~
SAY NAME2 ~Dread Silence~
SAY UNIDENTIFIED_DESC ~Dread Silence
(Alteration - Shadow Weave)

Level: 2
Range: Visual range of the caster
Duration: 2 rounds/level
Casting Time: 5
Area of Effect: 15-ft. radius sphere
Saving Throw: Neg. 

Upon casting this spell, complete silence prevails in the affected area. All sound is stopped: Conversation is impossible and spells cannot be cast. Each creature in the area must make a Saving Throw vs. Spell with a -5 penalty; if the save is failed then they are silenced for the duration of the spell. Note that this spell does not continue to affect the area after being cast; only those in the area at the time of the casting are affected by the silence. Only the caster is immune to the spell's effects - both allies and enemies can be affected.~

COPY ~%MOD_FOLDER%/spells/C0SA206.spl~ ~override~
SAY NAME1 ~Ghostly Visage~
SAY NAME2 ~Ghostly Visage~
SAY UNIDENTIFIED_DESC ~Ghostly Visage
(Illusion/Phantasm - Shadow Weave)

Level: 2
Range: Self
Duration: 1 turn/level
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

The caster is surrounded by a ghostly nimbus of light that grants 10% resistance to physical damage and prevents all level 1 spells from affecting <PRO_HIMHER>.~

COPY ~%MOD_FOLDER%/spells/C0SA208.spl~ ~override~
SAY NAME1 ~Black Mist~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj16%~
END
SAY NAME2 ~Black Mist~
SAY UNIDENTIFIED_DESC ~Black Mist
(Illusion/Phantasm - Shadow Weave)

Level: 2
Range: 90 ft.
Duration: 1 turn
Casting Time: 2
Area of Effect: 30' radius
Saving Throw: Neg.

When this spell is cast, a thick shadowy mist spreads across the area selected by the caster. Any creatures caught within the mist must make a Save vs. Spells at -2 at the beginning of each round or become blinded for that round, receiving a -4 penalty to their Armor Class and attack rolls and greatly reducing their vision range. Those who make successful Saving Throws can leave the mist without suffering any ill effects, although those remaining in the mist must continue to save each round. A Dispel Magic will remove the blindness on a particular character, but if they remain in the mist, then they are still subject to its effects.~

COPY ~%MOD_FOLDER%/spells/C0SA209.spl~ ~override~
SAY NAME1 ~Negative Energy Ray~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj06%~
END
SAY NAME2 ~Negative Energy Ray~
SAY UNIDENTIFIED_DESC ~Negative Energy Ray
(Necromancy - Shadow Weave)

Level: 2
Range: 15 ft.
Duration: 1 turn
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: None

Upon casting this spell, a black ray appears at the caster's fingertips and bursts out towards one target of the caster's choice. That target will be hit by the ray for 3d6 points of magical damage and suffers a -1 penalty to Armor Class, THAC0 and damage for 1 turn. The ray strikes a second time halfway through its duration, dealing the same amount of damage and applying a second instance of penalties. The caster may move while the spell is in effect. There is no saving throw against this spell's effects.~

COPY ~%MOD_FOLDER%/spells/C0SA210.spl~ ~override~
SAY NAME1 ~Sigil of Vulnerability~
SAY NAME2 ~Sigil of Vulnerability~
SAY UNIDENTIFIED_DESC ~Sigil of Vulnerability
(Enchantment/Charm - Shadow Weave)

Level: 2
Range: 30 ft.
Duration: 1 round/level
Casting Time: 1 round
Area of Effect: 1 creature
Saving Throw: Neg.

This spell curses the target creature with mortality. For as long as the curse is in effect, the target loses 1% resistance to physical damage per level of the caster and is unable to be healed by any magical means. A Saving Throw vs. Spells negates the effect.~

ACTION_IF GAME_IS ~bgee~
THEN BEGIN
COPY ~%MOD_FOLDER%/eff/ohbcwou1.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou2.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou3.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou4.eff~ ~override~
COPY ~%MOD_FOLDER%/eff/ohbcwou5.eff~ ~override~
END

COPY ~%MOD_FOLDER%/spells/C0SA211.spl~ ~override~
SAY NAME1 ~Shadow Walk~
SAY NAME2 ~Shadow Walk~
SAY UNIDENTIFIED_DESC ~Shadow Walk
(Alteration - Shadow Weave)

Level: 2
Range: 0
Duration: Instant
Casting Time: 1
Area of Effect: The caster
Saving Throw: None

This spell transports the caster to any place within the visual range of the caster. When the spell is cast, the shadow adept makes a brief planar jaunt into the Plane of Shadow and exits at a different location, making it seem as though <PRO_HESHE> has teleported. The caster is also briefly invisible for the travel duration, cancelling spells targeted at <PRO_HIMHER> unless the spellcaster can see through invisibility.~

COPY ~%MOD_FOLDER%/spells/C0SA212.spl~ ~override~
SAY NAME1 ~Hallucinate~
SAY NAME2 ~Hallucinate~
SAY UNIDENTIFIED_DESC ~Hallucinate
(Illusion/Phantasm - Shadow Weave)

Level: 2
Range: Visual range of the caster
Duration: 1 round/level
Casting Time: 5 
Area of Effect: 1 person or mammal 
Saving Throw: Neg.

The target of this spell must make a Saving Throw vs. Spell or come under its effects. When under the effects of the Hallucinate spell, the victim experiences a disruption of their senses causing them to perceive something that is not actually there, causing them to randomly wander, attack the nearest person, or stand confused.~

COPY ~%MOD_FOLDER%/spells/C0SA301.spl~ ~override~
SAY NAME1 ~Blackfire Arrow~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj04%~
END
SAY NAME2 ~Blackfire Arrow~
SAY UNIDENTIFIED_DESC ~Blackfire Arrow
(Conjuration/Summoning - Shadow Weave)

Level: 3
Range: 60 ft.
Duration: Instant
Casting Time: 3
Area of Effect: Special
Saving Throw: 1/2

This spell enables the caster to hurl coldfire bolts at multiple opponents within range. Each bolt inflicts 1d6 points of cold damage plus 4d6 points of fire damage. Only half of the fire damage is inflicted if the creature struck saves vs. Spell. The caster receives one bolt every 5 levels beyond the 5th (2 bolts at 10th level, 3 at 15th level, etc.). Each arrow may be targeted individually towards any chosen target.~

COPY ~%MOD_FOLDER%/spells/C0SA302.spl~ ~override~
SAY NAME1 ~Shadowblast~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj05%~
END
SAY NAME2 ~Shadowblast~
SAY UNIDENTIFIED_DESC ~Shadowblast
(Invocation/Evocation - Shadow Weave)

Level: 3
Range: 40 ft.
Duration: Instant
Casting Time: 3
Area of Effect: 30-ft. radius
Saving Throw: 1/2 

The shadow adept launches an unstable mass of shadowstuff which explodes, dealing 1d3 points of cold damage and 1d3 points of magic damage for every level of the caster (to a maximum of 10d6) and penalizes their saving throws and attack rolls by -1 per 10 levels of the caster (-2 at 10th level, -3 at 20th level, etc.) for 1 turn. Creatures who pass their saving throw (-1 penalty per 5 levels) avoid the direct blast taking no magic damage or stat loss.

From 10th level onwards, targets damaged by Shadowblast lose 20% resistance to cold and magic damage for 1 turn.~

COPY ~%MOD_FOLDER%/spells/C0SA303.spl~ ~override~
SAY NAME1 ~Inertia~
SAY NAME2 ~Inertia~
SAY UNIDENTIFIED_DESC ~Inertia
(Alteration - Shadow Weave)

Level: 3
Range: 25 ft.
Duration: 1 turn
Casting Time: 3
Area of Effect: 30-ft. radius
Saving Throw: Neg.

This spell causes creatures to move and attack at half of their normal rates. It negates Haste, but does not otherwise affect magically hasted or slowed creatures. Slowed creatures have an Armor Class and attack penalty of -4. Creatures save at -4 vs. Spell. Targets must also make an initial Save vs. Spells or be slowed to a halt, becoming held for 1 round.~

COPY ~%MOD_FOLDER%/spells/C0SA304.spl~ ~override~
SAY NAME1 ~Lifedrinker Touch~
SAY NAME2 ~Lifedrinker Touch~
SAY UNIDENTIFIED_DESC ~Lifedrinker Touch
(Necromancy - Shadow Weave)

Level: 3
Range: Touch
Duration: Instant 
Casting Time: 3 
Area of Effect: 1 creature
Saving Throw: None 

When this spell is cast, the target loses 1d6 Hit Points for every 2 caster levels, to a maximum drain of 6d6 for a 12th-level caster. In addition, the target transfers 3 points of either Strength, Dexterity or Constitution to the caster. The Hit Points are added to the caster's current Hit Points, with any Hit Points over the caster's normal maximum treated as temporary additional Hit Points. The temporary Hit Points and statistics last for 1 hour.

Note: This spell may not be cast multiple times to radically increase the caster's Hit Points. The caster must wait for the first Lifedrinker Touch spell to run its course before casting another.~
COPY ~%MOD_FOLDER%/spells/C0SA304a.spl~ ~override~

COPY ~%MOD_FOLDER%/spells/C0SA305.spl~ ~override~
SAY NAME1 ~Beguile~
SAY NAME2 ~Beguile~
SAY UNIDENTIFIED_DESC ~Beguile
(Enchantment/Charm - Shadow Weave)

Level: 3
Range: 60 ft.
Duration: 5 rounds
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: Neg. 

This spell works in the exact same manner as Charm Person, with one difference: There is no Saving Throw bonus. Dire Charm affects any single person it is cast upon. The term person includes any bipedal human, demihuman, or humanoid of man-size or smaller, such as brownies, dryads, dwarves, elves, gnolls, gnomes, goblins, half-elves, halflings, half-orcs, hobgoblins, humans, kobolds, lizard men, nixies, orcs, pixies, sprites, troglodytes, and others. Thus, a 10th-level fighter could be charmed, but an ogre could not. The person is allowed a Saving Throw vs. Spell to negate the effect.

If the spell's recipient fails <PRO_HISHER> Saving Throw, <PRO_HESHE> regards the caster as a trusted friend and ally to be heeded and protected. The caster may give <PRO_HIMHER> orders, and the charmed individual will carry them out as quickly as possible.

If the caster harms - or attempts to harm - the charmed person by some overt action, or if a Dispel Magic spell is cast upon the charmed person, the Dire Charm spell is broken. If two or more Charms simultaneously affect a creature, the most recent Charm takes precedence. Note that the subject has full memory of the events that took place while <PRO_HESHE> was charmed. Also note that you cannot have a charmed creature leave the area where <PRO_HESHE> is charmed.

The saving throw penalty increases by -1 for every 5 caster levels.~

COPY ~%MOD_FOLDER%/spells/C0SA306.spl~ ~override~
SAY NAME1 ~Shadow Comets~
SAY NAME2 ~Shadow Comets~
SAY UNIDENTIFIED_DESC ~Shadow Comets
(Invocation/Evocation - Shadow Weave)

Level: 3
Range: 0
Duration: Special
Casting Time: 3
Area of Effect: The caster
Saving Throw: None

This spell creates several small globes of shadowy matter, two for each experience level of the shadow adept, which are held in <PRO_HISHER> hands in place of <PRO_HISHER> usual weapons. The meteors can be hurled at targets up to 270 feet away and are treated as missiles with a +5 bonus to the attack rolls. Each meteor bursts into a 1-ft. diameter sphere upon impact, inflicting 1d4+3 points of damage plus an additional 3 points of cold damage to any creature struck. The shadow adept may hurl up to five missiles per round.~

COPY ~%MOD_FOLDER%/spells/c0meteor.itm~ ~override~
SAY NAME1 ~Shadow Comets~
SAY NAME2 ~Shadow Comets~

COPY ~%MOD_FOLDER%/spells/C0SA307.spl~ ~override~
SAY NAME1 ~Shadow Binding~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj18%~
END
SAY NAME2 ~Shadow Binding~
SAY UNIDENTIFIED_DESC ~Shadow Binding
(Enchantment/Charm - Shadow Weave)

Level: 3
Range: 35 ft.
Duration: 1 turn
Casting Time: 3
Area of Effect: 1 creature and any enemy within 7.5 ft.
Saving Throw: Neg. 

This spell holds 1d4 humans, demihumans, or humanoid creatures rigidly immobile and in place for five or more rounds. Shadow Binding affects any bipedal human, demihuman, or humanoid of mansize or smaller, including brownies, dryads, dwarves, elves, gnolls, gnomes, goblins, half-elves, halflings, half-orcs, hobgoblins, humans, kobolds, lizard men, nixies, orcs, pixies, sprites, troglodytes, and others. Thus, a 10th-level fighter could be held, while an ogre could not. The effect is centered on the victim selected by the caster. Every enemy within 7.5 ft. of the target is also affected. Those who Save vs. Spell at -4 are totally unaffected by the spell. Undead creatures cannot be held.

Held creatures cannot move or speak, but they remain aware of events around them and can use abilities not requiring motion or speech. Being held does not prevent the worsening of the subjects' condition due to wounds, disease, or poison.~

COPY ~%MOD_FOLDER%/spells/C0SA308.spl~ ~override~
SAY NAME1 ~Impose~
SAY NAME2 ~Impose~
SAY UNIDENTIFIED_DESC ~Impose
(Invocation/Evocation - Shadow Weave)

Level: 3
Range: 30 ft.
Duration: 1 round
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

This spell launches a blast of invisible force towards a target, dealing 3d6 crushing damage and knocking them away from the caster as well as stunning them for 1 round. There is no saving throw.~

COPY ~%MOD_FOLDER%/spells/C0SA309.spl~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
SAY UNIDENTIFIED_DESC ~Shadow Spear
(Invocation/Evocation - Shadow Weave)

Level: 3
Range: 70 ft.
Duration: Special
Casting Time: 5
Area of Effect: Path of spear
Saving Throw: Neg.

Upon casting this spell, a spear made of shadowstuff forms in the caster's hands, which can be thrown once towards a target of the caster's choosing. The spear pierces through all targets in its path, dispelling all of the spell protections of 5th level and lower affecting it. This includes the following spells: Minor Spell Deflection, Minor Globe of Invulnerability, Spell Immunity, and Minor Spell Turning. If no such spells protect the targets, the spear instead deals 5d6 and inflicts an additional effect dependent on the caster's level.

5th level and below: Reduces targets' Armor Class by two points for five rounds
8th-10th level: Reduces targets' saving throws and THAC0 by 1 point for five rounds
11th-13th level: Halves targets' Dexterity for one turn
14th-16th level: Drains two levels from targets for one turn
17th level and above: Instantly kills targets

Targets may make a Saving Throw vs. Death to avoid all secondary effects.~

COPY ~%MOD_FOLDER%/spells/c0sa309a.itm~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY ~%MOD_FOLDER%/spells/c0sa309b.itm~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY ~%MOD_FOLDER%/spells/c0sa309c.itm~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY ~%MOD_FOLDER%/spells/c0sa309d.itm~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY ~%MOD_FOLDER%/spells/c0sa309e.itm~ ~override~
SAY NAME1 ~Shadow Spear~
SAY NAME2 ~Shadow Spear~
WRITE_SHORT 0x9C ~%c0sasper%~

COPY ~%MOD_FOLDER%/spells/C0SA310.spl~ ~override~
SAY NAME1 ~Cursed Earth~
SAY NAME2 ~Cursed Earth~
SAY UNIDENTIFIED_DESC ~Cursed Earth
(Conjuration - Shadow Weave)

Level: 3
Range: 90 ft.
Duration: 1 turn
Casting Time: 4
Area of Effect: 30' radius
Saving Throw: Neg.

This spell creates a zone of blackened, poisonous earth within a 30' radius. All creatures standing within the area must make a Saving Throw vs. Death at -4 each round or suffer 2d4 poison damage and have their movement rate halved.~

COPY ~%MOD_FOLDER%/spells/c0sa311.spl~ ~override~
SAY NAME1 ~Expunge Magic~
SAY NAME2 ~Expunge Magic~
SAY UNIDENTIFIED_DESC ~Expunge Magic
(Abjuration - Shadow Weave)

Level: 3
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: 30-ft. radius
Saving Throw: None

A Expunge Magic spell removes magical effects upon anyone within the area. This includes effects given from spells, potions and certain magical items such as wands. It does not, however, affect enchanted magical items or spell protections such as Spell Turning and Spell Deflection. The chance of the dispel succeeding is determined by the effective level of the caster and the level of the magic being dispelled (Expunge Magic is cast as though at 1.5x the caster's actual level). The base chance of successfully dispelling is 50%. For every level that the caster of the Expunge Magic is above the original caster, <PRO_HISHER> chance of success increases by 5%. For every level that the caster of Expunge Magic is below the original caster, <PRO_HISHER> chance of success decreases by 10%. However, despite the difference in levels, there is always at least a 5% chance of success or failure. Thus, if a caster is 10 levels higher than the magic <PRO_HESHE> is trying to dispel, there is only a 5% chance of failure. Similarly if the caster is 4 levels lower than the magic <PRO_HESHE> is trying to dispel, there is only a 10% chance of success. Intuitively, this spell is almost useless if the target is 5 or more levels higher than the caster.

Note: While this spell dispels the individual effects of Grease, Web, Stinking Cloud, and other such spells, it does not dispel the area of effect.~

COPY ~%MOD_FOLDER%/spells/C0SA312.spl~ ~override~
SAY NAME1 ~Void Edge~
SAY NAME2 ~Void Edge~
SAY UNIDENTIFIED_DESC ~Void Edge
(Invocation/Evocation - Shadow Weave)

Level: 3
Range: Self
Duration: 1 turn
Casting Time: 2
Area of Effect: Self
Saving Throw: None

Upon casting this spell, the shadow adept imbues <PRO_HISHER> next melee attack with shadow magic, providing it with a +5 enchantment bonus and the ability to drain 2 hit points per level as magic damage.~

COPY ~%MOD_FOLDER%/spells/C0SA401.spl~ ~override~
SAY NAME1 ~Fire Shield (Shadow)~
SAY NAME2 ~Fire Shield (Shadow)~
SAY UNIDENTIFIED_DESC ~Fireshield (Shadow) 
(Invocation/Evocation, Alteration - Shadow Weave)

Level: 4
Range: 0
Duration: 3 rounds + 1 round/level
Casting Time: 4 
Area of Effect: The caster 
Saving Throw: None 

The shadow fireshield protects the user from cold damage by surrounding the caster with a shield of black flame. This shield not only grants the user 50% resistance to cold, but also protects the caster from attacks made within a 5-ft. radius around the caster. An opponent that hits the caster with any weapons or spells within this radius suffers 1d8+2 cold damage and reduces the attacker's THAC0 by one point for 6 rounds (cumulative).~

COPY ~%MOD_FOLDER%/spells/C0SA402.spl~ ~override~
SAY NAME1 ~Shadeskin~
SAY NAME2 ~Shadeskin~
SAY UNIDENTIFIED_DESC ~Shadeskin
(Alteration - Shadow Weave)

Level: 4
Range: 0
Duration: 12 hours
Casting Time: 1
Area of Effect: The caster
Saving Throw: None 

When a shadow adept casts this powerful spell upon <PRO_HIMHER>self, an outer skin of shadowstuff will move up from the ground, completely covering <PRO_HIMHER>. This skin is of course magical and will hinder the shadow adept in no way. The effect of this is to protect the shadow adept from physical attacks such as melee weapons and projectiles. For every 2 levels of the caster, an additional skin is gained upon casting. For example, a 10th-level shadow adept would receive 5 skins while a 20th-level shadow adept would receive 10. For each skin the shadow adept possesses, the spell will stop one attack, so a 10th-level shadow adept would be protected from the first 5 attacks made against <PRO_HIMHER>, but the 6th would affect <PRO_HIMHER> normally. The skins will remain on the shadow adept until <PRO_HESHE> is affected by a Dispel Magic, all of the skins are removed due to physical attacks, or the spell duration expires. It is important to note that this will not protect the shadow adept from any magical attacks, such as Fireball.

Additionally, so long as at least one layer of Shadeskin is active, the shadow adept gains 25% resistance to acid, cold, fire, electrical and magic damage.~

COPY ~%MOD_FOLDER%/spells/C0SA403.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 44916
 parameter1 = RESOLVE_STR_REF (~Saving Throws Lowered~)
 END
SAY NAME1 ~Sigil of Misfortune~
SAY NAME2 ~Sigil of Misfortune~
SAY UNIDENTIFIED_DESC ~Sigil of Misfortune
(Enchantment/Charm - Shadow Weave)

Level: 4
Range: 50 ft.
Duration: 2 rounds/level
Casting Time: 4
Area of Effect: 30-ft. radius
Saving Throw: None

The spell allows the caster to adversely affect all the Saving Throws of <PRO_HISHER> enemies. The effect is applied to all hostile creatures within the area of effect. Opponents under the influence of this spell make all Saving Throws and attack rolls at a penalty of -4.

This spell is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA404.spl~ ~override~
SAY NAME1 ~Summon Shadow~
SAY NAME2 ~Summon Shadow~
SAY UNIDENTIFIED_DESC ~Summon Shadow
(Necromancy - Shadow Weave)
Level: 4
Range: Long
Duration: 2 hours
Casting Time: 1 round
Area of Effect: Special
Saving Throw: None

By means of this spell, the caster summons a number of shadows, undead monsters which serve the mage under any conditions. The type and number of creatures that appear depend upon the level of the shadow adept casting the spell.

7th: 3 shadows
9th: 3 shadow fiends
12th+ : 3 wraiths
16th+ : 2 wraiths, 1 devil shade

The undead creatures will remain under the shadow adept's control until they are slain or the spell duration expires.~

COPY ~%MOD_FOLDER%/spells/c0devsha.cre~ ~override~
SAY NAME1 ~Devil Shade~
SAY NAME2 ~Devil Shade~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~c0devsha~ #8
  WRITE_ASCII 0x280 ~c0devsha~  #32

COPY ~%MOD_FOLDER%/spells/c0shadsu.cre~ ~override~
SAY NAME1 ~Shadow~
SAY NAME2 ~Shadow~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x280 ~c0shadow~  #32

COPY ~%MOD_FOLDER%/spells/c0shadfi.cre~ ~override~
SAY NAME1 ~Shadow Fiend~
SAY NAME2 ~Shadow Fiend~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x280 ~c0shadfi~  #32

COPY ~%MOD_FOLDER%/spells/c0wraith.cre~ ~override~
SAY NAME1 ~Wraith~
SAY NAME2 ~Wraith~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x280 ~c0wraith~  #32

COPY ~%MOD_FOLDER%/spells/C0SA405.spl~ ~override~
SAY NAME1 ~Shar's Blessing~
SAY NAME2 ~Shar's Blessing~
SAY UNIDENTIFIED_DESC ~Shar's Blessing
(Invocation/Evocation - Shadow Weave)

Level: 4
Range: 0
Duration: 1 round/level
Casting Time: 6
Area of Effect: The caster
Saving Throw: None

Through this spell, the caster draws upon energy from the Plane of Shadow to imbue <PRO_HIMHER>self with the strength and skill of a Fighter of the same level. The shadow adept's Strength score is increased by four points, <PRO_HISHER> THAC0 becomes that of a Fighter of the same level, <PRO_HESHE> gains one extra attack per round and <PRO_HESHE> gains 1 temporary Hit Point per level. This will last for the duration of the spell or until dispelled.

From 14th level onwards, the caster's attacks per round are doubled instead.~

COPY ~%MOD_FOLDER%/spells/C0SA406.spl~ ~override~
SAY NAME1 ~Phantasmal Killer~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj13%~
END
SAY NAME2 ~Phantasmal Killer~
SAY UNIDENTIFIED_DESC ~Phantasmal Killer
(Illusion/Phantasm - Shadow Weave)

Level: 4
Range: Visual range of the caster
Duration: Permanent
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: Special

The caster creates a phantasmal image of the most fearsome creature imaginable to the subject simply by forming the fears of the subjects subconscious mind into something that its conscious mind can visualize: this most horrible beast. Only the spells subject can see the phantasmal killer. The target first gets a Save vs. Spells to recognize the image as unreal. If that save fails, the phantasm touches the subject, and the subject must succeed on a Save vs. Death at +2 or die from fear. Even if the second save is successful, the subject takes 3d6 points of damage.~

COPY ~%MOD_FOLDER%/spells/C0SA408.spl~ ~override~
SAY NAME1 ~Dread Whispers~
SAY NAME2 ~Dread Whispers~
SAY UNIDENTIFIED_DESC ~Dread Whispers
(Illusion/Phantasm - Shadow Weave)

Level: 4
Range: 30 ft.
Duration: 5 rounds
Casting Time: 9
Area of Effect: 30 ft. radius
Saving Throw: None

Dread Whispers causes all enemies within range to become afflicted by an ominous chorus of voices infesting their mind. The voices are distracting, causing 50% spell failure on targets. In addition, at the beginning of every round after the first, the target must make a Save vs. Spell at -2 or lose morale, running in panic for 1 round.~

COPY ~%MOD_FOLDER%/spells/C0SA409.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  match_parameter1 = 25802
	  parameter1 = RESOLVE_STR_REF (~One Level Drained~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  match_parameter1 = 25803
	  parameter1 = RESOLVE_STR_REF (~Two Levels Drained~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  match_parameter1 = 25804
	  parameter1 = RESOLVE_STR_REF (~Three Levels Drained~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  match_parameter1 = 25805
	  parameter1 = RESOLVE_STR_REF (~Four Levels Drained~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 267
	  match_parameter1 = 25806
	  parameter1 = RESOLVE_STR_REF (~Five Levels Drained~)
  END
SAY NAME1 ~Immunity~
SAY NAME2 ~Immunity~
SAY UNIDENTIFIED_DESC ~Immunity
(Abjuration - Shadow Weave)

Level: 4
Range: Touch
Duration: 1 turn/level
Casting Time: 5
Area of Effect: 1 creature
Saving Throws: None

This spell grants the target immunity to blindness, fear, sleep, confusion and level drain for 1 turn per level of the caster.~

COPY ~%MOD_FOLDER%/spells/C0SA410.spl~ ~override~
SAY NAME1 ~Black Ooze~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj14%~
END
SAY NAME2 ~Black Ooze~
SAY UNIDENTIFIED_DESC ~Black Ooze
(Conjuration - Shadow Weave)

Level; 4
Range: Visual range of the caster
Duration: 1 turn
Casting Time: 3
Area of Effect: 1 creature and any enemy within 7.5 ft.
Saving Throw: 1/2

With this spell, the shadow adept conjures a glob of shadowy, vaporous ooze from the Plane of Shadow and drops it on the target, dealing 6d6 acid damage to them and any nearby targets, holding them for 1 round (no save) then slowing them and reducing their magic resistance by 20% for 1 turn. Targets who make a Saving Throw vs. Death at -2 take half damage and avoid the secondary effects. This spell ignores magic resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA411.spl~ ~override~
SAY NAME1 ~Wall of Black Flame~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0sawall%~
END
SAY NAME2 ~Wall of Black Flame~
SAY UNIDENTIFIED_DESC ~Wall of Black Flame
(Invocation/Evocation - Shadow Weave)

Level: 4
School: Evocation
Range: Long
Duration: 1 turn
Casting Time: 3
Area of Effect: 10'
Saving Throw: 1/2

With this spell, the shadow adept creates a wall of black fire, dealing 2d6 fire damage to all creatures who pass through it (Save vs. Spells for half) and reduces their Armor Class by -2 for one round. Creatures cannot take damage more than once per round.~

COPY ~%MOD_FOLDER%/spells/C0SA412.spl~ ~override~
SAY NAME1 ~Pain Mirror~
SAY NAME2 ~Pain Mirror~
SAY UNIDENTIFIED_DESC ~Pain Mirror
(Necromancy - Shadow Weave)

Level; 4
Range: Visual range of the caster
Duration: 1 turn
Casting Time: 7
Area of Effect: 1 creature
Saving Throw: None

When the caster is struck with an attack, <PRO_HESHE> takes no damage and drains 1d4 hit points per level from the attacker instead. It only works for one attack, and the effects are not cumulative (you cannot have more than one mirror erected). If the spell is not triggered, it lasts for 1 turn.~

COPY ~%MOD_FOLDER%/spells/C0SA501.spl~ ~override~
SAY NAME1 ~Cone of Bitter Cold~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj07%~
END
SAY NAME2 ~Cone of Bitter Cold~
SAY UNIDENTIFIED_DESC ~Cone of Bitter Cold
(Invocation/Evocation - Shadow Weave)

Level: 5
Range: 0
Duration: Instant
Casting Time: 5
Area of Effect: Special
Saving Throw: 1/2

When this spell is cast, it generates a cone-shaped area of freezing ice originating at the shadow adept's hand and extending outward in a cone 5 ft. long and 1 ft. in diameter per level of the caster. It drains heat and causes 1d4+1 points of damage per level of the caster. For example, a 10th-level shadow adept would cast a cone of cold 10 ft. in diameter and 50 ft. in length, causing 10d4+10 points of damage (Save vs. Spell at -2 for half). Targets who fail their saving throw are also slowed and take 1d6 extra cold damage per round for 4 rounds.~

COPY ~%MOD_FOLDER%/spells/C0SA502.spl~ ~override~
SAY NAME1 ~Shadow Assault~
SAY NAME2 ~Shadow Assault~
SAY UNIDENTIFIED_DESC ~Shadow Assault
(Illusion/Phantasm - Shadow Weave)

Level: 5
Range: 0
Duration: 9 rounds + 1 round/level after 9th
Casting Time: 2
Area of Effect: The caster
Saving Throw: None

This spell is similar to Invisibility, but the recipient is able to attack by missile discharge, melee combat, or spellcasting while remaining unseen. However, telltale traces - a shimmering - allow an observant opponent to attack the invisible spell recipient. These traces are only noticeable when specifically looked for (after the invisible character has made <PRO_HISHER> presence known). Attacks against the invisible character suffer a -4 penalty to attack rolls, and the invisible character's Saving Throws are made with a +4 bonus. For the duration of the spell, the shadow adept is also able to backstab with a x2 multiplier, increased to x3 at level 14 and x4 at level 21.

Additionally, the caster's movement rate is doubled, allowing for a quick retreat from battle if necessary.

Note: After making an attack, the shadow adept is no longer completely invisible. Opponents can target the shadow adept.~

COPY ~%MOD_FOLDER%/spells/C0SA503.spl~ ~override~
SAY NAME1 ~Breaching Dark~
SAY NAME2 ~Breaching Dark~
SAY UNIDENTIFIED_DESC ~Breaching Dark
(Abjuration - Shadow Weave)

Level: 5
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: None

When this spell is cast at a creature, it breaches and dispels all of the specific and combat protections on the target creature. Here is a complete list of all the specific protection spells that are dispelled by Breach: Shield, Protection Circle, Resist Fear, Protection From Fire/Cold, Fireshield, Protection From Acid, Protection From Electricity, Protection From Magic Energy, Protection From The Elements, and Protection From Energy. The combat protection spells dispelled by Breach are Protection From Normal Missiles, Protection From Normal Weapons, Protection From Magical Weapons, Stoneskin, Iron Skins, Armor, Ghost Armor, Spirit Armor, Absolute Immunity, Mantle, and Improved Mantle. The target's Magic Resistance, if any, does not affect this spell. Additionally, this spell also lower's the opponent's magic resistance by 10% + 1% per level of the caster.~

COPY ~%MOD_FOLDER%/spells/C0SA504.spl~ ~override~
SAY NAME1 ~Shadow Blade~
SAY NAME2 ~Shadow Blade~
SAY UNIDENTIFIED_DESC ~Shadow Blade
(Invocation/Evocation - Shadow Weave)

Level: 5
Range: 0
Duration: 2 turns
Casting Time: 5
Area of Effect: Special
Saving Throw: None

This spell creates a translucent, shadow-like, weightless area of shadowstuff extending from the fingers of one of the caster's hands. The silent, blade-shaped construct's cutting edges inflict damage just as those of a real sword do. The Shadow Sword's power increases with the caster's level, upgrading once every 7 caster levels.

Shadow Sword +3:
 - 5% chance to cast Essence Drain on hit
 - 2% chance to cast Shadow Binding on hit
 - Cold Resistance: +50%
 - Wielded as though Specialized in long swords

THAC0: +3
Damage: 1d8+3, 3 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Shadow Sword +4:
 - 5% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 2% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +50%
 - Wielded as though Mastery with long swords

THAC0: +4
Damage: 1d8+4, 4 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Shadow Sword +5:
 - 10% chance to cast Essence Drain on hit
 - 5% chance to cast Shadow Binding on hit
 - 5% chance to cast Nightshade on hit
 - 1 extra attack per round
 - Cold Resistance: +75%
 - Wielded as though High Mastery with long swords

THAC0: +5
Damage: 1d8+5, 5 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed

Shadow Sword +6:
 - 20% chance to cast Essence Drain on hit
 - 10% chance to cast Shadow Binding on hit
 - 10% chance to cast Nightshade on hit
 - 2% chance to cast Death Mark on hit
 - 1 extra attack per round
 - Cold Resistance: +100%
 - Wielded as though Grand Mastery with long swords

THAC0: +6
Damage: 1d8+6, 6 cold (slashing)
Speed Factor: 2
Proficiency Type: Long Sword
Type: One-handed~

COPY ~%MOD_FOLDER%/spells/c0blade.itm~ ~override~
SAY NAME1 ~Shadow Blade +3~
SAY NAME2 ~Shadow Blade +3~

COPY ~%MOD_FOLDER%/spells/C0SA505.spl~ ~override~
SAY NAME1 ~Sigil of Madness~
SAY NAME2 ~Sigil of Madness~
SAY UNIDENTIFIED_DESC ~Sigil of Madness
(Enchantment/Charm - Shadow Weave)

Level: 5
Range: 35 ft.
Duration: 5 rounds + 1 round/6 levels
Casting Time: 4
Area of Effect: 30-ft. radius
Saving Throw: Special

The effects of this spell are identical to the 5th-level spell Chaos in all respects, except this spell ignores magic resistance. The victims wander around as if in a daze, sometimes wandering away, sometimes attacking either friend or foe. If the victim is 4th level or lower, <PRO_HESHE> does not receive a Saving Throw vs. the effects. However, if the victim is 5th level or higher, <PRO_HESHE> receives a Save vs. Spell with a -4 penalty. The spell lasts for the duration or until a successful Dispel Magic is cast.~

COPY ~%MOD_FOLDER%/spells/C0SA506.spl~ ~override~
SAY NAME1 ~Shar's Memory Drain~
SAY NAME2 ~Shar's Memory Drain~
SAY UNIDENTIFIED_DESC ~Shar's Memory Drain
(Enchantment - Shadow Weave)

Level: 5
Range: 40 ft.
Duration: 5 rounds
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: None

This powerful spell erases a portion of the target's memory, weakening them. All saving throws are reduced by 2 and arcane casters lose two memorized spells and have their casting time increased by 2. After 5 rounds, the target must make a Save vs. Spells at -4 or suffer the same effects a second time.~

COPY ~%MOD_FOLDER%/spells/C0SA507.spl~ ~override~
SAY NAME1 ~Unmask~
SAY NAME2 ~Unmask~
SAY UNIDENTIFIED_DESC ~Unmask
(Divination - Shadow Weave)

Level: 5
Range: 0
Duration: Instant
Casting Time: 5
Area of Effect: 235-ft. radius
Saving Throw: None

When this spell is cast, an area roughly 30 feet in radius around the caster will be affected. All hostile illusion/phantasm spells in this area will be dispelled and all traps are revealed. This spell only affects one's enemies.

The spells that are affected by this are: Reflected Image, Invisibility, Blur, Mirror Image, Ghost Armor, Invisibility Sphere, Improved Invisibility, Shadow Door, Pixie Dust, Mislead, Project Image, and Mass Invisibility.~

COPY ~%MOD_FOLDER%/spells/C0SA508.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~9% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 2
 parameter1 = RESOLVE_STR_REF (~10% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 3
 parameter1 = RESOLVE_STR_REF (~11% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 4
 parameter1 = RESOLVE_STR_REF (~12% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 5
 parameter1 = RESOLVE_STR_REF (~13% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 6
 parameter1 = RESOLVE_STR_REF (~14% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 7
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 8
 parameter1 = RESOLVE_STR_REF (~16% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 9
 parameter1 = RESOLVE_STR_REF (~17% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 10
 parameter1 = RESOLVE_STR_REF (~18% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 11
 parameter1 = RESOLVE_STR_REF (~19% of maximum hit points lost~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 12
 parameter1 = RESOLVE_STR_REF (~20% of maximum hit points lost~)
  END
SAY NAME1 ~Nightshade~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj22%~
END
SAY NAME2 ~Nightshade~
SAY UNIDENTIFIED_DESC ~Nightshade
(Necromancy - Shadow Weave)

Level: 5
Range: 90 ft.
Duration: Permanent
Casting Time: 4
Area of Effect: 1 creature
Saving Throw: 1/2

When this spell is cast, the target suffers damage equal to 2% of their maximum hit points per level of the caster up to a maximum of 40%. The target may make a Saving Throw vs. Death at -2 to take half damage.~

COPY ~%MOD_FOLDER%/spells/C0SA509.spl~ ~override~
SAY NAME1 ~Shadow Chain~
SAY NAME2 ~Shadow Chain~
SAY UNIDENTIFIED_DESC ~Shadow Chain
(Conjuration/Summoning - Shadow Weave)

Level: 5
Range: Visual range of the caster
Duration: Special
Casting Time: 1
Area of Effect: 30 ft. radius
Saving Throw: None

This spell creates several shadowy threads which wraps itself around all enemies in a 30 ft. radius from the center of the caster's targeted location. and pulls them towards the caster. It deals no damage, but targets become immobilized for the duration and are unable to attack or use spells for one round.~

COPY ~%MOD_FOLDER%/spells/C0SA509a.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj15%~
END

COPY ~%MOD_FOLDER%/spells/C0SA510.spl~ ~override~
SAY NAME1 ~Void Blast~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj24%~
END
SAY NAME2 ~Void Blast~
SAY UNIDENTIFIED_DESC ~Void Blast
(Invocation/Evocation - Shadow Weave)

Level: 5
Range: 90 ft.
Duration: 1d4 rounds
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: Neg.

With this spell, the shadow adept launches a bolt of energy at a targeted creature. The target takes 2d6 magical damage, and if it fails a Save vs. Spells at -2, is banished to a pocket realm for 1d4 rounds and upon returning takes another 2d6 magical damage and is stunned for 2 rounds.~

COPY ~%MOD_FOLDER%/spells/C0SA510A.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END

COPY ~%MOD_FOLDER%/spells/C0SA510B.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END

COPY ~%MOD_FOLDER%/spells/C0SA510C.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END

COPY ~%MOD_FOLDER%/spells/C0SA510D.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Banished~)
  END
  
COPY ~%MOD_FOLDER%/spells/C0SA511.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 26230
 parameter1 = RESOLVE_STR_REF (~Protected by Shadow Screen~)
  END
SAY NAME1 ~Shadow Screen~
SAY NAME2 ~Shadow Screen~
SAY UNIDENTIFIED_DESC ~Shadow Screen
(Abjuration - Shadow Weave)

Level: 5
Range: 0
Duration: 2 hours
Casting Time: 8
Area of Effect: The caster
Saving Throw: None

When this spell is cast, the shadow adept is protected from the next magical attack against <PRO_HIMHER>. The spells from which the shadow adept is protected are Dispel/Remove Magic, Spell Thrust, Secret Word, Breach, Lower Resistance, Pierce Magic, Ruby Ray, Khelben's Warding Whip, Pierce Shield, and Spellstrike. If one of these spells is cast at the shadow adept, this spell activates and absorbs the attack. However, this only works once and this spell is consumed in the process. Otherwise, it will last for its duration.~

COPY ~%MOD_FOLDER%/spells/C0SA512.spl~ ~override~
SAY NAME1 ~Summon Nighthaunt~
SAY NAME2 ~Summon Nighthaunt~
SAY UNIDENTIFIED_DESC ~Summon Nighthaunt
(Conjuration/Summoning)

Level: 5
Range: 45 ft.
Duration: 1 turn + 1 round/level
Casting Time: 8
Area of Effect: Special
Saving Throw: None

This spell conjures forth a nighthaunt, an undead monster from the Shadow Plane. Nighthaunts are deadly creatures that emit an aura of desecration, reducing the THAC0 and damage of all nearby living creatures by two points while increasing THAC0 and damage of all undead creatures by two points. Its natural weapon is capable of draining two levels on hit and strikes as a +4 weapon. However, nighthaunts are greatly weakened in natural daylight. From 14th level onwards, two nighthaunts are summoned instead.

The nighthaunt is fully under the control of the caster for the duration of the spell and will follow all of <PRO_HISHER> orders until the duration has expired.~

COPY ~%MOD_FOLDER%/spells/c0nighth.cre~ ~override~
SAY NAME1 ~Nighthaunt~
SAY NAME2 ~Nighthaunt~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x248 ~c0nighth~ #8
  WRITE_ASCII 0x280 ~c0nighth~  #32

COPY ~%MOD_FOLDER%/spells/C0SA601.spl~ ~override~
SAY NAME1 ~Shar's Shield~
SAY NAME2 ~Shar's Shield~
SAY UNIDENTIFIED_DESC ~Shar's Shield
(Abjuration - Shadow Weave)

Level: 6
Range: 0
Duration: 1 round/level
Casting Time: 6
Area of Effect: 5-ft. radius sphere
Saving Throw: None

This spell creates an immobile, faintly shimmering magical sphere around the caster that prevents any 1st-, 2nd-, 3rd-, or 4th-level spell effects from penetrating (i.e., the area of effect of any such spells does not include the area of the Globe of Invulnerability). This includes innate abilities and effects from devices. However, any type of spell can be cast out of the magical sphere, and these pass from the caster of the globe to their subject without affecting the globe. 5th- and higher level spells are not affected by the globe, and magical attacks of 5th-level or higher, such as Spellstrike and Pierce Magic, can bring it down.

Additionally, the shadow adept gains 20% magic resistance as long as the globe is up.~

COPY ~%MOD_FOLDER%/spells/C0SA602.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 60481
 parameter1 = RESOLVE_STR_REF (~Misled~)
 END
SAY NAME1 ~Twin Mislead~
SAY NAME2 ~Twin Mislead~
SAY UNIDENTIFIED_DESC ~Twin Mislead
(Illusion/Phantasm - Shadow Weave)

Level: 6
Range: 0
Duration: 1 round/level
Casting Time: 1
Area of Effect: Special
Saving Throw: None

When this spell is cast, the shadow adept is affected by an Improved Invisibility spell and is teleported a few feet away from <PRO_HISHER> original position. Meanwhile, an exact image of the caster is created where <PRO_HESHE> used to be, with exactly the same Hit Points as the caster. The image cannot perform any actions at all, such as attacking or casting spells. It can, however, move around and act as a decoy for the invisible shadow adept. The image will remain under control of the caster until reduced to 0 Hit Points, or until affected by a Dispel Magic or a spell that reveals illusions, such as True Sight.

After 3 rounds have passed, a second decoy is spontaneously created, regardless of whether or not the first has been destroyed.~

COPY ~%MOD_FOLDER%/spells/C0SA602a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 60481
 parameter1 = RESOLVE_STR_REF (~Misled~)
 END

COPY ~%MOD_FOLDER%/spells/C0SA603.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 7609
 parameter1 = RESOLVE_STR_REF (~Protected from Magical Weapons~)
 END
SAY NAME1 ~Protection from Weave-forged Weapons~
SAY NAME2 ~Protection from Weave-forged Weapons~
SAY UNIDENTIFIED_DESC ~Protection From Weave-forged Weapons
(Abjuration - Shadow Weave)

Level: 6
Range: 0
Duration: 4 rounds
Casting Time: 1
Area of Effect: The caster
Saving Throw: None 

When the spell is cast, it confers complete invulnerability to all magical weapons created using Weave magic. This includes weapons that are blessed or enchanted. The attacks of powerful monsters are also considered magical weapons. This spell cannot be cast on anyone who is protected from normal weapons as well as anyone protected by Mantle, Improved Mantle, or Absolute Immunity. Due to the nature of this spell, with the short casting time and duration, it is mainly used to buy the shadow adept a few rounds in the thick of combat. This effect lasts for the duration of the spell or until dispelled.~

COPY ~%MOD_FOLDER%/spells/C0SA604.spl~ ~override~
SAY NAME1 ~Power Word: Silence~
SAY NAME2 ~Power Word: Silence~
SAY UNIDENTIFIED_DESC ~Power Word, Silence
(Conjuration/Summoning - Shadow Weave)

Level: 6
Range: 90 ft.
Duration: 7 rounds
Casting Time: 1
Area of Effect: 1 creature
Saving Throw: None

In using this spell, the shadow adept points at an individual and utters the Power Word. For the next 7 rounds, that creature cannot make any sound. This silence completely foils any spells that require verbal components. The only ways to counter this spell are either a Dispel Magic or a Vocalize spell. There is no Saving Throw and the spell ignores magic resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA605.spl~ ~override~
SAY NAME1 ~Black Lightning~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj08%~
END
SAY NAME2 ~Black Lightning~
SAY UNIDENTIFIED_DESC ~Black Lightning 
(Invocation/Evocation - Shadow Weave)

Level: 6
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: Special 
Saving Throw: 1/2 

When the shadow adept casts Black Lightning, arcs of electrical energy burst from <PRO_HISHER> fingertips. These brilliant arcs of lightning leap at all enemies near the caster, burning them with electrical and fire damage. The lightning causes 1d6 points of damage for every 2 levels of the caster and causes targets to go berserk for 3 rounds. If the target of the lightning saves vs. Spell, they avoid berserking and only half damage is inflicted. Thus, a 12th-level shadow adept will cause 6d6 (half electrical, half fire) damage to a victim (3d6 electrical if the victim makes <PRO_HISHER> Saving Throw vs. Spell).~

COPY ~%MOD_FOLDER%/spells/C0SA606.spl~ ~override~
SAY NAME1 ~Shatter Weave~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj17%~
END
SAY NAME2 ~Shatter Weave~
SAY UNIDENTIFIED_DESC ~Shatter Weave
(Invocation/Evocation - Shadow Weave)

Level: 6
Range: 40 ft.
Duration: Instant
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: 1/2 

When this spell is cast upon a target creature there will be two major effects. The first is that it will dispel one spell protection of 8th level or lower from the creature. This will always dispel the highest level of spell protection on the target first. If the target has two or more protections tied for the highest level, the choice will be random. The second effect of the spell is that the creature's magic resistance is temporary nullified. The resistance remains lowered for 2 rounds, and this effect cannot be negated in any way. Additionally, mages will take 4d10 magic damage and suffer from a 50% chance of spell failure for 2 rounds. Spells affected by Pierce Magic are Minor Spell Deflection, Minor Spell Turning, Spell Deflection, Spell Turning, Minor Globe of Invulnerability, Spell Immunity, and Globe of Invulnerability. The target's magic resistance, if any, does not affect this spell.~

COPY ~%MOD_FOLDER%/spells/C0SA607.spl~ ~override~
SAY NAME1 ~Umbral Blades~
SAY NAME2 ~Umbral Blades~
SAY UNIDENTIFIED_DESC ~Umbral Blades
(Invocation/Evocation - Shadow Weave)

Level: 6 
Range: Self
Duration: 1 turn
Casting Time: 9
Area of Effect: Special
Saving Throw: Special

The shadow adept employs this spell to set up a ring of circling, razor sharp blades. These whirl and flash around the caster, providing a bonus of 4 Armor Class against melee weapons and dealing damage to enemies in range every round. Any creature attempting to pass through the blades will suffer 6d8 points of damage and lose 1 point of Strength for 1 turn. Creatures within the area of the barrier when it is invoked are entitled to a Saving Throw vs. Spell to negate the damage. The barrier remains for 1 turn.~

COPY ~%MOD_FOLDER%/spells/C0SA608.spl~ ~override~
SAY NAME1 ~Disintegrate~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj19%~
END
SAY NAME2 ~Disintegrate~
SAY UNIDENTIFIED_DESC ~Disintegrate
(Alteration - Shadow Weave)

Level: 6
Range: Visual range of the caster
Duration: Instant
Casting Time: 6
Area of Effect: 1 creature
Saving Throw: Neg.

When this spell is cast at another creature, a thin purple ray is shot out. Upon contact with the ray, the creature must make a Saving Throw vs. Spell at -2 or be transformed into dust. This transformation is instantaneous and irreversible. There is also a good chance that this will destroy some if not all of the items that the creature is carrying.

Targets slain by this spell will be raised as a wraith under the caster's allegiance for 5 turns.~

COPY ~%MOD_FOLDER%/spells/C0SA609.spl~ ~override~
SAY NAME1 ~Black Rose~
SAY NAME2 ~Black Rose~
SAY UNIDENTIFIED_DESC ~Black Rose
(Conjuration/Summoning - Shadow Weave)

Level: 6
Range: Visual range of the caster
Duration: 1 turn
Casting Time: 5
Area of Effect: 1 creature
Saving Throw: 1/2

This spell conjures a thorned, magical rose that wraps itself around the caster's chosen target, dealing 6d6 plus 20% of the target's maximum hit points as piercing damage. If the target fails a Saving Throw vs. Spells at -6, they become entangled for 1 turn, receiving a -2 penalty to Armor Class, THAC0 and casting time. Additionally, the target must make another Save vs. Spells every round or suffer an additional 2d6 piercing damage until the rose vanishes.~

COPY ~%MOD_FOLDER%/spells/C0SA610.spl~ ~override~
SAY NAME1 ~Disintegrate~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0negeb%~
END
SAY NAME1 ~Negative Energy Burst~
SAY NAME2 ~Negative Energy Burst~
SAY UNIDENTIFIED_DESC ~Negative Energy Burst
(Necromancy - Shadow Weave)

Level: 6
Range: 30 ft.
Duration: 1 turn
Casting Time: 6
Area of Effect: 20 ft. radius
Saving Throw: None

Upon casting this spell, a burst of negative energy engulfs the area targeted by the caster. All enemies within the radius take 6d6 magical damage and suffer a -3 penalty to Armor Class, THAC0 and damage for 1 turn. There is no saving throw against this spell's effects.~

COPY ~%MOD_FOLDER%/spells/C0SA611.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 326
      match_parameter2 = 0
	  parameter2 = %C0SA611%
END
SAY NAME1 ~Devour Dream~
SAY NAME2 ~Devour Dream~
SAY UNIDENTIFIED_DESC ~Devour Dream
(Enchantment/Charm - Shadow Weave)

Level: 6
Range: Touch
Duration: Instant
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

This spell may only affect sleeping targets. Upon casting the spell, the shadow adept consumes the target's thoughts, dealing 10d8 magical damage and restoring up to five of the caster's previously cast spells. The target is always woken up after the effects of this spell.

Devour Dream cannot recall 6th-level or greater spells.~

COPY ~%MOD_FOLDER%/spells/C0SA701.spl~ ~override~
SAY NAME1 ~Black Ray of Destruction~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj17%~
END
SAY NAME2 ~Black Ray of Destruction~
SAY UNIDENTIFIED_DESC ~Black Ray of Destruction
(Alteration - Shadow Weave)

Level: 7
Range: 40 ft.
Duration: Instant
Casting Time: 2
Area of Effect: 1 creature
Saving Throw: None

When this spell is cast, it dispels one spell protection of any level affecting the target creature. The spells affected by the Black Ray of Destruction are Minor Spell Turning, Minor Globe of Invulnerability, Spell Immunity, Globe Of Invulnerability, Minor Spell Deflection, Spell Turning, Spell Shield, Spell Deflection, and Spell Trap. This will always remove the highest-level spell protection affecting the target; if more than one same-level protection is active on the target simultaneously, one of them will be randomly chosen and dispelled. Additionally, this spell creates a small dead magic zone around the target, preventing the target from casting spells for 5 rounds. The target's Magic Resistance, if any, does not affect this spell.~

COPY ~%MOD_FOLDER%/spells/C0SA702.spl~ ~override~
SAY NAME1 ~Shadowspray~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj09%~
END
SAY NAME2 ~Shadowspray~
SAY UNIDENTIFIED_DESC ~Shadowspray
(Conjuration/Summoning - Shadow Weave)

Level: 7
Range: 60 ft.
Duration: Instant
Casting Time: 4
Area of Effect: 70-ft.-long cone 
Saving Throw: Special

When casting this spell, the shadow adept unleashes a wave of shadow fire from <PRO_HISHER> hand. Any creature with fewer than 8 Hit Dice struck by a wave is blinded for 5 rounds, regardless of any other effect. Additionally, the fire is chaotic in nature, and may cause random effects as per the Prismatic Spray spell:

  - Inflicts 20 points of damage; Save vs. Spell for half.
  - Inflicts 40 points of damage; Save vs. Spell for half.
  - Inflicts 80 points of damage; Save vs. Spell for half.
  - Save vs. Poison or die; survivors take 20 points of poison damage.
  - Save vs. Petrification or be turned to stone.
  - Save vs. Wand or be feebleminded.
  - Save vs. Spell or be disintegrated.~
  
COPY ~%MOD_FOLDER%/spells/C0SA703.spl~ ~override~
SAY NAME1 ~Power Word: Stun~
SAY NAME2 ~Power Word: Stun~
SAY UNIDENTIFIED_DESC ~Power Word, Stun
(Conjuration/Summoning - Shadow Weave)

Level: 7
Range: Visual range of the caster 
Duration: Special
Casting Time: 1 
Area of Effect: 1 creature 
Saving Throw: None

When a Power Word, Stun spell is uttered, any creature of the Mage's choice within visual range is stunned for the duration depending on its current Hit Points: 
 1 to 29 Hit Points: Stunned for 4d4 rounds; 
 30 to 59 Hit Points: Stunned for 2d4 rounds; 
 60 to 89 Hit Points: Stunned for 1d4 rounds; 
 90 or more Hit Points: unaffected.
Note that if a creature is weakened so that its Hit Points are below its usual maximum, the current number of Hit Points is used to determine this spell's effects. This spell ignores magic resistance.~

COPY ~%MOD_FOLDER%/spells/c0morsw.cre~ ~override~
SAY NAME1 ~Magical Sword~
SAY NAME2 ~Magical Sword~

COPY ~%MOD_FOLDER%/spells/C0SA704.spl~ ~override~
SAY NAME1 ~Sword of the Night~
SAY NAME2 ~Sword of the Night~
SAY UNIDENTIFIED_DESC ~Sword of the Night
(Invocation/Evocation - Shadow Weave)

Level: 7
Range: 0
Duration: 1 round/level
Casting Time: 7
Area of Effect: Special
Saving Throw: None

Upon casting this spell, the shadow adept brings into being a shimmering, sword-like plane of force that leaps into <PRO_HISHER> hands. The sword acts as a +4 weapon in all respects and deals 3d4 points of slashing damage and 2d4 cold damage upon hitting a target. Once the spell is cast, the sword will float in the air completely under the caster's control. This does not prevent the caster from doing any other actions during the spell's duration.~

COPY ~%MOD_FOLDER%/spells/C0SA705.spl~ ~override~
SAY NAME1 ~Shadowplague~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj10%~
END
SAY NAME2 ~Shadowplague~
SAY UNIDENTIFIED_DESC ~Shadowplague
(Conjuration/Summoning - Shadow Weave)
Level: 7
Range: Long
Duration: 6 rounds
Casting Time: 1 round
Area of Effect: Target, and enemies within 30'
Saving Throw: Special

When the caster utters the spell, he calls forth a swarm of venomous biting and stinging shadow creatures to plague the target. This carpet-like mass swarms over a large area, spreading to all creatures within 30 feet of the target. Invisibility is no protection.

For the duration of the spell, those affected fight with a -2 penalty to attack rolls and armor class. In addition, each round, the victims suffer 2d6 points of damage from bites, have a 100% chance of spell failure, and must make saving throws vs. Death at -2 or run away in fear. If a successful Save vs. breath at -6 is made, the target manages to avoid most of the swarm, reducing damage from bites by half and completely negating the spell failure penalty.

This spell is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/C0SA707.spl~ ~override~
SAY NAME1 ~Vengeful Shade~
SAY NAME2 ~Vengeful Shade~
SAY UNIDENTIFIED_DESC ~Vengeful Shade
(Necromancy - Shadow Weave)

Level: 7
Range: Touch
Duration: 1 turn
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: None

This powerful and dangerous spell has the power to temporarily revive dead allies. For 1 turn, the target ally is resurrected with full hit points and dramatically increased power - the resurrected ally is hasted for the duration, Strength and Dexterity are set to 25, base AC is set to -6 and target gains immunity to all mind-affecting spells. The target deals maximum damage for the duration of the spell and their casting speed is increased by 4. However, this spell does not truly resurrect the target - once the spell has expired, the target dies again, regardless of their current hit points.~

COPY ~%MOD_FOLDER%/spells/c0sa707a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 5 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 2
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 4 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 3
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 3 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 4
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 2 rounds~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 5
 parameter1 = RESOLVE_STR_REF (~Vengeful Shade expires in 1 round~)
  END

COPY ~%MOD_FOLDER%/spells/C0SA708.spl~ ~override~
SAY NAME1 ~Nightmare~
SAY NAME2 ~Nightmare~
SAY UNIDENTIFIED_DESC ~Nightmare
(Enchantment/Charm - Shadow Weave)

Level: 7
Range: Visual range of the caster
Duration: 5 rounds
Casting Time: 1 
Area of Effect: 1 creature
Saving Throw: Neg.

Nightmare is both a deadly weapon and a horrific torture device. When the shadow adept casts this spell, <PRO_HESHE> causes one creature to fall into a deep sleep and become tormented with terrible nightmares. For each round that the target remains asleep, they must make a Save vs. Spell at -4 to wake up from the nightmare. If the save is failed, they must make a Save vs. Death at -2 or lose 10% of their hit points. Once 5 rounds have passed, the victim awakens from their nightmare without needing a save.~

COPY ~%MOD_FOLDER%/spells/c0sa709.spl~ ~override~
SAY NAME1 ~Possess~
SAY NAME2 ~Possess~
SAY UNIDENTIFIED_DESC ~Possess
(Enchantment/Charm - Shadow Weave)

Level: 7
Range: Visual range of the caster
Duration: 10 turns
Casting Time: 1 round
Area of Effect: 1 creature
Saving Throw: Neg.

When the shadow adept casts Possess, <PRO_HESHE> attempts to forcibly take control of one creature within <PRO_HISHER> visual range. The target must make as Saving Throw vs. Spells at -7 or become directly controlled by the caster. The shadow adept loses control of <PRO_HISHER> body but may see through the eyes of <PRO_HISHER> target and use spells and abilities available to them. Possess may not be dispelled and the target only regains control over their own body once the duration has ended or if the caster chooses to relinquish control of <PRO_HISHER> own volition.

Once the duration expires, the vertigo and shock of suddenly regaining control causes the target to suffer 5d10 non-lethal damage and fall unconscious for 5 rounds (no save).~

COPY ~%MOD_FOLDER%/spells/c0sa709a.spl~ ~override~
SAY NAME1 ~End Possession~
SAY NAME2 ~End Possession~
SAY UNIDENTIFIED_DESC ~End Possession

Use this ability to end Possession. The possessed target will suffer 5d10 non-lethal damage and fall unconscious for 5 rounds.~

COPY ~%MOD_FOLDER%/spells/C0SA710.spl~ ~override~
SAY NAME1 ~Malefic Bomb~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj20%~
END
SAY NAME2 ~Malefic Bomb~
SAY UNIDENTIFIED_DESC ~Malefic Bomb
(Invocation/Evocation - Shadow Weave)

Level: 7
Range: 50 ft.
Duration: Permanent
Casting Time: 6
Area of Effect: 10 ft. radius
Saving Throw: 1/2

The shadow adept launches a mass of volatile shadowstuff towards a target location, dealing 8d6 magic damage in a 20 ft. radius (Save vs. Death at -2 for half). All enemies that fail the save will, after 1 round, spontaneously explode with another Malefic Bomb dealing 4d6 damage in a 20 ft. radius (Save vs. Death for half), afflicting all enemies that fail the save with another Malefic Bomb dealing 2d6 damage in a 20 ft. radius.~

COPY ~%MOD_FOLDER%/spells/C0SA710a.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/C0SA710b.spl~ ~override~

COPY ~%MOD_FOLDER%/spells/C0SA711.spl~ ~override~
SAY NAME1 ~Shadow Gate~
SAY NAME2 ~Shadow Gate~
SAY UNIDENTIFIED_DESC ~Shadow Gate
(Conjuration - Shadow Weave)

Level: 7
Range: Visual range of the caster
Duration: 8 rounds
Casting Time: 1 round
Area of Effect: Special
Saving Throw: None

This spell conjures a one-way portal linked to the Plane of Shadow at the caster's targeted location for 8 rounds. For each round that the portal is active, a creature of the Plane of Shadow has a chance of emerging. These creatures are allied with the caster. There is a 40% chance of spawning a Shadow Fiend, a 40% chance of spawning a Wraith, a 10% chance of spawning a Devil Shade and a 5% chance of spawning a Nightwalker each turn. The Shadow Gate may be targeted and destroyed by enemies, though it is immune to elemental damage as well as weapons of +1 enchantment and below.

Creatures summoned by this spell remain for 1 turn.~

COPY ~%MOD_FOLDER%/spells/c0sa711.cre~ ~override~
SAY NAME1 ~Shadow Gate~
SAY NAME2 ~Shadow Gate~
WRITE_ASCII 0x248 ~c0sa711~ #8

COPY ~%MOD_FOLDER%/spells/c0sa712.spl~ ~override~
SAY NAME1 ~Nightfall~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0sarain%~
END
SAY NAME2 ~Nightfall~
SAY UNIDENTIFIED_DESC ~Nightfall
(Invocation/Evocation - Shadow Weave) 

Level: 7
Range: Visual range of the caster 
Duration: 6 rounds
Casting Time: 8
Area of Effect: 30-ft. radius
Saving Throw: None

This spell creates a rainfall of shadowstuff on the target location for six rounds. Enemy creatures suffer 1d6 magical damage for every round that they remain within the rainfall and suffer a cumulative penalty of -1 to Armor Class and all Saving Throws for one turn. Non-hostile creatures are healed for 2d6 hit points every round instead.~

COPY ~%MOD_FOLDER%/spells/C0SA801.spl~ ~override~
SAY NAME1 ~Negastorm~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj11%~
END
SAY NAME2 ~Negastorm~
SAY UNIDENTIFIED_DESC ~Negastorm
(Necromancy - Shadow Weave) 

Level: 8
Range: Visual range of the caster 
Duration: 2 rounds
Casting Time: 8
Area of Effect: 30-ft. radius
Saving Throw: 1/2

This spell summons a shower of negative energy upon a targeted location, inflicting 1d4 magic and cold damage per level of the caster as well as draining one level and one point of strength for each instance of damage dealt. Affected creatures are allowed a Saving Throw vs. Spell to avoid the cold damage and loss of levels (but not strength). Effects last for 1 turn.

The negastorm lasts for 2 rounds and does not affect allies.~

COPY ~%MOD_FOLDER%/spells/C0SA802.spl~ ~override~
SAY NAME1 ~Annulment~
SAY NAME2 ~Annulment~
SAY UNIDENTIFIED_DESC ~Annulment
(Abjuration - Shadow Weave)

Level: 8
Range: Touch
Duration: 1 round/level
Casting Time: 8
Area of Effect: 1 creature
Saving Throw: None

When the spell is cast, it confers 75% immunity against all energy attacks - such as fire, cold, acid, magic, and electricity, whether from magical or non-magical sources - such as spells, weapons, wands, breath weapons, etc. The target also becomes immune to all spells of 6th level and below, both beneficial and harmful, cast by others. This excludes any physical attacks and spell-created weapons, such as Enchanted Weapon and Spiritual Hammer. In other words, any physical damage, such as piercing, crushing, or slashing will get through. This effect lasts for the duration of the spell or until dispelled.~

COPY ~%MOD_FOLDER%/spells/c0sa803.spl~ ~override~
SAY NAME1 ~Shadow Prison~
SAY NAME2 ~Shadow Prison~
SAY UNIDENTIFIED_DESC ~Shadow Prison
(Conjuration/Summoning - Shadow Weave)

Level: 8
Range: Touch 
Duration: Special
Casting Time: 3
Area of Effect: 1 creature 
Saving Throw: None

An extradimensional space is brought into being upon utterance of a Shadow Prison spell. The subject and all enemies within a 10 ft radius vanish into the shifting labyrinth in the Shadow Plane for a period of time that is totally dependent upon its Intelligence.

Intelligence of Target    -    Time trapped in maze
         under 3                -            2d4 turns
         3 to 5                   -            1d4 turns
         6 to 8                   -            5d4 rounds
         9 to 11                 -            4d4 rounds
         12 to 14               -            3d4 rounds
         15 to 17               -            2d4 rounds
         18 and up            -           1d4 rounds

Note that if the 9th-level spell Freedom is cast in the area where a creature is mazed, it will effectively bring <PRO_HIMHER> back to this plane, ending the spell prematurely. Note that a mazed creature is not freed through Dispel Magic.~

COPY ~%MOD_FOLDER%/spells/c0sa804.spl~ ~override~
SAY NAME1 ~Power Word: Blind~
SAY NAME2 ~Power Word: Blind~
SAY UNIDENTIFIED_DESC ~Power Word, Blind
(Conjuration/Summoning - Shadow Weave)

Level: 8
Range: Visual range of the caster
Duration: 6 rounds
Casting Time: 1
Area of Effect: 10-ft. radius
Saving Throw: None

When a Power Word, Blind spell is cast, one or more creatures within the area of effect become sightless. The spellcaster selects one creature as the target center, and the effect spreads outward from the center, affecting all within a 10-ft. radius. This lasts for 6 rounds or until dispelled. All of the effects of blindness apply to the victims, such as a penalty to hit and to AC. The visibility range of the afflicted character is also decreased. This spell is not effected by magic resistance.~

COPY ~%MOD_FOLDER%/spells/c0sa805.spl~ ~override~
SAY NAME1 ~Shadow Shield~
SAY NAME2 ~Shadow Shield~
SAY UNIDENTIFIED_DESC ~Shadow Shield
(Abjuration - Shadow Weave)

Level: 8
Range: 0
Duration: 2 turns
Casting Time: 8
Area of Effect: The caster
Saving Throw: None

This spell shrouds the shadow adept in a cloak of shadow that protects <PRO_HIMHER> with the following effects: +5 bonus to AC, immunity to magic damage, 20% magic and physical resistance. This spell, unlike other Shadow Weave spells, does not drain the caster's life force and will in fact temporarily protect the shadow adept from loss of Constitution while it is active.~

COPY ~%MOD_FOLDER%/spells/c0sa806.spl~ ~override~
SAY NAME1 ~Blackfire Fury~
SAY NAME2 ~Blackfire Fury~
SAY UNIDENTIFIED_DESC ~Blackfire Fury
(Invocation/Evocation - Shadow Weave)

Level: 8
Range: 0
Duration: 5 turns
Casting Time: 8
Area of Effect: The caster
Saving Throw: 1/2

The shadow adept conjures a rift from the Shadow Plane beneath the target's feet, which unleashes black fire after a short delay dealing 10d10 fire damage (Save vs. Spells for half damage). This damage is not mitigated by fire resistance and ignores magic resistance.

If the target is slain by this spell, it is burned to ash completely and its remaining consciousness becomes a devil shade under the caster's allegiance for 5 turns before becoming assimilated into the Shadow Plane.~

COPY ~%MOD_FOLDER%/spells/c0sa807.spl~ ~override~
SAY NAME1 ~Shar's Mantle~
SAY NAME2 ~Shar's Mantle~
SAY UNIDENTIFIED_DESC ~Shar's Mantle
(Abjuration - Shadow Weave)

Level: 8
Range: 0
Duration: 1 round/4 levels
Casting Time: 6
Area of Effect: The caster
Saving Throw: None

This spell surrounds the shadow adept with a barrier of dark energy. Missiles are completely deflected and weapons of +3 enchantment or below are unable to penetrate the darkness. Additionally, attackers within a 5-ft. radius must make a Save vs. Death or suffer 10% of their maximum hit points as magic damage, transferring it to the caster, as well as lose one level permanently.~

COPY ~%MOD_FOLDER%/spells/c0sa808.spl~ ~override~
SAY NAME1 ~Shadow's Refuge~
SAY NAME2 ~Shadow's Refuge~
SAY UNIDENTIFIED_DESC ~Shadow's Refuge
(Abjuration - Shadow Weave)

Level: 8
Range: 0
Duration: 1 turn
Casting Time: 3
Area of Effect: The caster
Saving Throw: None

When a shadow adept casts Shadow's Refuge, <PRO_HESHE> opens a gate to a safe (in relative terms) pocket area in the Plane of Shadow, where time passes more slowly and gives <PRO_HIMHER> time to rest and recuperate away from the present battle. For one turn, the shadow adept is safe from combat and <PRO_HISHER> hit points are restored to full, and <PRO_HESHE> regains two spells of each spell level of 7th level and below when <PRO_HESHE> returns.

WARNING: Using this spell without other party members causes a game over!~

COPY ~%MOD_FOLDER%/spells/c0sa809.spl~ ~override~
SAY NAME1 ~Dark Premonition~
SAY NAME2 ~Dark Premonition~
SAY UNIDENTIFIED_DESC ~Dark Premonition
(Divination - Shadow Weave)

Level: 8
Range: Self
Duration: 4 rounds
Casting Time: 1
Area of Effect: Caster
Saving Throw: None

This spell grants the caster with a brief and short-sighted degree of prescience, enough to predict events in the immediate future and react to them in advance. For 4 rounds, the shadow adept gains a bonus of 20 to Armor Class, a +20 bonus to hit, +20 to all saves and immunity to backstabs. Due to this spell's short casting time and duration, it is mainly used to buy the shadow adept a few rounds in the thick of combat.~

COPY ~%MOD_FOLDER%/spells/c0sa810.spl~ ~override~
SAY NAME1 ~Dark Passage~
SAY NAME2 ~Dark Passage~
SAY UNIDENTIFIED_DESC ~Dark Passage
(Invocation/Evocation - Shadow Weave)

Level: 8
Range: Party
Duration: Special
Casting Time: 1 round
Area of Effect: Party
Saving Throw: None

This powerful but dangerous spell temporarily turns the caster into a gateway for the energies of the Shadow Weave, which <PRO_HESHE> may control and bestow upon <PRO_HISHER> allies for as long as <PRO_HESHE> can maintain it. For an indefinite amount of time, the shadow adept is unable to make any actions as <PRO_HESHE> channels power into <PRO_HISHER> party, hasting them, providing a +4 bonus to all attributes, +6 to Armor Class, +4 to to-hit and damage modifiers, +50% magic resistance, +50% resistance to elemental damage and immunity to level drain. However, for each round the link is maintained, the caster suffers 1d6 points of magic damage (Save vs. Death to avoid) and <PRO_HESHE> is completely vulnerable to attack unless <PRO_HESHE> breaks the connection. Additionally, if <PRO_HESHE> ends the channel, the backlash causes <PRO_HIMHER> to become stunned for 2 rounds unless a Save vs. Death at -2 is made.~

COPY ~%MOD_FOLDER%/spells/c0sa810a.spl~ ~override~
SAY NAME1 ~End Dark Passage~
SAY NAME2 ~End Dark Passage~
SAY UNIDENTIFIED_DESC ~End Dark Passage

Use this ability to break the Dark Passage. The shadow adept will be stunned for 2 rounds unless a Save vs. Death at -2 is made.~

COPY ~%MOD_FOLDER%/spells/C0SA811.spl~ ~override~
SAY NAME1 ~Invoke Reflection~
SAY NAME2 ~Invoke Reflection~
SAY UNIDENTIFIED_DESC ~Invoke Reflection
(Illusion/Phantasm - Shadow Weave) 

Level: 8
Range: Visual range of the caster
Duration: 2 turns
Casting Time: 9
Area of Effect: Special
Saving Throw: Special

A duplicate of the target is created with this spell. The duplicate is almost identical to the target, making it a very powerful ally. It is created at 60% of the target's level and has all the spells and abilities that the target would have at that level. It also has 60% of the target's Hit Points and is fully under the caster's control. Enemies can make a Saving Throw vs. Spells at -3 to avoid the spell's effect.~

COPY ~%MOD_FOLDER%/spells/C0SA812.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0blizza%~
END
SAY NAME1 ~Merciless Blizzard~
SAY NAME2 ~Merciless Blizzard~
SAY UNIDENTIFIED_DESC ~Merciless Blizzard
(Invocation/Evocation - Shadow Weave) 

Level: 8
Range: Visual range of the caster
Duration: 1 turn 
Casting Time: 8
Area of Effect: 30-ft. radius cloud 
Saving Throw: 1/2

This spell creates a vicious blizzard within a 30 ft. radius. Any in the area of the spell must leave the blizzard immediately or suffer 10d4 cold damage per round and become slowed for two rounds. Targets who remain within the blizzard suffer a cumulative -20% penalty to cold resistance for one turn. Additionally, all creatures must make a Save vs. Spells at -2 each round or be slowed for that round. This spell is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/c0sa901.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~Maximum Hit Points reduced to half~)
  END
SAY NAME1 ~Darkbolt~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj12%~
END
SAY NAME2 ~Darkbolt~
SAY UNIDENTIFIED_DESC ~Darkbolt
(Invocation/Evocation - Shadow Weave) 

Level: 9
Range: Visual range of the caster
Duration: 5 rounds
Casting Time: 0
Area of Effect: 1 creature
Saving Throw: Special 

This spell fires a bolt of necrotic energy which rends the soul of its target. Targets who fail a Save vs. Death at -2 have their maximum hit points cut in half for five rounds. Even if the target makes its save, they take 5d6+10 magic damage and their magic resistance, if any, is nullified for five rounds. This spell is not affected by magic resistance.

If this spell kills its target, the caster temporarily gains a 50% bonus to their maximum hit points for 1 turn and regains two spells of 8th level or below.~

COPY ~%MOD_FOLDER%/spells/c0sa902.spl~ ~override~
SAY NAME1 ~Umbral Stasis~
SAY NAME2 ~Umbral Stasis~
SAY UNIDENTIFIED_DESC ~Umbral Stasis
(Alteration - Shadow Weave)

Level: 9
Range: 0
Duration: Special
Casting Time: 9
Area of Effect: Special
Saving Throw: None 

This powerful spell causes the shadow adept to partially shift to the Plane of Shadow at the exact same point as he was, creating an effect identical to the Time Stop spell. The caster may move freely for 3 rounds in terms of time in the Plane of Shadow while time stands still in the Prime Material Plane. Additionally, the shadow adept's casting speed is increased by 4 and <PRO_HISHER> movement rate is doubled for the duration of the spell.~

COPY ~%MOD_FOLDER%/spells/c0sa903.spl~ ~override~
SAY NAME1 ~Nightsinger's Tithe~
SAY NAME2 ~Nightsinger's Tithe~
SAY UNIDENTIFIED_DESC ~Nightsinger's Tithe
(Conjuration/Summoning - Shadow Weave) 

Level: 9
Range: Visual range of the caster 
Duration: Instant
Casting Time: 1 
Area of Effect: 1 creature 
Saving Throw: None

When Nightsinger's Tithe is uttered, one creature within the spell range is slain. The target must have 60 or fewer current Hit Points, otherwise the spell has no effect. There is no Saving Throw. Creatures slain by this spell have their souls sent to the Plane of Shadow as a sacrifice to Shar. There is an 50% chance that killing a target with this spell will permanently bestow 1 bonus hit point to the caster. Once 50 enemies have been slain with this spell, the shadow adept permanently gains +2 to Constitution, +1 to all saves and -1 casting time, and further castings of this spell will no longer grant hit points.~

COPY ~%MOD_FOLDER%/spells/c0sa903b.spl~ ~override~
SAY NAME1 ~Nightsinger's Boon~
SAY NAME2 ~Nightsinger's Boon~

COPY ~%MOD_FOLDER%/spells/c0sa904.spl~ ~override~
SAY NAME1 ~Enervation~
SAY NAME2 ~Enervation~
SAY UNIDENTIFIED_DESC ~Enervation
(Necromancy - Shadow Weave) 

Level: 9
Range: Touch
Duration: Permanent
Casting Time: 3
Area of Effect: 1 creature
Saving Throw: None 

The casting of this spell opens a channel between the caster's plane and the Negative Energy Plane. The caster of the spell acts as a conduit between the two planes, sucking life from a victim and transferring it to the Negative Energy Plane, draining the target of two levels of experience every round for four rounds. A Saving Throw vs. Death at -4 can be made to avoid losing levels after the first round. The target of this spell loses levels, Hit Dice, Hit Points, and abilities permanently. These levels can only be restored by a priest's Restoration spell. Additionally, the caster is restored of 1-4 lost spells of 8th level or below for every instance of level loss of the target.~

COPY ~%MOD_FOLDER%/spells/c0sa905.spl~ ~override~
SAY NAME1 ~Black Blade of Disaster~
SAY NAME2 ~Black Blade of Disaster~
SAY UNIDENTIFIED_DESC ~Black Blade of Disaster
(Invocation/Evocation - Shadow Weave) 

Level: 9
Range: 0
Duration: 18 rounds
Casting Time: 4
Area of Effect: Special
Saving Throw: None 

This spell enables the caster to create a black, blade-shaped planar rift about three feet long. It jumps into the caster's hand and is used as a normal sword, remaining there for the duration of the spell. The caster is considered to be proficient to the point of Grand Mastery in this weapon. The sword acts as a +5 weapon and deals 2-24 damage to its victims. Also, every time it hits a target, the victim must make a Save vs. Death at +4 or be disintegrated. There is also a 10% chance with every hit that the sword drains 4 levels from the target and heals the wielder 20 Hit Points.~

COPY ~%MOD_FOLDER%/spells/c0sa906.spl~ ~override~
SAY NAME1 ~Negastorm~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0weird%~
END
SAY NAME1 ~Weird~
SAY NAME2 ~Weird~
SAY UNIDENTIFIED_DESC ~Weird
(Illusion/Phantasm - Shadow Weave) 

Level: 9
Range: 0
Duration: Instant
Casting Time: 8
Area of Effect: Special
Saving Throw: Special

You create a phantasmal image of the most fearsome creature imaginable to the subject simply by forming the fears of the subjects subconscious mind into something that its conscious mind can visualize: this most horrible beast. Only the affected creatures see the phantasmal creatures attacking them, though you see the attackers as shadowy shapes. The target first gets a Save vs. Spells at -4 to recognize the image as unreal. If that save fails, the phantasm touches the subject, and the subject must succeed on a Save vs. Death at -2 or die from fear. If a subject succeeds, it still takes 3d6 points of damage and is stunned for 1 round. The subject also takes 1d4 points of temporary Strength damage.~

COPY ~%MOD_FOLDER%/spells/c0sa907.spl~ ~override~
SAY NAME1 ~Death Mark~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END
SAY NAME2 ~Death Mark~
SAY UNIDENTIFIED_DESC ~Death Mark
(Necromancy - Shadow Weave) 

Level: 9
Range: 0
Duration: Special
Casting Time: 9
Area of Effect: 1 creature
Saving Throw: Special 

This horrific spell marks a specific target with a curse that dooms them to an inevitable end. The victim suffers 15% of their maximum hit points in damage on the first round with no save. On the next round, they must make another Saving Throw vs. Death at -5 or suffer the same amount of damage, then on the next round, make another saving throw at -4, and so on until a save modifier of zero. The curse remains indefinitely until the target is either killed, the curse is dispelled or resisted, or a successful save is made.~

COPY ~%MOD_FOLDER%/spells/c0sa907a.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END
COPY ~%MOD_FOLDER%/spells/c0sa907b.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END
COPY ~%MOD_FOLDER%/spells/c0sa907c.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END
COPY ~%MOD_FOLDER%/spells/c0sa907d.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END
COPY ~%MOD_FOLDER%/spells/c0sa907e.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 1
 parameter1 = RESOLVE_STR_REF (~15% of maximum hit points lost~)
  END

COPY ~%MOD_FOLDER%/spells/c0sa908.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0oblivi%~
END
SAY NAME1 ~Oblivion Pull~
SAY NAME2 ~Oblivion Pull~
SAY UNIDENTIFIED_DESC ~Oblivion Pull
(Abjuration - Shadow Weave)

Level: 9
Range: 30 ft.
Duration: 3 rounds
Casting Time: 9
Area of Effect: Special
Saving Throw: Special

When Oblivion Pull is cast, the shadow adept launches a tiny, fast-moving projectile towards a target which spawns a portal at the targeted location. The portal remains until an enemy comes within 5 ft. of it. When this happens, the portal pulls it and all other enemies within a 10 ft. radius into it and sends them to a small pocket in the Plane of Shadow where they are trapped indefinitely. The victim remains there unless the spell "Freedom" is cast. If a Freedom spell is cast in the area where the creature was imprisoned, then <PRO_HESHE> will reappear exactly where <PRO_HESHE> was last standing. Dispel Magic will not free creatures trapped in this manner. There is no Saving Throw against imprisonment.~

COPY ~%MOD_FOLDER%/spells/c0sa909.spl~ ~override~
SAY NAME1 ~Fiery Pandemonium~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0pandem%~
END
SAY NAME2 ~Fiery Pandemonium~
SAY UNIDENTIFIED_DESC ~Fiery Pandemonium
(Invocation/Evocation - Shadow Weave)

Level: 9
Range: 270 ft.
Duration: 6 rounds
Casting Time: 9
Area of Effect: 30-ft. radius
Saving Throw: None

When the caster utters the words to this powerful spell, <PRO_HESHE> calls upon powerful forces indeed. These forces bring forth a storm of shadow fire, dealing 6d10 fire and magical damage per round with no Saving Throw. Additionally, anyone within the storm must make a Saving Throw vs. Death each round or be petrified permanently. If a statue created by this spell is subjected to attacks of any sort, it will shatter into tiny pieces, making it impossible for the creature to be returned to flesh. The caster is well advised to be careful in <PRO_HISHER> use of this spell.

This spell is not affected by Magic Resistance.~

COPY ~%MOD_FOLDER%/spells/c0sahla1.spl~ ~override~
SAY NAME1 ~Relentless Assault~
SAY NAME2 ~Relentless Assault~
SAY UNIDENTIFIED_DESC ~Relentless Assault
(Any School - Shadow Weave)

Level: 10
Range: 0
Duration: 2 rounds
Casting Time: 9
Area of Effect: The caster
Saving Throw: None

Relentless Assault essentially erases the pause between casting spells. When cast, the shadow can begin casting a new spell the instant <PRO_HESHE> is finished casting <PRO_HISHER> current spell. The effect lasts for 2 rounds.

If the shadow adept's hit points fall below 25% of <PRO_HISHER> maximum during the spell's lifetime, the remaining duration is reset to 2 rounds (only once per cast).~

COPY ~%MOD_FOLDER%/spells/c0saalac.spl~ ~override~
SAY NAME1 ~Relentless Assault: Second Wind~
SAY NAME2 ~Relentless Assault: Second Wind~

COPY ~%MOD_FOLDER%/spells/c0sahla2.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 139
	  match_parameter1 = 40979
	  parameter1 = RESOLVE_STR_REF (~Four Levels Drained~)
  END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
	  match_opcode = 139
	  match_parameter1 = 40968
	  parameter1 = RESOLVE_STR_REF (~Two Levels Drained~)
  END
SAY NAME1 ~Shadow Dragon Breath~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0proj09%~
END
SAY NAME2 ~Shadow Dragon Breath~
SAY UNIDENTIFIED_DESC ~Shadow Dragon Breath
(Any School - Shadow Weave)

Level: 10
Range: 0
Duration: 1 turn
Casting Time: 1
Area of Effect: Special
Saving Throw: Neg.

The shadow adept releases a deadly breath of negative energy causing blindness, dealing 8d8 magic damage and draining six levels from all targets hit by the blast. Targets may Save vs. Breath at -6 to take half damage and lose only 2 levels.~

COPY ~%MOD_FOLDER%/spells/c0sahla3.spl~ ~override~
SAY NAME1 ~Summon Nightwalker~
SAY NAME2 ~Summon Nightwalker~
SAY UNIDENTIFIED_DESC ~Summon Nightwalker
(Any School - Shadow Weave)

Level: 10
Range: 0
Duration: 2 hours
Casting Time: 9
Area of Effect: Special
Saving Throw: Neg.

The shadow adept summons a deadly nightwalker, one of the most powerful creatures from the Plane of Shadows, under <PRO_HISHER> command.~

COPY ~%MOD_FOLDER%/spells/c0nightw.cre~ ~override~
SAY NAME1 ~Nightwalker~
SAY NAME2 ~Nightwalker~
  WRITE_ASCII 0x268 ~c0sasumm~  #8  // default
  WRITE_ASCII 0x280 ~c0nightw~  #32
    WRITE_LONG 0x28 (IDS_OF_SYMBOL (~animate~ ~C0_NIGHTWALKER~))

COPY ~%MOD_FOLDER%/spells/c0sahla4.spl~ ~override~
SAY NAME1 ~Shapeshift: Shadow Dragon Scion~
SAY NAME2 ~Shapeshift: Shadow Dragon Scion~
SAY UNIDENTIFIED_DESC ~Shapeshift: Shadow Dragon Scion
(Any School - Shadow Weave)

Level: 10
Range: 0
Duration: 5 turns
Casting Time: 9
Area of Effect: Special
Saving Throw: Neg.

The shadow adept shapeshifts into a half-dragon with shadow dragon lineage, gaining the powers available to such a creature. Spells may be cast while in this form.

Strength: 22
Dexterity: 24

Base Armor Class: -6
Number of Attacks: 3
Damage: 1d12+6 slashing, 1d4 cold, 50% chance to drain two levels on hit (Save vs. Death at -4 to avoid), strikes as a +5 weapon.
40% physical resistance
80% elemental damage resistance
100% magical damage resistance
60% magic resistance
Movement rate increased by 4
Regenerate 1 hp per 3 seconds~

COPY ~%MOD_FOLDER%/spells/c0shape4.itm~ ~override~
SAY NAME1 ~Shadow's Edge +5~
SAY NAME2 ~Shadow's Edge +5~

COPY ~%MOD_FOLDER%/spells/c0sahlaa.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 63617
 parameter1 = RESOLVE_STR_REF (~Night Knives Created~)
END
SAY NAME1 ~Night Knives~
SAY NAME2 ~Night Knives~
SAY UNIDENTIFIED_DESC ~Night Knives
(Any School - Shadow Weave)

Level: 10
Range: Special
Duration: 5 turns
Casting Time: 3
Area of Effect: Special
Saving Throw: None

This spell conjures several blades made of shadowstuff. The blades give +10 to THAC0, and when thrown does 1d4+2 missile damage as well as 1d4 cold damage. Additionally, the blades remain impaled within targets upon striking, dealing the same amount of damage again after a delay of 2 rounds. The spell creates 20 blades and sets the caster's attacks to 9 as long as the blades are held.~

COPY ~%MOD_FOLDER%/spells/c0nightk.itm~ ~override~
SAY NAME1 ~Night Knives~
SAY NAME2 ~Night Knives~
WRITE_SHORT 0x9C ~%c0nightk%~

COPY ~%MOD_FOLDER%/spells/c0sahla5.spl~ ~override~
SAY NAME1 ~Disciple of Darkness~
SAY NAME2 ~Disciple of Darkness~
SAY UNIDENTIFIED_DESC ~Disciple of Darkness
The shadow adept has fully mastered control over the Shadow Weave, gaining +2 to Wisdom and Charisma and 20% magic resistance.

Only one of either Disciple of Darkness or Wrath of Darkness may be chosen.~

COPY ~%MOD_FOLDER%/spells/c0sahla6.spl~ ~override~
SAY NAME1 ~Wrath of Darkness~
SAY NAME2 ~Wrath of Darkness~
SAY UNIDENTIFIED_DESC ~Wrath of Darkness 
The shadow adept infuses the power of the Shadow Weave into <PRO_HISHER> very body, gaining +2 to Strength and Constitution, regeneration of one hit point per 3 seconds and one bonus attack per round.

Only one of either Disciple of Darkness or Wrath of Darkness may be chosen.~

COPY ~%MOD_FOLDER%/spells/c0sahla7.spl~ ~override~
SAY NAME1 ~Shadow Pact I~
SAY NAME2 ~Shadow Pact I~
SAY UNIDENTIFIED_DESC ~Shadow Pact I
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 1, 2 and 3 spell each. However, <PRO_HESHE> permanently loses 2 hit points.

This ability may be chosen twice.~

COPY ~%MOD_FOLDER%/spells/c0sahla8.spl~ ~override~
SAY NAME1 ~Shadow Pact II~
SAY NAME2 ~Shadow Pact II~
SAY UNIDENTIFIED_DESC ~Shadow Pact II
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 4 and 5 spell each. However, <PRO_HESHE> permanently loses 3 hit points.

This ability may be chosen twice.

Requires: Shadow Pact I~

COPY ~%MOD_FOLDER%/spells/c0sahla9.spl~ ~override~
SAY NAME1 ~Shadow Pact III~
SAY NAME2 ~Shadow Pact III~
SAY UNIDENTIFIED_DESC ~Shadow Pact III
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 6 and 7 spell each. However, <PRO_HESHE> permanently loses 4 hit points.

This ability may be chosen twice.

Requires: Shadow Pact II~

COPY ~%MOD_FOLDER%/spells/c0sahla0.spl~ ~override~
SAY NAME1 ~Shadow Pact IV~
SAY NAME2 ~Shadow Pact IV~
SAY UNIDENTIFIED_DESC ~Shadow Pact IV
The shadow adept may trade a portion of <PRO_HISHER> life force in order to increase <PRO_HISHER> control over the Shadow Weave. Choosing this ability allows the shadow adept to cast one additional Level 8 and 9 spell each. However, <PRO_HESHE> permanently loses 5 hit points.

This ability may only be chosen once.

Requires: Shadow Pact III~

COPY ~%MOD_FOLDER%/spells/c0sahlab.spl~ ~override~
SAY NAME1 ~Arcane Lore~
SAY NAME2 ~Arcane Lore~
SAY UNIDENTIFIED_DESC ~Arcane Lore
The shadow adept taps into the deeper secrets of the shadow weave, gaining a permanent +1 to Intelligence and +10 Lore. <PRO_HESHE> also learns one extra Shadow Weave spell of each level.~

PRINT ~Add Familiars?
[1] Yes
[2] No~

OUTER_SPRINT ~familiar~ ~placeholder_value~
OUTER_WHILE (!(IS_AN_INT ~familiar~) OR (~familiar~ > 0x5) OR (~familiar~ < 0x1)) BEGIN
  PRINT ~Please select 1 or 2 and press Enter.~
  ACTION_READLN ~familiar~
END
      ACTION_IF ("familiar" = 1) THEN BEGIN
COPY ~%MOD_FOLDER%/familiars~ ~override~

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
  COPY_EXISTING ~clastext.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SADEPT~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@2)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
  COPY_EXISTING ~sodcltxt.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SADEPT~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@2)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 1 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SADEPT~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@2)
	  END
	END
  BUT_ONLY
END

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
  COPY_EXISTING ~clastext.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SADEP2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@3)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
  COPY_EXISTING ~sodcltxt.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SADEP2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@3)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 1 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SADEP2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@3)
	  END
	END
  BUT_ONLY
END

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
  COPY_EXISTING ~clastext.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SASORC~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@4)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
  COPY_EXISTING ~sodcltxt.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SASORC~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@4)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 1 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SASORC~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@4)
	  END
	END
  BUT_ONLY
END

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
  COPY_EXISTING ~clastext.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SASOR2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@5)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
  COPY_EXISTING ~sodcltxt.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SASOR2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@5)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 1 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SASOR2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@5)
	  END
	END
  BUT_ONLY
END

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
  COPY_EXISTING ~clastext.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SABARD~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@6)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
  COPY_EXISTING ~sodcltxt.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SABARD~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@6)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 1 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SABARD~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@6)
	  END
	END
  BUT_ONLY
END

ACTION_IF (FILE_EXISTS_IN_GAME ~clastext.2da~) BEGIN
  COPY_EXISTING ~clastext.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SABAR2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@7)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~sodcltxt.2da~) BEGIN
  COPY_EXISTING ~sodcltxt.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SABAR2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@7)
	  END
	END
  BUT_ONLY
END
ACTION_IF (FILE_EXISTS_IN_GAME ~kitlist.2da~) BEGIN
  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 1 ~text~ // read column value
	  PATCH_IF ~%text%~ STRING_EQUAL_CASE ~C0SABAR2~ BEGIN
	    SET patch_row = %row%
		SET_2DA_ENTRY (%patch_row%) 4 cols RESOLVE_STR_REF (@7)
	  END
	END
  BUT_ONLY
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur.bcs~ THEN BEGIN
EXTEND_TOP ~baldur.bcs~ ~%MOD_FOLDER%/scripts/c0safam1.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdbaldur.bcs~ THEN BEGIN
EXTEND_TOP ~bdbaldur.bcs~ ~%MOD_FOLDER%/scripts/c0safam1.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur25.bcs~ THEN BEGIN
EXTEND_TOP ~baldur25.bcs~ ~%MOD_FOLDER%/scripts/c0safam1.baf~
END

COPY ~%MOD_FOLDER%/familiars/C0SAFAM1.spl~ ~override~
SAY NAME1 ~Find Shadow Familiar~
SAY NAME2 ~Find Shadow Familiar~
SAY UNIDENTIFIED_DESC ~Find Shadow Familiar
This spell only needs to be cast once; upon casting, the shadow adept summons a creature from the Plane of Shadow to become <PRO_HISHER> aide and companion. However, this magical contract made between the caster and summon requires a sacrifice from the shadow adept. Upon casting this spell, the shadow adept loses four points of Constitution which gradually recovers over the course of four weeks. However, as the summoned creature is not native to the Prime Material Plane and usually unliving, they cannot be 'killed' in battle and if they are destroyed will reform after 24 hours have passed with no harm dealt to their summoner. Shadow familiars grow stronger with their caster and gain new abilities upon their master reaching certain experience thresholds.

The creature summoned by this spell is determined by the caster's alignment on the law-chaos axis.

LAWFUL NEUTRAL, LAWFUL EVIL: Yin'rou, Shade Wolf
Gender: Male
Alignment: Lawful Neutral
Base Class: Ranger
Hit Points: 65
STR: 17 DEX: 18 CON: 17 INT: 15 WIS: 10 CHA: 12
Starting Spells: Shadow Veil, Shadow Rope, Ghostly Visage, Night Terrors
Other abilities: Stealth, regenerates 1 hp/3 seconds (other familiars regenerate 1 hp/round)

TRUE NEUTRAL, NEUTRAL EVIL: Ka'Shai, Shadow
Gender: None
Alignment: True Neutral
Base Class: Bard
Hit Points: 30
STR: 14 DEX: 16 CON: 12 INT: 14 WIS: 14 CHA: 19
Starting Spells: Curse, Mesmerize, Power Word: Sleep, Black Mist
Other abilities: Bardsong reduces enemies' luck, cannot Pick Pockets, can attack with either ranged or melee. Ranged attacks drain 1d4+1 hit points and melee attacks drain 1 point of strength on hit

CHAOTIC NEUTRAL, CHAOTIC EVIL: Nyx, Shadow Mephit
Gender: Female
Alignment: Chaotic Neutral
Base Class: Shadowdancer
Hit Points: 38
STR: 10 DEX: 19 CON: 16 INT: 16 WIS: 12 CHA: 16
Starting Spells: Blinding Darkness, Decoy, Dark Mirage, Dark Fortune
Other abilities: Shadowstep, Hide in Plain Sight, can use thieving skills~

COPY ~%MOD_FOLDER%/familiars/C0SAFAM2.spl~ ~override~
SAY NAME1 ~Call Shadow Familiar~
SAY NAME2 ~Call Shadow Familiar~
SAY UNIDENTIFIED_DESC ~Call Shadow Familiar
This spell summons the shadow adept's bound shadow familiar from their home plane.~

ACTION_IF GAME_IS ~bgee eet~
THEN BEGIN
COMPILE ~%MOD_FOLDER%/dialogue/bg1/c0safam.d~
END

ACTION_IF GAME_IS ~bg2ee~
THEN BEGIN
COMPILE ~%MOD_FOLDER%/dialogue/c0safam.d~
END

COMPILE ~%MOD_FOLDER%/scripts/c0safam.baf~

ACTION_IF FILE_EXISTS_IN_GAME ~baldur.bcs~ THEN BEGIN
EXTEND_TOP ~baldur.bcs~ ~%MOD_FOLDER%/scripts/c0safamx.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~bdbaldur.bcs~ THEN BEGIN
EXTEND_TOP ~bdbaldur.bcs~ ~%MOD_FOLDER%/scripts/c0safamx.baf~
END

ACTION_IF FILE_EXISTS_IN_GAME ~baldur25.bcs~ THEN BEGIN
EXTEND_TOP ~baldur25.bcs~ ~%MOD_FOLDER%/scripts/c0safamx.baf~
END

COPY ~%MOD_FOLDER%/creatures/c0safam1.cre~ ~override~
WRITE_ASCII 0x248 ~c0safam~  #8  // override
WRITE_ASCII 0x2cc ~c0safam~  #8  // dialogue
WRITE_ASCII 0x280 ~c0safam~ #32 // death variable
SAY NAME1 ~Yin'rou~
SAY NAME2 ~Yin'rou~
WRITE_ASCII 0X34 ~C0Yinrou~ #8   //small portrait
SAY BATTLE_CRY1 ~~ [VWOLF03]
SAY BATTLE_CRY2 ~~ [VWOLF04]
SAY ATTACK1 ~~ [VWOLF05]
SAY ATTACK2 ~~ [VWOLF06]
SAY DAMAGE ~~ [VWOLF08]
SAY DYING ~~ [VWOLF09]
SAY SELECT_COMMON1 ~~ [VWOLF01]
SAY SELECT_COMMON2 ~~ [VWOLF02]

COPY ~%MOD_FOLDER%/creatures/c0safam2.cre~ ~override~
WRITE_ASCII 0x248 ~c0safam~  #8  // override
WRITE_ASCII 0x2cc ~c0safam~  #8  // dialogue
WRITE_ASCII 0x280 ~c0safam~ #32 // death variable
SAY NAME1 ~Ka'Shai~
SAY NAME2 ~Ka'Shai~
WRITE_ASCII 0X34 ~C0Kashai~ #8   //small portrait

COPY ~%MOD_FOLDER%/creatures/c0safam3.cre~ ~override~
WRITE_ASCII 0x248 ~c0safam~  #8  // override
WRITE_ASCII 0x2cc ~c0safam~  #8  // dialogue
WRITE_ASCII 0x280 ~c0safam~ #32 // death variable
SAY NAME1 ~Nyx~
SAY NAME2 ~Nyx~
WRITE_ASCII 0X34 ~C0Nyx~ #8   //small portrait

////////////////////////////////////////
///////////////familiars///////////////////
////////////////////////////////////////

COPY_EXISTING ~c0sa107.spl~ ~override/c0sfam01.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa109.spl~ ~override/c0sfam02.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa103.spl~ ~override/c0sfam03.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa108.spl~ ~override/c0sfam04.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa110.spl~ ~override/c0sfam05.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa111.spl~ ~override/c0sfam06.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa201.spl~ ~override/c0sfam07.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa202.spl~ ~override/c0sfam08.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa203.spl~ ~override/c0sfam09.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa204.spl~ ~override/c0sfam10.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa206.spl~ ~override/c0sfam11.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa208.spl~ ~override/c0sfam12.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa304.spl~ ~override/c0sfam13.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa305.spl~ ~override/c0sfam14.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa306.spl~ ~override/c0sfam15.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa405.spl~ ~override/c0sfam16.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa403.spl~ ~override/c0sfam17.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa410.spl~ ~override/c0sfam18.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa502.spl~ ~override/c0sfam19.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa510.spl~ ~override/c0sfam20.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa506.spl~ ~override/c0sfam21.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa603.spl~ ~override/c0sfam22.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa605.spl~ ~override/c0sfam23.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY_EXISTING ~c0sa609.spl~ ~override/c0sfam24.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
      END
      ACTION_IF ("familiar" = 2) THEN BEGIN
      END